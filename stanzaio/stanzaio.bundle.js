!function(t){if("function"==typeof bootstrap)bootstrap("xmpp",t);else if("object"==typeof exports)module.exports=t();else if("function"==typeof define&&define.amd)define(t);else if("undefined"!=typeof ses){if(!ses.ok())return;ses.makeXMPP=t}else"undefined"!=typeof window?window.XMPP=t():global.XMPP=t()}(function(){var t;return function(t,e,n){function r(n,o){if(!e[n]){if(!t[n]){var s="function"==typeof require&&require;if(!o&&s)return s(n,!0);if(i)return i(n,!0);throw new Error("Cannot find module '"+n+"'")}var a=e[n]={exports:{}};t[n][0].call(a.exports,function(e){var i=t[n][1][e];return r(i?i:e)},a,a.exports)}return e[n].exports}for(var i="function"==typeof require&&require,o=0;o<n.length;o++)r(n[o]);return r}({1:[function(t,e,n){n.Message=t("./lib/stanza/message"),n.Presence=t("./lib/stanza/presence"),n.Iq=t("./lib/stanza/iq"),n.Client=t("./lib/client"),n.crypto=t("crypto"),n.createClient=function(e){var r=new n.Client(e);return r.use(t("./lib/plugins/disco")),r.use(t("./lib/plugins/chatstates")),r.use(t("./lib/plugins/delayed")),r.use(t("./lib/plugins/forwarding")),r.use(t("./lib/plugins/carbons")),r.use(t("./lib/plugins/time")),r.use(t("./lib/plugins/mam")),r.use(t("./lib/plugins/receipts")),r.use(t("./lib/plugins/idle")),r.use(t("./lib/plugins/correction")),r.use(t("./lib/plugins/attention")),r.use(t("./lib/plugins/version")),r.use(t("./lib/plugins/invisible")),r.use(t("./lib/plugins/muc")),r.use(t("./lib/plugins/pubsub")),r.use(t("./lib/plugins/avatar")),r.use(t("./lib/plugins/private")),r.use(t("./lib/plugins/bookmarks")),r.use(t("./lib/plugins/jingle")),r}},{"./lib/client":2,"./lib/plugins/attention":4,"./lib/plugins/avatar":5,"./lib/plugins/bookmarks":6,"./lib/plugins/carbons":7,"./lib/plugins/chatstates":8,"./lib/plugins/correction":9,"./lib/plugins/delayed":10,"./lib/plugins/disco":11,"./lib/plugins/forwarding":12,"./lib/plugins/idle":13,"./lib/plugins/invisible":14,"./lib/plugins/jingle":15,"./lib/plugins/mam":16,"./lib/plugins/muc":17,"./lib/plugins/private":18,"./lib/plugins/pubsub":19,"./lib/plugins/receipts":20,"./lib/plugins/time":21,"./lib/plugins/version":22,"./lib/stanza/iq":36,"./lib/stanza/message":39,"./lib/stanza/presence":41,crypto:66}],2:[function(t,e){function n(t){var e=this;r.call(this),this.config=t||{},this.jid=new p,this._idPrefix=s.v4(),this._idCount=0,this.timeoutMonitor=null,this.negotiatedFeatures={},this.featureOrder=["sasl","streamManagement","bind","streamManagement","session"],this.features={},this.conn=new h,this.conn.on("*",function(t,n){e.emit(t,n)}),this.on("streamFeatures",function(t){var n=[function(e){e(null,t)}],r=["setup"];e.featureOrder.forEach(function(i){t._extensions[i]&&!e.negotiatedFeatures[i]&&(n.push(function(t,n){!e.negotiatedFeatures[i]&&e.features[i]?e.features[i](t,n):n(null,t)}),r.push(i))}),o.waterfall(n,function(t){"restart"===t?e.conn.restart():"disconnect"===t&&e.disconnect()})}),this.features.sasl=function(t,n){var r=m.create(t.sasl.mechanisms);e.on("sasl:success","sasl",function(){e.negotiatedFeatures.sasl=!0,e.releaseGroup("sasl"),e.emit("auth:success"),n("restart")}),e.on("sasl:challenge","sasl",function(t){r.challenge(t.value),e.send(new u.Response({value:r.response(e.getCredentials())})),r.cache&&(i.each(r.cache,function(t,n){e.config.credentials[n]=btoa(t)}),e.emit("credentials:update",e.config.credentials)),n()}),e.on("sasl:failure","sasl",function(){e.releaseGroup("sasl"),e.emit("auth:failed"),n("disconnect")}),e.on("sasl:abort","sasl",function(){e.releaseGroup("sasl"),e.emit("auth:failed"),n("disconnect")});var o={mechanism:r.name};r.clientFirst&&(o.value=r.response(e.getCredentials())),e.send(new u.Auth(o))},this.features.bind=function(t,n){e.sendIq({type:"set",bind:{resource:e.config.resource}},function(r,i){e.negotiatedFeatures.bind=!0,e.emit("session:bound",i.bind.jid),e.jid=new p(i.bind.jid),t._extensions.session||(e.sessionStarted=!0,e.emit("session:started",i.bind.jid)),n(null,t)})},this.features.session=function(t,n){e.sendIq({type:"set",session:{}},function(){e.negotiatedFeatures.session=!0,e.sessionStarted=!0,e.emit("session:started",e.jid),n(null,t)})},this.features.streamManagement=function(t,n){e.on("stream:management:enabled","sm",function(r){e.conn.sm.enabled(r),e.negotiatedFeatures.streamManagement=!0,e.on("stream:management:ack","connection",function(t){e.conn.sm.process(t)}),e.on("stream:management:request","connection",function(){e.conn.sm.ack()}),e.releaseGroup("sm"),n(null,t)}),e.on("stream:management:resumed","sm",function(r){e.conn.sm.enabled(r),e.negotiatedFeatures.streamManagement=!0,e.negotiatedFeatures.bind=!0,e.sessionStarted=!0,e.on("stream:management:ack","connection",function(t){e.conn.sm.process(t)}),e.on("stream:management:request","connection",function(){e.conn.sm.ack()}),e.releaseGroup("sm"),n(null,t)}),e.on("stream:management:failed","sm",function(){e.conn.sm.failed(),e.emit("session:end"),e.releaseGroup("session"),e.releaseGroup("sm"),n(null,t)}),e.conn.sm.id?e.conn.sm.id&&e.conn.sm.allowResume?e.conn.sm.resume():n(null,t):e.negotiatedFeatures.bind?e.conn.sm.enable():n(null,t)},this.on("disconnected",function(){e.sessionStarted=!1,e.negotiatedFeatures.sasl=!1,e.negotiatedFeatures.streamManagement=!1,e.negotiatedFeatures.bind=!1,e.negotiatedFeatures.session=!1,e.releaseGroup("connection")}),this.on("iq:set:roster",function(t){e.emit("roster:update",t),e.sendIq({id:t.id,type:"result"})}),this.on("iq",function(t){var n=t.type,r=Object.keys(t._extensions),o=t.xml.childNodes,s=0;if(i.each(o,function(t){1===t.nodeType&&(s+=1)}),"get"===t.type||"set"===t.type){if(1!=s)return e.sendIq(t.errorReply({error:{type:"modify",condition:"bad-request"}}));if(!r.length)return e.sendIq(t.errorReply({error:{type:"cancel",condition:"feature-not-implemented"}}));var a="iq:"+n+":"+r[0];e.callbacks[a]?e.emit(a,t):e.sendIq(t.errorReply({error:{type:"cancel",condition:"feature-not-implemented"}}))}}),this.on("message",function(t){Object.keys(t.$body).length&&("chat"===t.type||"normal"===t.type?e.emit("chat",t):"groupchat"===t.type&&e.emit("groupchat",t))}),this.on("presence",function(t){var n=t.type||"available";e.emit(n,t)})}var r=t("wildemitter"),i=t("underscore"),o=t("async"),s=t("node-uuid"),a=t("paddle"),u=t("./stanza/sasl"),c=t("./stanza/message"),f=t("./stanza/presence"),l=t("./stanza/iq"),p=t("./jid"),h=t("./websocket"),d=t("hostmeta"),m=t("saslmechanisms");m=new m,m.use(t("sasl-external")),m.use(t("sasl-scram-sha-1")),m.use(t("sasl-digest-md5")),m.use(t("sasl-plain")),m.use(t("sasl-anonymous")),t("./stanza/stream"),t("./stanza/sm"),t("./stanza/roster"),t("./stanza/error"),t("./stanza/streamError"),t("./stanza/streamFeatures"),t("./stanza/bind"),t("./stanza/session"),n.prototype=Object.create(r.prototype,{constructor:{value:n}}),n.prototype.__defineGetter__("stream",function(){return this.conn?this.conn.stream:void 0}),n.prototype.use=function(t){t(this)},n.prototype.nextId=function(){return this._idPrefix+"-"+(this._idCount++).toString(16)},n.prototype.discoverBindings=function(t,e){d(t,function(t,n){if(t)return e(t,[]);var r=[],i=n.links||[];i.forEach(function(t){t.href&&"urn:xmpp:altconnect:websocket"===t.rel&&r.push(t.href)}),e(!1,r)})},n.prototype.getCredentials=function(){var t=this.config.credentials||{},e=new p(this.config.jid),n=t.username||e.local,r=t.server||e.domain,o={username:n,password:this.config.password,server:r,host:r,realm:r,serviceType:"xmpp",serviceName:r},s=i.extend(o,t),a=["saltedPassword","clientKey","serverKey"];return a.forEach(function(t){s[t]&&(s[t]=atob(s[t]))}),s},n.prototype.connect=function(t){var e=this;return i.extend(e.config,t||{}),e.timeoutMonitor||(e.timeoutMonitor=new a.Paddle(e.config.timeout||15),e.timeoutMonitor.start()),e.config.wsURL?e.conn.connect(e.config):(e.discoverBindings(e.config.server,function(t,n){!t&&n.length?(e.config.wsURL=n[0],e.conn.connect(e.config)):e.disconnect()}),void 0)},n.prototype.disconnect=function(){this.timeoutMonitor&&(this.timeoutMonitor.stop(),this.timeoutMonitor=null),this.sessionStarted&&(this.emit("session:end"),this.releaseGroup("session")),this.sessionStarted=!1,this.releaseGroup("connection"),this.conn&&this.conn.disconnect()},n.prototype.send=function(t){this.conn.send(t)},n.prototype.sendMessage=function(t){t=t||{},t.id||(t.id=this.nextId());var e=new c(t);return this.emit("message:sent",e),this.send(e),t.id},n.prototype.sendPresence=function(t){return t=t||{},t.id||(t.id=this.nextId()),this.send(new f(t)),t.id},n.prototype.sendIq=function(t,e){var n=this;t=t||{},e=e||function(){},t.id||(t.id=this.nextId());var r=!1,i=function(t,n){r||(r=!0,e(t,n))};if("get"===t.type||"set"===t.type){var o=this.timeoutMonitor.insure(function(){i({type:"error",error:{condition:"timeout"}},null)}),s=new p(t.to),a={};a[""]=!0,a[s.full]=!0,a[s.bare]=!0,a[s.domain]=!0,a[n.jid.bare]=!0,a[n.jid.domain]=!0;var u=function(e){var r=e.from;a[r.full]&&(o.check_in(),n.off("id:"+t.id,u),e._extensions.error?i(e,null):i(null,e))};this.on("id:"+t.id,"session",u)}return t.toJSON||(t=new l(t)),this.send(t),t.id},n.prototype.getRoster=function(t){var e=this;t=t||function(){},this.sendIq({type:"get",roster:{ver:e.config.rosterVer}},function(n,r){return n?t(n):("result"===r.type&&r.roster.ver&&(e.config.rosterVer=r.roster.ver,e.emit("roster:ver",r.roster.ver)),t(null,r),void 0)})},n.prototype.updateRosterItem=function(t,e){this.sendIq({type:"set",roster:{items:[t]}},e)},n.prototype.removeRosterItem=function(t,e){this.updateRosterItem({jid:t,subscription:"remove"},e)},n.prototype.subscribe=function(t){this.sendPresence({type:"subscribe",to:t})},n.prototype.unsubscribe=function(t){this.sendPresence({type:"unsubscribe",to:t})},n.prototype.acceptSubscription=function(t){this.sendPresence({type:"subscribed",to:t})},n.prototype.denySubscription=function(t){this.sendPresence({type:"unsubscribed",to:t})},n.prototype.JID=function(t){return new p(t)},e.exports=n},{"./jid":3,"./stanza/bind":25,"./stanza/error":33,"./stanza/iq":36,"./stanza/message":39,"./stanza/presence":41,"./stanza/roster":45,"./stanza/sasl":48,"./stanza/session":49,"./stanza/sm":50,"./stanza/stream":51,"./stanza/streamError":52,"./stanza/streamFeatures":53,"./websocket":58,async:59,hostmeta:73,"node-uuid":99,paddle:100,"sasl-anonymous":102,"sasl-digest-md5":104,"sasl-external":106,"sasl-plain":108,"sasl-scram-sha-1":110,saslmechanisms:112,underscore:113,wildemitter:114}],3:[function(t,e){function n(t){t=t||"","string"==typeof t?(this.jid=t,this.parts={}):(this.jid=t.jid,this.parts=t.parts)}n.prototype={constructor:{value:n},toString:function(){return this.jid},get full(){return this.jid},get bare(){if(this.parts.bare)return this.parts.bare;var t=this.jid.indexOf("/");return this.parts.bare=t>0?this.jid.slice(0,t):this.jid,this.parts.bare},get resource(){if(this.parts.resource)return this.parts.resource;var t=this.jid.indexOf("/");return this.parts.resource=t>0?this.jid.slice(t+1):"",this.parts.resource},get local(){if(this.parts.local)return this.parts.local;var t=this.bare,e=t.indexOf("@");return this.parts.local=e>0?t.slice(0,e):t,this.parts.local},get domain(){if(this.parts.domain)return this.parts.domain;var t=this.bare,e=t.indexOf("@");return this.parts.domain=e>0?t.slice(e+1):t,this.parts.domain}},e.exports=n},{}],4:[function(t,e){e.exports=function(t){t.disco.addFeature("urn:xmpp:attention:0"),t.getAttention=function(e,n){n=n||{},n.to=e,n.type="headline",n.attention=!0,t.sendMessage(n)},t.on("message",function(e){e._extensions._attention&&t.emit("attention",e)})}},{}],5:[function(t,e){t("../stanza/avatar"),e.exports=function(t){t.disco.addFeature("urn:xmpp:avatar:metadata+notify"),t.on("pubsubEvent",function(e){e.event._extensions.updated&&"urn:xmpp:avatar:metadata"===e.event.updated.node&&t.emit("avatar",{jid:e.from,avatars:e.event.updated.published[0].avatars})}),t.publishAvatar=function(e,n,r){t.publish("","urn:xmpp:avatar:data",{id:e,avatarData:n},r)},t.useAvatars=function(e,n){t.publish("","urn:xmpp:avatar:metadata",{id:"current",avatars:e},n)},t.getAvatar=function(e,n,r){t.getItem(e,"urn:xmpp:avatar:data",n,r)}}},{"../stanza/avatar":24}],6:[function(t,e){t("../stanza/bookmarks"),e.exports=function(t){t.getBookmarks=function(t){this.getPrivateData({bookmarks:{}},t)},t.setBookmarks=function(t,e){this.setPrivateData({bookmarks:t},e)}}},{"../stanza/bookmarks":26}],7:[function(t,e){t("../stanza/carbons"),e.exports=function(t){t.disco.addFeature("urn:xmpp:carbons:2"),t.enableCarbons=function(t){this.sendIq({type:"set",enableCarbons:!0},t)},t.disableCarbons=function(t){this.sendIq({type:"set",disableCarbons:!0},t)},t.on("message",function(e){return e._extensions.carbonSent?t.emit("carbon:sent",e):e._extensions.carbonReceived?t.emit("carbon:received",e):void 0})}},{"../stanza/carbons":28}],8:[function(t,e){t("../stanza/chatstates"),e.exports=function(t){t.disco.addFeature("http://jabber.org/protocol/chatstates"),t.on("message",function(e){e.chatState&&t.emit("chatState",{to:e.to,from:e.from,chatState:e.chatState})})}},{"../stanza/chatstates":29}],9:[function(t,e){e.exports=function(t){t.disco.addFeature("urn:xmpp:message-correct:0"),t.on("message",function(e){e.replace&&(t.emit("replace",e),t.emit("replace:"+e.id,e))})}},{}],10:[function(t,e){t("../stanza/delayed"),e.exports=function(t){t.disco.addFeature("urn:xmpp:delay")}},{"../stanza/delayed":31}],11:[function(t,e){function n(t,e,n){"sha-1"===e&&(e="sha1");var i=r(t,e);return i&&i==n}function r(t,e){var n="",r=t.features.sort(),i=[],u={},c=[];o.forEach(t.identities,function(t){i.push([t.category||"",t.type||"",t.lang||"",t.name||""].join("/"))});var f=i.length,l=r.length;if(i=o.unique(i,!0),r=o.unique(r,!0),l!=r.length||f!=i.length)return!1;n+=i.join("<")+"<",n+=r.join("<")+"<";var p=!1;if(o.forEach(t.extensions,function(t){for(var e=t.fields,n=0,r=e.length;r>n;n++)if("FORM_TYPE"==e[n].name&&"hidden"==e[n].type){var i=e[n].value;return u[i]?(p=!0,void 0):(u[i]=t,c.push(i),void 0)}}),p)return!1;c.sort(),o.forEach(c,function(t){var e=u[t],r={},i=[];n+="<"+t,o.forEach(e.fields,function(t){var e=t.name;if("FORM_TYPE"!=e){var n=t.value||"";"object"!=typeof n&&(n=n.split("\n")),r[e]=n.sort(),i.push(e)}}),i.sort(),o.forEach(i,function(t){n+="<"+t,o.forEach(r[t],function(t){n+="<"+t})})}),"sha-1"===e&&(e="sha1");var h=s.createHash(e).update(a.encode(n)).digest("base64"),d=4-h.length%4;4===d&&(d=0);for(var m=0;d>m;m++)h+="=";return h}function i(){this.features={},this.identities={},this.extensions={},this.items={},this.caps={}}var o=t("underscore"),s=t("crypto");t("../stanza/disco"),t("../stanza/caps");var a={encode:function(t){return unescape(encodeURIComponent(t))},decode:function(t){return decodeURIComponent(escape(t))}};i.prototype={constructor:{value:i},addFeature:function(t,e){e=e||"",this.features[e]||(this.features[e]=[]),this.features[e].push(t)},addIdentity:function(t,e){e=e||"",this.identities[e]||(this.identities[e]=[]),this.identities[e].push(t)},addItem:function(t,e){e=e||"",this.items[e]||(this.items[e]=[]),this.items[e].push(t)},addExtension:function(t,e){e=e||"",this.extensions[e]||(this.extensions[e]=[]),this.extensions[e].push(t)}},e.exports=function(t){t.disco=new i(t),t.disco.addFeature("http://jabber.org/protocol/disco#info"),t.disco.addIdentity({category:"client",type:"web"}),t.getDiscoInfo=function(t,e,n){this.sendIq({to:t,type:"get",discoInfo:{node:e}},n)},t.getDiscoItems=function(t,e,n){this.sendIq({to:t,type:"get",discoItems:{node:e}},n)},t.updateCaps=function(){var e=this.config.capsNode||"https://stanza.io",n=JSON.parse(JSON.stringify({identities:this.disco.identities[""],features:this.disco.features[""],extensions:this.disco.extensions[""]})),i=r(n,"sha-1");return this.disco.caps={node:e,hash:"sha-1",ver:i},e=e+"#"+i,this.disco.features[e]=n.features,this.disco.identities[e]=n.identities,this.disco.extensions[e]=n.extensions,t.getCurrentCaps()},t.getCurrentCaps=function(){var e=t.disco.caps;if(!e.ver)return{ver:null,discoInfo:null};var n=e.node+"#"+e.ver;return{ver:e.ver,discoInfo:{identities:t.disco.identities[n],features:t.disco.features[n],extensions:t.disco.extensions[n]}}},t.on("presence",function(e){e._extensions.caps&&t.emit("disco:caps",e)}),t.on("iq:get:discoInfo",function(e){var n=e.discoInfo.node,r=e.discoInfo.node;n===t.disco.caps.node+"#"+t.disco.caps.ver&&(r=n,n=""),t.sendIq(e.resultReply({discoInfo:{node:r,identities:t.disco.identities[n]||[],features:t.disco.features[n]||[],extensions:t.disco.extensions[n]||[]}}))}),t.on("iq:get:discoItems",function(e){var n=e.discoInfo.node;t.sendIq(e.resultReply({discoItems:{node:n,items:t.disco.items[n]||[]}}))}),t.verifyVerString=n,t.generateVerString=r}},{"../stanza/caps":27,"../stanza/disco":32,crypto:66,underscore:113}],12:[function(t,e){t("../stanza/forwarded"),e.exports=function(t){t.disco.addFeature("urn:xmpp:forward:0")}},{"../stanza/forwarded":34}],13:[function(t,e){e.exports=function(t){t.disco.addFeature("urn:xmpp:idle:0")}},{}],14:[function(t,e){t("../stanza/visibility"),e.exports=function(t){t.goInvisible=function(){this.sendIq({type:"set",invisible:!0})},t.goVisible=function(){this.sendIq({type:"set",visible:!0})}}},{"../stanza/visibility":57}],15:[function(t,e){var n=t("jingle");t("../stanza/jingle"),t("../stanza/rtp"),t("../stanza/iceUdp"),e.exports=function(t){var e=t.jingle=new n;e.capabilities.forEach(function(e){t.disco.addFeature(e)}),e.on("localStream",function(e){t.emit("jingle:localstream:added",e)}),e.on("localStreamStopped",function(){t.emit("jingle:localstream:removed")}),e.on("peerStreamAdded",function(e){t.emit("jingle:remotestream:added",e)}),e.on("peerStreamRemoved",function(e){t.emit("jingle:remotestream:removed",e)}),e.on("incoming",function(e){t.emit("jingle:incoming",e)}),e.on("outgoing",function(e){t.emit("jingle:outgoing",e)}),e.on("send",function(e){t.sendIq(e),console.log("outgoing",e)}),t.on("iq:set:jingle",function(t){t=t.toJSON(),console.log("incoming",t),e.process(t)}),t.call=function(t){t=t.full||t;var n=e.createMediaSession(t);return n.start(),n}}},{"../stanza/iceUdp":35,"../stanza/jingle":37,"../stanza/rtp":47,jingle:80}],16:[function(t,e){t("../stanza/mam"),e.exports=function(t){t.disco.addFeature("urn:xmpp:mam:tmp"),t.getHistory=function(t,e){var n=this,r=this.nextId();t=t||{},t.queryid=r;var i=[];this.on("mam:"+r,"session",function(t){i.push(t)}),e=e||function(){},this.sendIq({type:"get",id:r,mamQuery:t},function(t,o){t?e(t):(n.off("mam:"+r),o.mamQuery.results=i,e(null,o))})},t.getHistoryPreferences=function(e){t.sendIq({type:"get",mamPrefs:{}},e)},t.setHistoryPreferences=function(e,n){t.sendIq({type:"set",mamPrefs:e},n)},t.on("message",function(e){e._extensions.mam&&t.emit("mam:"+e.mam.queryid,e)})}},{"../stanza/mam":38}],17:[function(t,e){t("../stanza/muc"),e.exports=function(t){t.joinRoom=function(t,e,n){n=n||{},n.to=t+"/"+e,n.caps=this.disco.caps,n.joinMuc=n.joinMuc||{},this.sendPresence(n)},t.leaveRoom=function(t,e,n){n=n||{},n.to=t+"/"+e,n.type="unavailable",this.sendPresence(n)}}},{"../stanza/muc":40}],18:[function(t,e){t("../stanza/private"),e.exports=function(t){t.getPrivateData=function(t,e){this.sendIq({type:"get",privateStorage:t},e)},t.setPrivateData=function(t,e){this.sendIq({type:"set",privateStorage:t},e)}}},{"../stanza/private":42}],19:[function(t,e){t("../stanza/pubsub"),e.exports=function(t){t.on("message",function(e){e._extensions.event&&t.emit("pubsubEvent",e)}),t.subscribeToNode=function(e,n,r){t.sendIq({type:"set",to:e,pubsub:{subscribe:{node:n.node,jid:n.jid||t.jid}}},r)},t.unsubscribeFromNode=function(e,n,r){t.sendIq({type:"set",to:e,pubsub:{unsubscribe:{node:n.node,jid:n.jid||t.jid.split("/")[0]}}},r)},t.publish=function(e,n,r,i){t.sendIq({type:"set",to:e,pubsub:{publish:{node:n,item:r}}},i)},t.getItem=function(e,n,r,i){t.sendIq({type:"get",to:e,pubsub:{retrieve:{node:n,item:r}}},i)},t.getItems=function(e,n,r,i){r=r||{},r.node=n,t.sendIq({type:"get",to:e,pubsub:{retrieve:{node:n,max:r.max},rsm:r.rsm}},i)},t.retract=function(e,n,r,i,o){t.sendIq({type:"set",to:e,pubsub:{retract:{node:n,notify:i,id:r}}},o)},t.purgeNode=function(e,n,r){t.sendIq({type:"set",to:e,pubsubOwner:{purge:n}},r)},t.deleteNode=function(e,n,r){t.sendIq({type:"set",to:e,pubsubOwner:{del:n}},r)},t.createNode=function(e,n,r,i){var o={type:"set",to:e,pubsubOwner:{create:n}};r&&(o.pubsubOwner.config={form:r}),t.sendIq(o,i)}}},{"../stanza/pubsub":43}],20:[function(t,e){t("../stanza/receipts"),e.exports=function(t){t.disco.addFeature("urn:xmpp:receipts"),t.on("message",function(e){var n={normal:!0,chat:!0,headline:!0};n[e.type]&&e.requestReceipt&&!e._extensions.receipt&&t.sendMessage({to:e.from,receipt:{id:e.id},id:e.id}),e._extensions.receipt&&t.emit("receipt:"+e.receipt.id)})}},{"../stanza/receipts":44}],21:[function(t,e){t("../stanza/time"),e.exports=function(t){t.disco.addFeature("urn:xmpp:time"),t.getTime=function(t,e){this.sendIq({to:t,type:"get",time:!0},e)},t.on("iq:get:time",function(e){var n=new Date;t.sendIq(e.resultReply({time:{utc:n,tzo:n.getTimezoneOffset()}}))})}},{"../stanza/time":54}],22:[function(t,e){t("../stanza/version"),e.exports=function(t){t.disco.addFeature("jabber:iq:version"),t.on("iq:get:version",function(e){t.sendIq(e.resultReply({version:t.config.version||{name:"stanza.io"}}))}),t.getSoftwareVersion=function(t,e){this.sendIq({to:t,type:"get",version:{}},e)}}},{"../stanza/version":56}],23:[function(t,e){function n(t,e){return(t%e+e)%e}function r(t){this.conn=t,this.id=!1,this.allowResume=!0,this.started=!1,this.lastAck=0,this.handled=0,this.windowSize=1,this.windowCount=0,this.unacked=[]}var i=t("./stanza/sm"),o=Math.pow(2,32);r.prototype={constructor:{value:r},enable:function(){var t=new i.Enable;t.resume=this.allowResume,this.conn.send(t),this.handled=0,this.started=!0},resume:function(){var t=new i.Resume({h:this.handled,previd:this.id});this.conn.send(t),this.started=!0},enabled:function(t){this.id=t.id},resumed:function(t){this.id=t.id,t.h&&this.process(t,!0)},failed:function(){this.started=!1,this.id=!1,this.lastAck=0,this.handled=0,this.windowCount=0,this.unacked=[]},ack:function(){this.conn.send(new i.Ack({h:this.handled}))},request:function(){this.conn.send(new i.Request)},process:function(t,e){for(var r=this,i=n(t.h-this.lastAck,o),s=0;i>s&&this.unacked.length>0;s++)this.conn.emit("stanza:acked",this.unacked.shift());if(e){var a=this.unacked;this.unacked=[],a.forEach(function(t){r.conn.send(t)})}this.lastAck=t.h},track:function(t){var e=t._name,n={message:!0,presence:!0,iq:!0};this.started&&n[e]&&(this.unacked.push(t),this.windowCount+=1,this.windowCount==this.windowSize&&(this.request(),this.windowCount=0))},handle:function(){this.started&&(this.handled=n(this.handled+1,o))}},e.exports=r},{"./stanza/sm":50}],24:[function(t,e){var n=t("underscore"),r=t("jxt"),i=t("./pubsub").Item,o=t("./pubsub").EventItem,s=e.exports=r.define({name:"avatar",namespace:"urn:xmpp:avatar:metadata",element:"info",fields:{id:r.attribute("id"),bytes:r.attribute("bytes"),height:r.attribute("height"),width:r.attribute("width"),type:r.attribute("type","image/png"),url:r.attribute("url")}}),a={get:function(){var t=r.find(this.xml,"urn:xmpp:avatar:metadata","metadata"),e=[];if(t.length){var i=r.find(t[0],"urn:xmpp:avatar:metadata","info");n.forEach(i,function(t){e.push(new s({},t))})}return e},set:function(t){var e=r.findOrCreate(this.xml,"urn:xmpp:avatar:metadata","metadata");r.setAttribute(e,"xmlns","urn:xmpp:avatar:metadata"),n.forEach(t,function(t){var n=new s(t);e.appendChild(n.xml)})}};r.add(i,"avatars",a),r.add(o,"avatars",a),r.add(i,"avatarData",r.subText("urn:xmpp:avatar:data","data")),r.add(o,"avatarData",r.subText("urn:xmpp:avatar:data","data"))},{"./pubsub":43,jxt:95,underscore:113}],25:[function(t,e){var n=t("jxt"),r=t("./iq"),i=t("./streamFeatures"),o=t("./util"),s="urn:ietf:params:xml:ns:xmpp-bind",a=e.exports=n.define({name:"bind",namespace:s,element:"bind",fields:{resource:n.subText(s,"resource"),jid:o.jidSub(s,"jid")}});n.extend(r,a),n.extend(i,a)},{"./iq":36,"./streamFeatures":53,"./util":55,jxt:95}],26:[function(t,e){var n=t("jxt"),r=t("./util"),i=t("./private"),o=n.define({name:"conference",namespace:"storage:bookmarks",element:"conference",fields:{name:n.attribute("name"),autoJoin:n.boolAttribute("autojoin"),jid:r.jidAttribute("jid"),nick:n.subText("storage:bookmarks","nick")}}),s=e.exports=n.define({name:"bookmarks",namespace:"storage:bookmarks",element:"storage"});n.extend(i,s),n.extend(s,o,"conferences")},{"./private":42,"./util":55,jxt:95}],27:[function(t,e){var n=t("jxt"),r=t("./presence"),i=t("./streamFeatures"),o=e.exports=n.define({name:"caps",namespace:"http://jabber.org/protocol/caps",element:"c",fields:{ver:n.attribute("ver"),node:n.attribute("node"),hash:n.attribute("hash"),ext:n.attribute("ext")}});n.extend(r,o),n.extend(i,o)},{"./presence":41,"./streamFeatures":53,jxt:95}],28:[function(t,e,n){var r=t("jxt"),i=t("./message"),o=t("./iq"),s=t("./forwarded");n.Sent=r.define({name:"carbonSent",eventName:"carbon:sent",namespace:"urn:xmpp:carbons:2",element:"sent"}),n.Received=r.define({name:"carbonReceived",eventName:"carbon:received",namespace:"urn:xmpp:carbons:2",element:"received"}),n.Private=r.define({name:"carbonPrivate",eventName:"carbon:private",namespace:"urn:xmpp:carbons:2",element:"private"}),n.Enable=r.define({name:"enableCarbons",namespace:"urn:xmpp:carbons:2",element:"enable"}),n.Disable=r.define({name:"disableCarbons",namespace:"urn:xmpp:carbons:2",element:"disable"}),r.extend(n.Sent,s),r.extend(n.Received,s),r.extend(i,n.Sent),r.extend(i,n.Received),r.extend(i,n.Private),r.extend(o,n.Enable),r.extend(o,n.Disable)},{"./forwarded":34,"./iq":36,"./message":39,jxt:95}],29:[function(t){var e=t("jxt"),n=t("./message"),r="http://jabber.org/protocol/chatstates",i=e.define({name:"chatStateActive",eventName:"chat:active",namespace:r,element:"active"}),o=e.define({name:"chatStateComposing",eventName:"chat:composing",namespace:r,element:"composing"}),s=e.define({name:"chatStatePaused",eventName:"chat:paused",namespace:r,element:"paused"}),a=e.define({name:"chatStateInactive",eventName:"chat:inactive",namespace:r,element:"inactive"}),u=e.define({name:"chatStateGone",eventName:"chat:gone",namespace:r,element:"gone"});e.extend(n,i),e.extend(n,o),e.extend(n,s),e.extend(n,a),e.extend(n,u),e.add(n,"chatState",{get:function(){for(var t=this,e=["Active","Composing","Paused","Inactive","Gone"],n=0;n<e.length;n++)if(t._extensions["chatState"+e[n]])return e[n].toLowerCase();return""},set:function(t){var e=this,n=["Active","Composing","Paused","Inactive","Gone"];n.forEach(function(t){e._extensions["chatState"+t]&&(e.xml.removeChild(e._extensions["chatState"+t].xml),delete e._extensions["chatState"+t])}),t&&this["chatState"+t.charAt(0).toUpperCase()+t.slice(1)]}})},{"./message":39,jxt:95}],30:[function(t,e,n){t("underscore");var r=t("jxt");t("./util");var i=t("./message");n.DataForm=r.define({name:"form",namespace:"jabber:x:data",element:"x",fields:{title:r.subText("jabber:x:data","title"),instructions:r.multiSubText("jabber:x:data","instructions"),type:r.attribute("type","form")}}),n.Field=r.define({name:"field",namespace:"jabber:x:data",element:"field",init:function(t){this._type=t.type||this.type},fields:{type:{get:function(){return r.getAttribute(this.xml,"type","text-single")},set:function(t){this._type=t,r.setAttribute(this.xml,"type",t)}},name:r.attribute("var"),desc:r.subText("desc"),required:r.boolSub("jabber:x:data","required"),label:r.attribute("label"),value:{get:function(){var t=r.getMultiSubText(this.xml,this._NS,"value");return"boolean"===this._type?"1"===t[0]||"true"===t[0]:t.length>1?"text-multi"===this._type?t.join("\n"):t:t[0]},set:function(t){"boolean"===this._type?r.setSubText(this.xml,this._NS,"value",t?"1":"0"):("text-multi"===this._type&&(t=t.split("\n")),r.setMultiSubText(this.xml,this._NS,"value",t))}},options:{get:function(){var t=this;return r.getMultiSubText(this.xml,this._NS,"option",function(e){return r.getSubText(e,t._NS,"value")})},set:function(t){var e=this;r.setMultiSubText(this.xml,this._NS,"option",t,function(t){var n=document.createElementNS(e._NS,"option"),r=document.createElementNS(e._NS,"value");n.appendChild(r),r.textContent=t,e.xml.appendChild(n)})}}}}),r.extend(i,n.DataForm)},{"./message":39,"./util":55,jxt:95,underscore:113}],31:[function(t,e){var n=t("jxt"),r=t("./message"),i=t("./presence"),o=t("./util"),s=e.exports=n.define({name:"delay",namespace:"urn:xmpp:delay",element:"delay",fields:{from:o.jidAttribute("from"),stamp:o.dateAttribute("stamp"),reason:n.text()}});n.extend(r,s),n.extend(i,s)},{"./message":39,"./presence":41,"./util":55,jxt:95}],32:[function(t,e,n){t("underscore");var r=t("jxt"),i=t("../jid"),o=t("./iq"),s=t("./rsm"),a=t("./dataforms").DataForm;n.DiscoInfo=r.define({name:"discoInfo",namespace:"http://jabber.org/protocol/disco#info",element:"query",fields:{node:r.attribute("node"),identities:{get:function(){var t=[],e=r.find(this.xml,this._NS,"identity");return e.forEach(function(e){t.push({category:r.getAttribute(e,"category"),type:r.getAttribute(e,"type"),lang:e.getAttributeNS(r.XML_NS,"lang"),name:r.getAttribute(e,"name")})}),t},set:function(t){var e=this,n=r.find(this.xml,this._NS,"identity");n.forEach(function(t){e.xml.removeChild(t)}),t.forEach(function(t){var n=document.createElementNS(e._NS,"identity");r.setAttribute(n,"category",t.category),r.setAttribute(n,"type",t.type),r.setAttribute(n,"name",t.name),t.lang&&n.setAttributeNS(r.XML_NS,"lang",t.lang),e.xml.appendChild(n)})}},features:{get:function(){var t=[],e=r.find(this.xml,this._NS,"feature");return e.forEach(function(e){t.push(e.getAttribute("var"))}),t},set:function(t){var e=this,n=r.find(this.xml,this._NS,"feature");n.forEach(function(t){e.xml.removeChild(t)}),t.forEach(function(t){var n=document.createElementNS(e._NS,"feature");n.setAttribute("var",t),e.xml.appendChild(n)})}}}}),n.DiscoItems=r.define({name:"discoItems",namespace:"http://jabber.org/protocol/disco#items",element:"query",fields:{node:r.attribute("node"),items:{get:function(){var t=[],e=r.find(this.xml,this._NS,"item");return e.forEach(function(e){t.push({jid:new i(r.getAttribute(e,"jid")),node:r.getAttribute(e,"node"),name:r.getAttribute(e,"name")})}),t},set:function(t){var e=this,n=r.find(this.xml,this._NS,"item");n.forEach(function(t){e.xml.removeChild(t)}),t.forEach(function(t){var n=document.createElementNS(e._NS,"item");r.setAttribute(n,"jid",t.jid.toString()),r.setAttribute(n,"node",t.node),r.setAttribute(n,"name",t.name),e.xml.appendChild(n)})}}}}),r.extend(o,n.DiscoInfo),r.extend(o,n.DiscoItems),r.extend(n.DiscoItems,s),r.extend(n.DiscoInfo,a,"extensions")},{"../jid":3,"./dataforms":30,"./iq":36,"./rsm":46,jxt:95,underscore:113}],33:[function(t,e){t("underscore");var n=t("jxt"),r=t("./util"),i=t("./message"),o=t("./presence"),s=t("./iq"),a="urn:ietf:params:xml:ns:xmpp-stanzas",u=["bad-request","conflict","feature-not-implemented","forbidden","gone","internal-server-error","item-not-found","jid-malformed","not-acceptable","not-allowed","not-authorized","payment-required","recipient-unavailable","redirect","registration-required","remote-server-not-found","remote-server-timeout","resource-constraint","service-unavailable","subscription-required","undefined-condition","unexpected-request"],c=e.exports=n.define({name:"error",namespace:"jabber:client",element:"error",fields:{lang:{get:function(){return(this.parent||{}).lang||""}},condition:{get:function(){var t=this,e=[];return u.forEach(function(r){var i=n.find(t.xml,a,r);i.length&&e.push(i[0].tagName)}),e[0]||""},set:function(t){var e=this;if(u.forEach(function(t){var r=n.find(e.xml,a,t);r.length&&e.xml.removeChild(r[0])}),t){var r=document.createElementNS(a,t);r.setAttribute("xmlns",a),this.xml.appendChild(r)}}},gone:{get:function(){return n.getSubText(this.xml,a,"gone")},set:function(t){this.condition="gone",n.setSubText(this.xml,a,"gone",t)}},redirect:{get:function(){return n.getSubText(this.xml,a,"redirect")},set:function(t){this.condition="redirect",n.setSubText(this.xml,a,"redirect",t)}},code:n.attribute("code"),type:n.attribute("type"),by:r.jidAttribute("by"),$text:{get:function(){return n.getSubLangText(this.xml,a,"text",this.lang)
}},text:{get:function(){var t=this.$text;return t[this.lang]||""},set:function(t){n.setSubLangText(this.xml,a,"text",t,this.lang)}}}});n.extend(i,c),n.extend(o,c),n.extend(s,c)},{"./iq":36,"./message":39,"./presence":41,"./util":55,jxt:95,underscore:113}],34:[function(t,e){var n=t("jxt"),r=t("./message"),i=t("./presence"),o=t("./iq"),s=t("./delayed"),a=e.exports=n.define({name:"forwarded",eventName:"forward",namespace:"urn:xmpp:forward:0",element:"forwarded"});n.extend(r,a),n.extend(a,r),n.extend(a,i),n.extend(a,o),n.extend(a,s)},{"./delayed":31,"./iq":36,"./message":39,"./presence":41,jxt:95}],35:[function(t,e,n){t("underscore");var r=t("jxt");t("./util");var i=t("./jingle"),o="urn:xmpp:jingle:transports:ice-udp:1";n.ICEUDP=r.define({name:"_iceUdp",namespace:o,element:"transport",fields:{transType:{value:"iceUdp"},pwd:r.attribute("pwd"),ufrag:r.attribute("ufrag")}}),n.RemoteCandidate=r.define({name:"remoteCandidate",namespace:o,element:"remote-candidate",fields:{component:r.attribute("component"),ip:r.attribute("ip"),port:r.attribute("port")}}),n.Candidate=r.define({name:"_iceUdpCandidate",namespace:o,element:"candidate",fields:{component:r.attribute("component"),foundation:r.attribute("foundation"),generation:r.attribute("generation"),id:r.attribute("id"),ip:r.attribute("ip"),network:r.attribute("network"),port:r.attribute("port"),priority:r.attribute("priority"),protocol:r.attribute("protocol"),relAddr:r.attribute("rel-addr"),relPort:r.attribute("rel-port"),type:r.attribute("type")}}),n.Fingerprint=r.define({name:"fingerprint",namespace:"urn:xmpp:tmp:jingle:apps:dtls:0",element:"fingerprint",fields:{hash:r.attribute("hash"),value:r.text(),required:r.boolAttribute("required")}}),r.extend(i.Content,n.ICEUDP),r.extend(n.ICEUDP,n.Candidate,"candidates"),r.extend(n.ICEUDP,n.RemoteCandidate),r.extend(n.ICEUDP,n.Fingerprint)},{"./jingle":37,"./util":55,jxt:95,underscore:113}],36:[function(t,e){var n=t("jxt"),r=t("./util"),i=e.exports=n.define({name:"iq",namespace:"jabber:client",element:"iq",topLevel:!0,fields:{lang:r.langAttribute(),id:n.attribute("id"),to:r.jidAttribute("to"),from:r.jidAttribute("from"),type:n.attribute("type")}});i.prototype.resultReply=function(t){return t.to=this.from,t.id=this.id,t.type="result",new i(t)},i.prototype.errorReply=function(t){return t.to=this.from,t.id=this.id,t.type="error",new i(t)}},{"./util":55,jxt:95}],37:[function(t,e,n){t("underscore");var r=t("jxt");t("./util");var i=t("./iq"),o=t("./error"),s="urn:xmpp:jingle:1",a="urn:xmpp:jingle:errors:1",u=["out-of-order","tie-break","unknown-session","unsupported-info"],c=["alternative-session","busy","cancel","connectivity-error","decline","expired","failed-application","failed-transport","general-error","gone","incompatible-parameters","media-error","security-error","success","timeout","unsupported-applications","unsupported-transports"];n.Jingle=r.define({name:"jingle",namespace:s,element:"jingle",fields:{action:r.attribute("action"),initiator:r.attribute("initiator"),responder:r.attribute("responder"),sid:r.attribute("sid")}}),n.Content=r.define({name:"_jingleContent",namespace:s,element:"content",fields:{creator:r.attribute("creator"),disposition:r.attribute("disposition","session"),name:r.attribute("name"),senders:r.attribute("senders","both"),description:{get:function(){for(var t=["_rtp"],e=0;e<t.length;e++)if(this._extensions[t[e]])return this._extensions[t[e]]},set:function(t){var e="_"+t.descType;this[e]=t}},transport:{get:function(){for(var t=["_iceUdp"],e=0;e<t.length;e++)if(this._extensions[t[e]])return this._extensions[t[e]]},set:function(t){var e="_"+t.transType;this[e]=t}}}}),n.Reason=r.define({name:"reason",namespace:s,element:"reason",fields:{condition:{get:function(){var t=this,e=[];return c.forEach(function(n){var i=r.find(t.xml,s,n);i.length&&e.push(i[0].tagName)}),e[0]||""},set:function(t){var e=this;if(c.forEach(function(t){var n=r.find(e.xml,s,t);n.length&&e.xml.removeChild(n[0])}),t){var n=document.createElementNS(s,t);this.xml.appendChild(n)}}},alternativeSession:{get:function(){return r.getSubText(this.xml,s,"alternative-session")},set:function(t){this.condition="alternative-session",r.setSubText(this.xml,s,"alternative-session",t)}},text:r.subText(s,"text")}}),r.add(o,"jingleCondition",{get:function(){var t=this,e=[];return u.forEach(function(n){var i=r.find(t.xml,a,n);i.length&&e.push(i[0].tagName)}),e[0]||""},set:function(t){var e=this;if(u.forEach(function(t){var n=r.find(e.xml,a,t);n.length&&e.xml.removeChild(n[0])}),t){var n=document.createElementNS(a,t);this.xml.appendChild(n)}}}),r.extend(i,n.Jingle),r.extend(n.Jingle,n.Content,"contents"),r.extend(n.Jingle,n.Reason)},{"./error":33,"./iq":36,"./util":55,jxt:95,underscore:113}],38:[function(t,e,n){var r=t("jxt"),i=t("./util"),o=t("./message"),s=t("./iq"),a=t("./forwarded"),u=t("./rsm"),c=t("../jid");n.MAMQuery=r.define({name:"mamQuery",namespace:"urn:xmpp:mam:tmp",element:"query",fields:{queryid:r.attribute("queryid"),start:i.dateSub("urn:xmpp:mam:tmp","start"),end:i.dateSub("urn:xmpp:mam:tmp","end"),"with":i.jidSub("urn:xmpp:mam:tmp","with")}}),n.Result=r.define({name:"mam",eventName:"mam:result",namespace:"urn:xmpp:mam:tmp",element:"result",fields:{queryid:r.attribute("queryid"),id:r.attribute("id")}}),n.Archived=r.define({name:"mamArchived",namespace:"urn:xmpp:mam:tmp",element:"archived",fields:{by:i.jidAttribute("by"),id:r.attribute("id")}}),n.Prefs=r.define({name:"mamPrefs",namespace:"urn:xmpp:mam:tmp",element:"prefs",fields:{defaultCondition:r.attribute("default"),always:{get:function(){var t=[],e=r.find(this.xml,this._NS,"always");if(0===e.length)return t;e=e[0];var n=r.getMultiSubText(e,this._NS,"jid");return n.forEach(function(e){t.push(new c(e.textContent))}),t},set:function(t){if(t.length>0){var e=r.find(this.xml,this._NS,"always");r.setMultiSubText(e,this._NS,"jid",t)}}},never:{get:function(){var t=[],e=r.find(this.xml,this._NS,"always");if(0===e.length)return t;e=e[0];var n=r.getMultiSubText(e,this._NS,"jid");return n.forEach(function(e){t.push(new c(e.textContent))}),t},set:function(t){if(t.length>0){var e=r.find(this.xml,this._NS,"never");r.setMultiSubText(e,this._NS,"jid",t)}}}}}),r.extend(o,n.Archived,"archived"),r.extend(s,n.MAMQuery),r.extend(s,n.Prefs),r.extend(o,n.Result),r.extend(n.Result,a),r.extend(n.MAMQuery,u)},{"../jid":3,"./forwarded":34,"./iq":36,"./message":39,"./rsm":46,"./util":55,jxt:95}],39:[function(t,e){t("underscore");var n=t("jxt"),r=t("./util");e.exports=n.define({name:"message",namespace:"jabber:client",element:"message",topLevel:!0,fields:{lang:r.langAttribute(),id:n.attribute("id"),to:r.jidAttribute("to"),from:r.jidAttribute("from"),type:n.attribute("type","normal"),thread:n.subText("jabber:client","thread"),parentThread:n.subAttribute("jabber:client","thread","parent"),$body:{get:function(){return n.getSubLangText(this.xml,this._NS,"body",this.lang)}},body:{get:function(){var t=this.$body;return t[this.lang]||""},set:function(t){n.setSubLangText(this.xml,this._NS,"body",t,this.lang)}},attention:n.boolSub("urn:xmpp:attention:0","attention"),replace:n.subAttribute("urn:xmpp:message-correct:0","replace","id")}})},{"./util":55,jxt:95,underscore:113}],40:[function(t,e,n){var r=t("jxt");t("./message");var i=t("./presence");t("./iq");var o="http://jabber.org/protocol/muc";n.MUCJoin=r.define({name:"joinMuc",namespace:o,element:"x",fields:{password:r.subText(o,"password"),history:{get:function(){var t={},e=r.find(this.xml,this._NS,"history");if(!e.length)return{};e=e[0];var n=e.getAttribute("maxchars")||"",i=e.getAttribute("maxstanas")||"",o=e.getAttribute("seconds")||"",s=e.getAttribute("since")||"";n&&(t.maxchars=parseInt(n,10)),i&&(t.maxstanzas=parseInt(i,10)),o&&(t.seconds=parseInt(o,10)),s&&(t.since=new Date(s))},set:function(t){var e=r.find(this.xml,this._NS,"history");if(e.length)for(var n=0;n<e.length;n++)this.xml.removeChild(e[n]);var i=document.createElementNS(this._NS,"history");this.xml.appendChild(i),t.maxchars&&i.setAttribute(""+t.maxchars),t.maxstanzas&&i.setAttribute(""+t.maxstanzas),t.seconds&&i.setAttribute(""+t.seconds),t.since&&i.setAttribute(t.since.toISOString())}}}}),r.extend(i,n.MUCJoin)},{"./iq":36,"./message":39,"./presence":41,jxt:95}],41:[function(t,e){t("underscore");var n=t("jxt"),r=t("./util");e.exports=n.define({name:"presence",namespace:"jabber:client",element:"presence",topLevel:!0,fields:{lang:r.langAttribute(),id:n.attribute("id"),to:r.jidAttribute("to"),from:r.jidAttribute("from"),priority:n.subText("jabber:client","priority","0"),show:n.subText("jabber:client","show"),type:{get:function(){return n.getAttribute(this.xml,"type","available")},set:function(t){"available"===t&&(t=!1),n.setAttribute(this.xml,"type",t)}},$status:{get:function(){return n.getSubLangText(this.xml,this._NS,"status",this.lang)}},status:{get:function(){var t=this.$status;return t[this.lang]||""},set:function(t){n.setSubLangText(this.xml,this._NS,"status",t,this.lang)}},idleSince:r.dateSubAttribute("urn:xmpp:idle:1","idle","since")}})},{"./util":55,jxt:95,underscore:113}],42:[function(t,e){var n=t("jxt"),r=t("./iq"),i=e.exports=n.define({name:"privateStorage",namespace:"jabber:iq:private",element:"query"});n.extend(r,i)},{"./iq":36,jxt:95}],43:[function(t,e,n){var r=t("underscore"),i=t("jxt"),o=t("./util"),s=t("./iq"),a=t("./message"),u=t("./dataforms").DataForm,c=t("./rsm");t("../jid");var f="http://jabber.org/protocol/pubsub",l="http://jabber.org/protocol/pubsub#owner",p="http://jabber.org/protocol/pubsub#event";n.Pubsub=i.define({name:"pubsub",namespace:"http://jabber.org/protocol/pubsub",element:"pubsub",fields:{publishOptions:{get:function(){var t=i.find(this.xml,this._NS,"publish-options");return t.length&&t[0].childNodes.length?new u({},t[0].childNodes[0]):void 0},set:function(t){var e=i.findOrCreate(this.xml,this._NS,"publish-options");if(t){var n=new u(t);e.appendChild(n.xml)}}}}}),n.PubsubOwner=i.define({name:"pubsubOwner",namespace:l,element:"pubsub",fields:{create:i.subAttribute(l,"create","node"),purge:i.subAttribute(l,"purge","node"),del:i.subAttribute(l,"delete","node"),redirect:{get:function(){var t=i.find(this.xml,this._NS,"delete");return t.length?i.getSubAttribute(t[0],this._NS,"redirect","uri"):""},set:function(t){var e=i.findOrCreate(this.xml,this._NS,"delete");i.setSubAttribute(e,this._NS,"redirect","uri",t)}}}}),n.Configure=i.define({name:"config",namespace:l,element:"configure",fields:{node:i.attribute("node")}}),n.Event=i.define({name:"event",namespace:p,element:"event"}),n.Subscribe=i.define({name:"subscribe",namespace:f,element:"subscribe",fields:{node:i.attribute("node"),jid:o.jidAttribute("jid")}}),n.Subscription=i.define({name:"subscription",namespace:f,element:"subscription",fields:{node:i.attribute("node"),jid:o.jidAttribute("jid"),subid:i.attribute("subid"),type:i.attribute("subscription")}}),n.Unsubscribe=i.define({name:"unsubscribe",namespace:f,element:"unsubscribe",fields:{node:i.attribute("node"),jid:o.jidAttribute("jid")}}),n.Publish=i.define({name:"publish",namespace:f,element:"publish",fields:{node:i.attribute("node")}}),n.Retract=i.define({name:"retract",namespace:f,element:"retract",fields:{node:i.attribute("node"),notify:i.boolAttribute("notify"),id:i.subAttribute(f,"item","id")}}),n.Retrieve=i.define({name:"retrieve",namespace:f,element:"items",fields:{node:i.attribute("node"),max:i.attribute("max_items")}}),n.Item=i.define({name:"item",namespace:f,element:"item",fields:{id:i.attribute("id")}}),n.EventItems=i.define({name:"updated",namespace:p,element:"items",fields:{node:i.attribute("node"),retracted:{get:function(){var t=[],e=i.find(this.xml,this._NS,"retract");return r.forEach(e,function(e){t.push(e.getAttribute("id"))}),t},set:function(t){var e=this;r.forEach(t,function(t){var n=document.createElementNS(e._NS,"retract");n.setAttribute("id",t),this.xml.appendChild(n)})}}}}),n.EventItem=i.define({name:"eventItem",namespace:p,element:"item",fields:{id:i.attribute("id"),node:i.attribute("node"),publisher:o.jidAttribute("publisher")}}),i.extend(n.Pubsub,n.Subscribe),i.extend(n.Pubsub,n.Unsubscribe),i.extend(n.Pubsub,n.Publish),i.extend(n.Pubsub,n.Retrieve),i.extend(n.Pubsub,n.Subscription),i.extend(n.PubsubOwner,n.Configure),i.extend(n.Publish,n.Item,"items"),i.extend(n.Retrieve,n.Item,"items"),i.extend(n.Configure,u),i.extend(n.Pubsub,c),i.extend(n.Event,n.EventItems),i.extend(n.EventItems,n.EventItem,"published"),i.extend(a,n.Event),i.extend(s,n.Pubsub),i.extend(s,n.PubsubOwner)},{"../jid":3,"./dataforms":30,"./iq":36,"./message":39,"./rsm":46,"./util":55,jxt:95,underscore:113}],44:[function(t,e){var n=t("jxt"),r=t("./message");n.add(r,"requestReceipt",n.boolSub("urn:xmpp:receipts","request"));var i=e.exports=n.define({name:"receipt",namespace:"urn:xmpp:receipts",element:"receipt",fields:{id:n.attribute("id")}});n.extend(r,i)},{"./message":39,jxt:95}],45:[function(t,e){t("underscore");var n=t("jxt"),r=t("./iq"),i=t("../jid"),o=e.exports=n.define({name:"roster",namespace:"jabber:iq:roster",element:"query",fields:{ver:{get:function(){return n.getAttribute(this.xml,"ver")},set:function(t){var e=""===t;n.setAttribute(this.xml,"ver",t,e)}},items:{get:function(){var t=this,e=n.find(this.xml,this._NS,"item");if(!e.length)return[];var r=[];return e.forEach(function(e){var o={jid:new i(n.getAttribute(e,"jid","")),name:n.getAttribute(e,"name",void 0),subscription:n.getAttribute(e,"subscription","none"),ask:n.getAttribute(e,"ask",void 0),groups:[]},s=n.find(e,t._NS,"group");s.forEach(function(t){o.groups.push(t.textContent)}),r.push(o)}),r},set:function(t){var e=this;t.forEach(function(t){var r=document.createElementNS(e._NS,"item");n.setAttribute(r,"jid",t.jid.toString()),n.setAttribute(r,"name",t.name),n.setAttribute(r,"subscription",t.subscription),n.setAttribute(r,"ask",t.ask),(t.groups||[]).forEach(function(t){var n=document.createElementNS(e._NS,"group");n.textContent=t,r.appendChild(n)}),e.xml.appendChild(r)})}}}});n.extend(r,o)},{"../jid":3,"./iq":36,jxt:95,underscore:113}],46:[function(t,e){var n=t("jxt"),r=t("./util"),i="http://jabber.org/protocol/rsm";e.exports=n.define({name:"rsm",namespace:i,element:"set",fields:{after:n.subText(i,"after"),before:{get:function(){return n.getSubText(this.xml,this._NS,"before")},set:function(t){t===!0?n.findOrCreate(this.xml,this._NS,"before"):n.setSubText(this.xml,this._NS,"before",t)}},count:r.numberSub(i,"count"),first:n.subText(i,"first"),firstIndex:n.subAttribute(i,"first","index"),index:n.subText(i,"index"),last:n.subText(i,"last"),max:n.subText(i,"max")}})},{"./util":55,jxt:95}],47:[function(t,e,n){t("underscore");var r=t("jxt");t("./util");var i=t("./jingle"),o="urn:xmpp:jingle:apps:rtp:1",s="urn:xmpp:jingle:apps:rtp:rtcp-fb:0",a="urn:xmpp:jingle:apps:rtp:rtp-hdrext:0",u="urn:xmpp:jingle:apps:rtp:info:1",c={get:function(){var t=r.find(this.xml,s,"rtcp-fb"),e=[];return t.forEach(function(t){e.push({type:r.getAttribute(t,"type"),subtype:r.getAttribute(t,"subtype")})}),t=r.find(this.xml,s,"rtcp-fb-trr-int"),t.forEach(function(t){e.push({type:r.getAttribute(t,"type"),value:r.getAttribute(t,"value")})}),e},set:function(t){var e=this,n=r.find(this.xml,s,"rtcp-fb");n.forEach(function(t){e.xml.removeChild(t)}),n=r.find(this.xml,s,"rtcp-fb-trr-int"),n.forEach(function(t){e.xml.removeChild(t)}),t.forEach(function(t){var n;"trr-int"===t.type?(n=r.createElement(s,"rtcp-fb-trr-int",o),r.setAttribute(n,"type",t.type),r.setAttribute(n,"value",t.value)):(n=r.createElement(s,"rtcp-fb",o),r.setAttribute(n,"type",t.type),r.setAttribute(n,"subtype",t.subtype)),e.xml.appendChild(n)})}};n.RTP=r.define({name:"_rtp",namespace:o,element:"description",fields:{descType:{value:"rtp"},media:r.attribute("media"),ssrc:r.attribute("ssrc"),bandwidth:r.subText(o,"bandwidth"),bandwidthType:r.subAttribute(o,"bandwidth","type"),mux:r.boolSub(o,"rtp-mux"),encryption:{get:function(){var t=r.find(this.xml,o,"encryption");if(!t.length)return[];t=t[0];var e=this,i=r.find(t,o,"crypto"),s=[];return i.forEach(function(t){s.push(new n.Crypto({},t,e).toJSON())}),s},set:function(t){var e=r.find(this.xml,o,"encryption");if(e.length&&this.xml.removeChild(e),t.length){r.setBoolSubAttribute(this.xml,o,"encryption","required",!0);var i=this;t.forEach(function(t){var e=new n.Crypto(t,null,i);i.xml.appendChild(e.xml)})}}},feedback:c,headerExtensions:{get:function(){var t=r.find(this.xml,a,"rtp-hdrext"),e=[];return t.forEach(function(t){e.push({id:r.getAttribute(t,"id"),uri:r.getAttribute(t,"uri"),senders:r.getAttribute(t,"senders")})}),e},set:function(t){var e=this,n=r.find(this.xml,a,"rtp-hdrext");n.forEach(function(t){e.xml.removeChild(t)}),t.forEach(function(t){var n=r.createElement(a,"rtp-hdrext",o);r.setAttribute(n,"id",t.id),r.setAttribute(n,"uri",t.uri),r.setAttribute(n,"senders",t.senders),e.xml.appendChild(n)})}}}}),n.PayloadType=r.define({name:"_payloadType",namespace:o,element:"payload-type",fields:{channels:r.attribute("channels"),clockrate:r.attribute("clockrate"),id:r.attribute("id"),maxptime:r.attribute("maxptime"),name:r.attribute("name"),ptime:r.attribute("ptime"),feedback:c,parameters:{get:function(){var t=[],e=r.find(this.xml,o,"parameter");return e.forEach(function(e){t.push({key:r.getAttribute(e,"name"),value:r.getAttribute(e,"value")})}),t},set:function(t){var e=this;t.forEach(function(t){var n=r.createElement(o,"parameter");r.setAttribute(n,"name",t.key),r.setAttribute(n,"value",t.value),e.xml.appendChild(n)})}}}}),n.Crypto=r.define({name:"crypto",namespace:o,element:"crypto",fields:{cipherSuite:r.attribute("cipher-suite"),keyParams:r.attribute("key-params"),sessionParams:r.attribute("session-params"),tag:r.attribute("tag")}}),n.Mute=r.define({name:"mute",namespace:u,element:"mute",fields:{creator:r.attribute("creator"),name:r.attribute("name")}}),n.Unmute=r.define({name:"unmute",namespace:u,element:"unmute",fields:{creator:r.attribute("creator"),name:r.attribute("name")}}),r.extend(i.Content,n.RTP),r.extend(n.RTP,n.PayloadType,"payloads"),r.extend(i.Jingle,n.Mute),r.extend(i.Jingle,n.Unmute),r.add(i.Jingle,"ringing",r.boolSub(u,"ringing")),r.add(i.Jingle,"hold",r.boolSub(u,"hold")),r.add(i.Jingle,"active",r.boolSub(u,"active"))},{"./jingle":37,"./util":55,jxt:95,underscore:113}],48:[function(t,e,n){t("underscore");var r=t("jxt"),i=t("./util"),o=t("./streamFeatures"),s="urn:ietf:params:xml:ns:xmpp-sasl",a=["aborted","account-disabled","credentials-expired","encryption-required","incorrect-encoding","invalid-authzid","invalid-mechanism","malformed-request","mechanism-too-weak","not-authorized","temporary-auth-failure"];n.Mechanisms=r.define({name:"sasl",namespace:s,element:"mechanisms",fields:{mechanisms:r.multiSubText(s,"mechanism")}}),n.Auth=r.define({name:"saslAuth",eventName:"sasl:auth",namespace:s,element:"auth",topLevel:!0,fields:{value:i.b64Text(),mechanism:r.attribute("mechanism")}}),n.Challenge=r.define({name:"saslChallenge",eventName:"sasl:challenge",namespace:s,element:"challenge",topLevel:!0,fields:{value:i.b64Text()}}),n.Response=r.define({name:"saslResponse",eventName:"sasl:response",namespace:s,element:"response",topLevel:!0,fields:{value:i.b64Text()}}),n.Abort=r.define({name:"saslAbort",eventName:"sasl:abort",namespace:s,element:"abort",topLevel:!0}),n.Success=r.define({name:"saslSuccess",eventName:"sasl:success",namespace:s,element:"success",topLevel:!0,fields:{value:i.b64Text()}}),n.Failure=r.define({name:"saslFailure",eventName:"sasl:failure",namespace:s,element:"failure",topLevel:!0,fields:{lang:{get:function(){return this._lang||""},set:function(t){this._lang=t}},condition:{get:function(){var t=this,e=[];return a.forEach(function(n){var i=r.find(t.xml,s,n);i.length&&e.push(i[0].tagName)}),e[0]||""},set:function(t){var e=this;if(this._CONDITIONS.forEach(function(t){var n=r.find(e.xml,s,t);n.length&&e.xml.removeChild(n[0])}),t){var n=r.createElementNS(s,t);n.setAttribute("xmlns",s),this.xml.appendChild(n)}}},$text:{get:function(){return r.getSubLangText(this.xml,s,"text",this.lang)}},text:{get:function(){var t=this.$text;return t[this.lang]||""},set:function(t){r.setSubLangText(this.xml,s,"text",t,this.lang)}}}}),r.extend(o,n.Mechanisms)},{"./streamFeatures":53,"./util":55,jxt:95,underscore:113}],49:[function(t,e){var n=t("jxt"),r=t("./iq"),i=t("./streamFeatures"),o=e.exports=n.define({name:"session",namespace:"urn:ietf:params:xml:ns:xmpp-session",element:"session"});n.extend(i,o),n.extend(r,o)},{"./iq":36,"./streamFeatures":53,jxt:95}],50:[function(t,e,n){var r=t("jxt"),i=t("./util"),o=t("./streamFeatures"),s="urn:xmpp:sm:3";n.SMFeature=r.define({name:"streamManagement",namespace:s,element:"sm"}),n.Enable=r.define({name:"smEnable",eventName:"stream:management:enable",namespace:s,element:"enable",topLevel:!0,fields:{resume:r.boolAttribute("resume")}}),n.Enabled=r.define({name:"smEnabled",eventName:"stream:management:enabled",namespace:s,element:"enabled",topLevel:!0,fields:{id:r.attribute("id"),resume:r.boolAttribute("resume")}}),n.Resume=r.define({name:"smResume",eventName:"stream:management:resume",namespace:s,element:"resume",topLevel:!0,fields:{h:i.numberAttribute("h","0"),previd:r.attribute("previd")}}),n.Resumed=r.define({name:"smResumed",eventName:"stream:management:resumed",namespace:s,element:"resumed",topLevel:!0,fields:{h:i.numberAttribute("h","0"),previd:r.attribute("previd")}}),n.Failed=r.define({name:"smFailed",eventName:"stream:management:failed",namespace:s,element:"failed",topLevel:!0}),n.Ack=r.define({name:"smAck",eventName:"stream:management:ack",namespace:s,element:"a",topLevel:!0,fields:{h:i.numberAttribute("h","0")}}),n.Request=r.define({name:"smRequest",eventName:"stream:management:request",namespace:s,element:"r",topLevel:!0}),r.extend(o,n.SMFeature)},{"./streamFeatures":53,"./util":55,jxt:95}],51:[function(t,e){var n=t("jxt"),r=t("./util");e.exports=n.define({name:"stream",namespace:"http://etherx.jabber.org/streams",element:"stream",fields:{lang:{get:function(){return this.xml.getAttributeNS(n.XML_NS,"lang")||""},set:function(t){this.xml.setAttributeNS(n.XML_NS,"lang",t)}},id:n.attribute("id"),version:n.attribute("version","1.0"),to:r.jidAttribute("to"),from:r.jidAttribute("from")}})},{"./util":55,jxt:95}],52:[function(t,e){t("underscore");var n=t("jxt"),r="urn:ietf:params:xml:ns:xmpp-streams",i=["bad-format","bad-namespace-prefix","conflict","connection-timeout","host-gone","host-unknown","improper-addressing","internal-server-error","invalid-from","invalid-namespace","invalid-xml","not-authorized","not-well-formed","policy-violation","remote-connection-failed","reset","resource-constraint","restricted-xml","see-other-host","system-shutdown","undefined-condition","unsupported-encoding","unsupported-feature","unsupported-stanza-type","unsupported-version"];e.exports=n.define({name:"streamError",namespace:"http://etherx.jabber.org/streams",element:"error",topLevel:!0,fields:{lang:{get:function(){return this._lang||""},set:function(t){this._lang=t}},condition:{get:function(){var t=this,e=[];return i.forEach(function(i){var o=n.find(t.xml,r,i);o.length&&e.push(o[0].tagName)}),e[0]||""},set:function(t){var e=this;if(this._CONDITIONS.forEach(function(t){var i=n.find(e.xml,r,t);i.length&&e.xml.removeChild(i[0])}),t){var i=n.createElementNS(r,t);i.setAttribute("xmlns",r),this.xml.appendChild(i)}}},seeOtherHost:{get:function(){return n.getSubText(this.xml,r,"see-other-host")},set:function(t){this.condition="see-other-host",n.setSubText(this.xml,r,"see-other-host",t)}},$text:{get:function(){return n.getSubLangText(this.xml,r,"text",this.lang)}},text:{get:function(){var t=this.$text;return t[this.lang]||""},set:function(t){n.setSubLangText(this.xml,r,"text",t,this.lang)}}}})},{jxt:95,underscore:113}],53:[function(t,e){var n=t("jxt"),r=e.exports=n.define({name:"streamFeatures",namespace:"http://etherx.jabber.org/streams",element:"features",topLevel:!0,fields:{features:{get:function(){return this._extensions}}}}),i=n.define({name:"rosterVersioning",namespace:"urn:xmpp:features:rosterver",element:"ver"}),o=n.define({name:"subscriptionPreApproval",namespace:"urn:xmpp:features:pre-approval",element:"sub"});n.extend(r,i),n.extend(r,o)},{jxt:95}],54:[function(t,e){var n=t("jxt"),r=t("./util"),i=t("./iq"),o=e.exports=n.define({name:"time",namespace:"urn:xmpp:time",element:"time",fields:{utc:r.dateSub("urn:xmpp:time","utc"),tzo:{get:function(){var t,e,r,i=-1,o=n.getSubText(this.xml,this._NS,"tzo");return o?("-"===o.charAt(0)&&(i=1,o=o.slice(1)),t=o.split(":"),e=parseInt(t[0],10),r=parseInt(t[1],10),(60*e+r)*i):0},set:function(t){var e,r,i="-";"number"==typeof t?(0>t&&(t=-t,i="+"),e=t/60,r=t%60,i+=(10>e?"0":"")+e+":"+(10>r?"0":"")+r):i=t,n.setSubText(this.xml,this._NS,"tzo",i)}}}});n.extend(i,o)},{"./iq":36,"./util":55,jxt:95}],55:[function(t,e,n){var r=t("jxt"),i=t("../jid"),o="http://www.w3.org/XML/1998/namespace";n.langAttribute=r.field(function(t){return t.getAttributeNS(o,"lang")||""},function(t,e){t.setAttributeNS(o,"lang",e)}),n.jidAttribute=r.field(function(t,e){return new i(r.getAttribute(t,e))},function(t,e,n){r.setAttribute(t,e,(n||"").toString())}),n.jidSub=r.field(function(t,e,n){return new i(r.getSubText(t,e,n))},function(t,e,n,i){r.setSubText(t,e,n,(i||"").toString())}),n.b64Text=r.field(function(t){return t.textContent&&"="!=t.textContent?atob(t.textContent):""},function(t,e){t.textContent=btoa(e)||"="}),n.dateAttribute=function(t,e){return{get:function(){var n=r.getAttribute(this.xml,t);return n?new Date(n):e?new Date(Date.now()):void 0},set:function(e){e&&r.setAttribute(this.xml,t,e.toISOString())}}},n.dateSub=function(t,e,n){return{get:function(){var i=r.getSubText(this.xml,t,e);return i?new Date(i):n?new Date(Date.now()):void 0},set:function(n){n&&r.setSubText(this.xml,t,e,n.toISOString())}}},n.dateSubAttribute=function(t,e,n,i){return{get:function(){var o=r.getSubAttribute(this.xml,t,e,n);return o?new Date(o):i?new Date(Date.now()):void 0},set:function(i){i&&r.setSubAttribute(this.xml,t,e,n,i.toISOString())}}},n.numberAttribute=r.field(function(t,e,n){return parseInt(r.getAttribute(t,e,n),10)},function(t,e,n){r.setAttribute(t,e,n.toString())}),n.numberSub=r.field(function(t,e,n,i){return parseInt(r.getSubText(t,e,n,i),10)},function(t,e,n,i){r.setSubText(t,e,n,i.toString())})},{"../jid":3,jxt:95}],56:[function(t,e){var n=t("jxt"),r=t("./iq"),i="jabber:iq:version",o=e.exports=n.define({name:"version",namespace:i,element:"query",fields:{name:n.subText(i,"name"),version:n.subText(i,"version"),os:n.subText(i,"os")}});n.extend(r,o)},{"./iq":36,jxt:95}],57:[function(t){var e=t("jxt"),n=t("./iq");e.add(n,"visible",e.boolSub("urn:xmpp:invisible:0","visible")),e.add(n,"invisible",e.boolSub("urn:xmpp:invisible:0","invisible"))},{"./iq":36,jxt:95}],58:[function(t,e){function n(){function t(t){var e=[n.streamStart,t,n.streamEnd].join("");return e}function e(t){for(var e=n.parser.parseFromString(t,"application/xml").childNodes,r=0;r<e.length;r++)if(1===e[r].nodeType)return e[r]}var n=this;i.call(this),n.sm=new a(n),n.sendQueue=o.queue(function(t,e){n.conn&&(n.emit("raw:outgoing",t),n.sm.track(t),"string"!=typeof t&&(t=t.toString()),n.conn.send(t)),e()},1),n.on("connected",function(){n.send(["<stream:stream",'xmlns:stream="http://etherx.jabber.org/streams"','xmlns="jabber:client"','version="'+(n.config.version||"1.0")+'"','xml:lang="'+(n.config.lang||"en")+'"','to="'+n.config.server+'">'].join(" "))}),n.on("raw:incoming",function(i){var o,a;if(i=i.trim(),i=i.replace(/^(\s*<\?.*\?>\s*)*/,""),""!==i){if(i.match(n.streamEnd))return n.disconnect();if(n.hasStream)try{o=new s({},e(t(i)))}catch(u){return n.disconnect()}else{var c=i.match(/^<(\S+:)?(\S+) /);n.streamStart=i,n.streamEnd="</"+(c[1]||"")+c[2]+">",a=!1;try{o=new s({},e(i+n.streamEnd))}catch(u){try{o=new s({},e(i)),a=!0}catch(f){return n.disconnect()}}n.hasStream=!0,n.stream=o,n.emit("stream:start",o)}r.each(o._extensions,function(t){t.lang||(t.lang=n.stream.lang),("message"===t._name||"presence"===t._name||"iq"===t._name)&&(n.sm.handle(t),n.emit("stanza",t)),n.emit(t._eventname||t._name,t),n.emit("stream:data",t),t.id&&n.emit("id:"+t.id,t)}),a&&n.emit("stream:end")}})}var r=t("underscore"),i=t("wildemitter"),o=t("async"),s=t("./stanza/stream");t("./stanza/message"),t("./stanza/presence"),t("./stanza/iq");var a=t("./sm");t("node-uuid"),n.prototype=Object.create(i.prototype,{constructor:{value:n}}),n.prototype.connect=function(t){var e=this;e.config=t,e.hasStream=!1,e.streamStart='<stream:stream xmlns:stream="http://etherx.jabber.org/streams">',e.streamEnd="</stream:stream>",e.parser=new DOMParser,e.serializer=new XMLSerializer,e.conn=new WebSocket(t.wsURL,"xmpp"),e.conn.onerror=function(t){return t.preventDefault(),e.emit("disconnected",e),!1},e.conn.onclose=function(){e.emit("disconnected",e)},e.conn.onopen=function(){e.sm.started=!1,e.emit("connected",e)},e.conn.onmessage=function(t){e.emit("raw:incoming",t.data)}},n.prototype.disconnect=function(){this.conn&&(this.hasStream&&(this.conn.send("</stream:stream>"),this.emit("raw:outgoing","</stream:stream>"),this.emit("stream:end")),this.hasStream=!1,this.conn.close(),this.stream=void 0,this.conn=void 0,this.sm.failed())},n.prototype.restart=function(){var t=this;t.hasStream=!1,t.send(["<stream:stream",'xmlns:stream="http://etherx.jabber.org/streams"','xmlns="jabber:client"','version="'+(t.config.version||"1.0")+'"','xml:lang="'+(t.config.lang||"en")+'"','to="'+t.config.server+'">'].join(" "))},n.prototype.send=function(t){this.sendQueue.push(t)},e.exports=n},{"./sm":23,"./stanza/iq":36,"./stanza/message":39,"./stanza/presence":41,"./stanza/stream":51,async:59,"node-uuid":99,underscore:113,wildemitter:114}],59:[function(e,n){var r=e("__browserify_process");!function(){function e(t){var e=!1;return function(){if(e)throw new Error("Callback was already called.");e=!0,t.apply(i,arguments)}}var i,o,s={};i=this,null!=i&&(o=i.async),s.noConflict=function(){return i.async=o,s};var a=function(t,e){if(t.forEach)return t.forEach(e);for(var n=0;n<t.length;n+=1)e(t[n],n,t)},u=function(t,e){if(t.map)return t.map(e);var n=[];return a(t,function(t,r,i){n.push(e(t,r,i))}),n},c=function(t,e,n){return t.reduce?t.reduce(e,n):(a(t,function(t,r,i){n=e(n,t,r,i)}),n)},f=function(t){if(Object.keys)return Object.keys(t);var e=[];for(var n in t)t.hasOwnProperty(n)&&e.push(n);return e};"undefined"!=typeof r&&r.nextTick?(s.nextTick=r.nextTick,s.setImmediate="undefined"!=typeof setImmediate?setImmediate:s.nextTick):"function"==typeof setImmediate?(s.nextTick=function(t){setImmediate(t)},s.setImmediate=s.nextTick):(s.nextTick=function(t){setTimeout(t,0)},s.setImmediate=s.nextTick),s.each=function(t,n,r){if(r=r||function(){},!t.length)return r();var i=0;a(t,function(o){n(o,e(function(e){e?(r(e),r=function(){}):(i+=1,i>=t.length&&r(null))}))})},s.forEach=s.each,s.eachSeries=function(t,e,n){if(n=n||function(){},!t.length)return n();var r=0,i=function(){e(t[r],function(e){e?(n(e),n=function(){}):(r+=1,r>=t.length?n(null):i())})};i()},s.forEachSeries=s.eachSeries,s.eachLimit=function(t,e,n,r){var i=l(e);i.apply(null,[t,n,r])},s.forEachLimit=s.eachLimit;var l=function(t){return function(e,n,r){if(r=r||function(){},!e.length||0>=t)return r();var i=0,o=0,s=0;!function a(){if(i>=e.length)return r();for(;t>s&&o<e.length;)o+=1,s+=1,n(e[o-1],function(t){t?(r(t),r=function(){}):(i+=1,s-=1,i>=e.length?r():a())})}()}},p=function(t){return function(){var e=Array.prototype.slice.call(arguments);return t.apply(null,[s.each].concat(e))}},h=function(t,e){return function(){var n=Array.prototype.slice.call(arguments);return e.apply(null,[l(t)].concat(n))}},d=function(t){return function(){var e=Array.prototype.slice.call(arguments);return t.apply(null,[s.eachSeries].concat(e))}},m=function(t,e,n,r){var i=[];e=u(e,function(t,e){return{index:e,value:t}}),t(e,function(t,e){n(t.value,function(n,r){i[t.index]=r,e(n)})},function(t){r(t,i)})};s.map=p(m),s.mapSeries=d(m),s.mapLimit=function(t,e,n,r){return g(e)(t,n,r)};var g=function(t){return h(t,m)};s.reduce=function(t,e,n,r){s.eachSeries(t,function(t,r){n(e,t,function(t,n){e=n,r(t)})},function(t){r(t,e)
})},s.inject=s.reduce,s.foldl=s.reduce,s.reduceRight=function(t,e,n,r){var i=u(t,function(t){return t}).reverse();s.reduce(i,e,n,r)},s.foldr=s.reduceRight;var b=function(t,e,n,r){var i=[];e=u(e,function(t,e){return{index:e,value:t}}),t(e,function(t,e){n(t.value,function(n){n&&i.push(t),e()})},function(){r(u(i.sort(function(t,e){return t.index-e.index}),function(t){return t.value}))})};s.filter=p(b),s.filterSeries=d(b),s.select=s.filter,s.selectSeries=s.filterSeries;var v=function(t,e,n,r){var i=[];e=u(e,function(t,e){return{index:e,value:t}}),t(e,function(t,e){n(t.value,function(n){n||i.push(t),e()})},function(){r(u(i.sort(function(t,e){return t.index-e.index}),function(t){return t.value}))})};s.reject=p(v),s.rejectSeries=d(v);var y=function(t,e,n,r){t(e,function(t,e){n(t,function(n){n?(r(t),r=function(){}):e()})},function(){r()})};s.detect=p(y),s.detectSeries=d(y),s.some=function(t,e,n){s.each(t,function(t,r){e(t,function(t){t&&(n(!0),n=function(){}),r()})},function(){n(!1)})},s.any=s.some,s.every=function(t,e,n){s.each(t,function(t,r){e(t,function(t){t||(n(!1),n=function(){}),r()})},function(){n(!0)})},s.all=s.every,s.sortBy=function(t,e,n){s.map(t,function(t,n){e(t,function(e,r){e?n(e):n(null,{value:t,criteria:r})})},function(t,e){if(t)return n(t);var r=function(t,e){var n=t.criteria,r=e.criteria;return r>n?-1:n>r?1:0};n(null,u(e.sort(r),function(t){return t.value}))})},s.auto=function(t,e){e=e||function(){};var n=f(t);if(!n.length)return e(null);var r={},i=[],o=function(t){i.unshift(t)},u=function(t){for(var e=0;e<i.length;e+=1)if(i[e]===t)return i.splice(e,1),void 0},l=function(){a(i.slice(0),function(t){t()})};o(function(){f(r).length===n.length&&(e(null,r),e=function(){})}),a(n,function(n){var i=t[n]instanceof Function?[t[n]]:t[n],p=function(t){var i=Array.prototype.slice.call(arguments,1);if(i.length<=1&&(i=i[0]),t){var o={};a(f(r),function(t){o[t]=r[t]}),o[n]=i,e(t,o),e=function(){}}else r[n]=i,s.setImmediate(l)},h=i.slice(0,Math.abs(i.length-1))||[],d=function(){return c(h,function(t,e){return t&&r.hasOwnProperty(e)},!0)&&!r.hasOwnProperty(n)};if(d())i[i.length-1](p,r);else{var m=function(){d()&&(u(m),i[i.length-1](p,r))};o(m)}})},s.waterfall=function(t,e){if(e=e||function(){},t.constructor!==Array){var n=new Error("First argument to waterfall must be an array of functions");return e(n)}if(!t.length)return e();var r=function(t){return function(n){if(n)e.apply(null,arguments),e=function(){};else{var i=Array.prototype.slice.call(arguments,1),o=t.next();o?i.push(r(o)):i.push(e),s.setImmediate(function(){t.apply(null,i)})}}};r(s.iterator(t))()};var x=function(t,e,n){if(n=n||function(){},e.constructor===Array)t.map(e,function(t,e){t&&t(function(t){var n=Array.prototype.slice.call(arguments,1);n.length<=1&&(n=n[0]),e.call(null,t,n)})},n);else{var r={};t.each(f(e),function(t,n){e[t](function(e){var i=Array.prototype.slice.call(arguments,1);i.length<=1&&(i=i[0]),r[t]=i,n(e)})},function(t){n(t,r)})}};s.parallel=function(t,e){x({map:s.map,each:s.each},t,e)},s.parallelLimit=function(t,e,n){x({map:g(e),each:l(e)},t,n)},s.series=function(t,e){if(e=e||function(){},t.constructor===Array)s.mapSeries(t,function(t,e){t&&t(function(t){var n=Array.prototype.slice.call(arguments,1);n.length<=1&&(n=n[0]),e.call(null,t,n)})},e);else{var n={};s.eachSeries(f(t),function(e,r){t[e](function(t){var i=Array.prototype.slice.call(arguments,1);i.length<=1&&(i=i[0]),n[e]=i,r(t)})},function(t){e(t,n)})}},s.iterator=function(t){var e=function(n){var r=function(){return t.length&&t[n].apply(null,arguments),r.next()};return r.next=function(){return n<t.length-1?e(n+1):null},r};return e(0)},s.apply=function(t){var e=Array.prototype.slice.call(arguments,1);return function(){return t.apply(null,e.concat(Array.prototype.slice.call(arguments)))}};var w=function(t,e,n,r){var i=[];t(e,function(t,e){n(t,function(t,n){i=i.concat(n||[]),e(t)})},function(t){r(t,i)})};s.concat=p(w),s.concatSeries=d(w),s.whilst=function(t,e,n){t()?e(function(r){return r?n(r):(s.whilst(t,e,n),void 0)}):n()},s.doWhilst=function(t,e,n){t(function(r){return r?n(r):(e()?s.doWhilst(t,e,n):n(),void 0)})},s.until=function(t,e,n){t()?n():e(function(r){return r?n(r):(s.until(t,e,n),void 0)})},s.doUntil=function(t,e,n){t(function(r){return r?n(r):(e()?n():s.doUntil(t,e,n),void 0)})},s.queue=function(t,n){function r(t,e,r,i){e.constructor!==Array&&(e=[e]),a(e,function(e){var o={data:e,callback:"function"==typeof i?i:null};r?t.tasks.unshift(o):t.tasks.push(o),t.saturated&&t.tasks.length===n&&t.saturated(),s.setImmediate(t.process)})}void 0===n&&(n=1);var i=0,o={tasks:[],concurrency:n,saturated:null,empty:null,drain:null,push:function(t,e){r(o,t,!1,e)},unshift:function(t,e){r(o,t,!0,e)},process:function(){if(i<o.concurrency&&o.tasks.length){var n=o.tasks.shift();o.empty&&0===o.tasks.length&&o.empty(),i+=1;var r=function(){i-=1,n.callback&&n.callback.apply(n,arguments),o.drain&&0===o.tasks.length+i&&o.drain(),o.process()},s=e(r);t(n.data,s)}},length:function(){return o.tasks.length},running:function(){return i}};return o},s.cargo=function(t,e){var n=!1,r=[],i={tasks:r,payload:e,saturated:null,empty:null,drain:null,push:function(t,n){t.constructor!==Array&&(t=[t]),a(t,function(t){r.push({data:t,callback:"function"==typeof n?n:null}),i.saturated&&r.length===e&&i.saturated()}),s.setImmediate(i.process)},process:function o(){if(!n){if(0===r.length)return i.drain&&i.drain(),void 0;var s="number"==typeof e?r.splice(0,e):r.splice(0),c=u(s,function(t){return t.data});i.empty&&i.empty(),n=!0,t(c,function(){n=!1;var t=arguments;a(s,function(e){e.callback&&e.callback.apply(null,t)}),o()})}},length:function(){return r.length},running:function(){return n}};return i};var S=function(t){return function(e){var n=Array.prototype.slice.call(arguments,1);e.apply(null,n.concat([function(e){var n=Array.prototype.slice.call(arguments,1);"undefined"!=typeof console&&(e?console.error&&console.error(e):console[t]&&a(n,function(e){console[t](e)}))}]))}};s.log=S("log"),s.dir=S("dir"),s.memoize=function(t,e){var n={},r={};e=e||function(t){return t};var i=function(){var i=Array.prototype.slice.call(arguments),o=i.pop(),s=e.apply(null,i);s in n?o.apply(null,n[s]):s in r?r[s].push(o):(r[s]=[o],t.apply(null,i.concat([function(){n[s]=arguments;var t=r[s];delete r[s];for(var e=0,i=t.length;i>e;e++)t[e].apply(null,arguments)}])))};return i.memo=n,i.unmemoized=t,i},s.unmemoize=function(t){return function(){return(t.unmemoized||t).apply(null,arguments)}},s.times=function(t,e,n){for(var r=[],i=0;t>i;i++)r.push(i);return s.map(r,e,n)},s.timesSeries=function(t,e,n){for(var r=[],i=0;t>i;i++)r.push(i);return s.mapSeries(r,e,n)},s.compose=function(){var t=Array.prototype.reverse.call(arguments);return function(){var e=this,n=Array.prototype.slice.call(arguments),r=n.pop();s.reduce(t,n,function(t,n,r){n.apply(e,t.concat([function(){var t=arguments[0],e=Array.prototype.slice.call(arguments,1);r(t,e)}]))},function(t,n){r.apply(e,[t].concat(n))})}};var E=function(t,e){var n=function(){var n=this,r=Array.prototype.slice.call(arguments),i=r.pop();return t(e,function(t,e){t.apply(n,r.concat([e]))},i)};if(arguments.length>2){var r=Array.prototype.slice.call(arguments,2);return n.apply(this,r)}return n};s.applyEach=p(E),s.applyEachSeries=d(E),s.forever=function(t,e){function n(r){if(r){if(e)return e(r);throw r}t(n)}n()},"undefined"!=typeof t&&t.amd?t([],function(){return s}):"undefined"!=typeof n&&n.exports?n.exports=s:i.async=s}()},{__browserify_process:72}],60:[function(t,e){function n(t){if(Object.keys)return Object.keys(t);var e=[];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.push(n);return e}function r(t,e){return void 0===e?""+e:"number"!=typeof e||!isNaN(e)&&isFinite(e)?"function"==typeof e||e instanceof RegExp?e.toString():e:e.toString()}function i(t,e){return"string"==typeof t?t.length<e?t:t.slice(0,e):t}function o(t,e,n,r,i){throw new g.AssertionError({message:n,actual:t,expected:e,operator:r,stackStartFunction:i})}function s(t,e){t||o(t,!0,e,"==",g.ok)}function a(t,e){if(t===e)return!0;if(d.isBuffer(t)&&d.isBuffer(e)){if(t.length!=e.length)return!1;for(var n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}return t instanceof Date&&e instanceof Date?t.getTime()===e.getTime():"object"!=typeof t&&"object"!=typeof e?t==e:f(t,e)}function u(t){return null===t||void 0===t}function c(t){return"[object Arguments]"==Object.prototype.toString.call(t)}function f(t,e){if(u(t)||u(e))return!1;if(t.prototype!==e.prototype)return!1;if(c(t))return c(e)?(t=m.call(t),e=m.call(e),a(t,e)):!1;try{var r,i,o=n(t),s=n(e)}catch(f){return!1}if(o.length!=s.length)return!1;for(o.sort(),s.sort(),i=o.length-1;i>=0;i--)if(o[i]!=s[i])return!1;for(i=o.length-1;i>=0;i--)if(r=o[i],!a(t[r],e[r]))return!1;return!0}function l(t,e){return t&&e?e instanceof RegExp?e.test(t):t instanceof e?!0:e.call({},t)===!0?!0:!1:!1}function p(t,e,n,r){var i;"string"==typeof n&&(r=n,n=null);try{e()}catch(s){i=s}if(r=(n&&n.name?" ("+n.name+").":".")+(r?" "+r:"."),t&&!i&&o("Missing expected exception"+r),!t&&l(i,n)&&o("Got unwanted exception"+r),t&&i&&n&&!l(i,n)||!t&&i)throw i}var h=t("util"),d=t("buffer").Buffer,m=Array.prototype.slice,g=e.exports=s;g.AssertionError=function(t){this.name="AssertionError",this.message=t.message,this.actual=t.actual,this.expected=t.expected,this.operator=t.operator;var e=t.stackStartFunction||o;Error.captureStackTrace&&Error.captureStackTrace(this,e)},h.inherits(g.AssertionError,Error),g.AssertionError.prototype.toString=function(){return this.message?[this.name+":",this.message].join(" "):[this.name+":",i(JSON.stringify(this.actual,r),128),this.operator,i(JSON.stringify(this.expected,r),128)].join(" ")},g.fail=o,g.ok=s,g.equal=function(t,e,n){t!=e&&o(t,e,n,"==",g.equal)},g.notEqual=function(t,e,n){t==e&&o(t,e,n,"!=",g.notEqual)},g.deepEqual=function(t,e,n){a(t,e)||o(t,e,n,"deepEqual",g.deepEqual)},g.notDeepEqual=function(t,e,n){a(t,e)&&o(t,e,n,"notDeepEqual",g.notDeepEqual)},g.strictEqual=function(t,e,n){t!==e&&o(t,e,n,"===",g.strictEqual)},g.notStrictEqual=function(t,e,n){t===e&&o(t,e,n,"!==",g.notStrictEqual)},g.throws=function(){p.apply(this,[!0].concat(m.call(arguments)))},g.doesNotThrow=function(){p.apply(this,[!1].concat(m.call(arguments)))},g.ifError=function(t){if(t)throw t}},{buffer:64,util:62}],61:[function(t,e,n){function r(t,e){if(t.indexOf)return t.indexOf(e);for(var n=0;n<t.length;n++)if(e===t[n])return n;return-1}var i=t("__browserify_process");i.EventEmitter||(i.EventEmitter=function(){});var o=n.EventEmitter=i.EventEmitter,s="function"==typeof Array.isArray?Array.isArray:function(t){return"[object Array]"===Object.prototype.toString.call(t)},a=10;o.prototype.setMaxListeners=function(t){this._events||(this._events={}),this._events.maxListeners=t},o.prototype.emit=function(t){if("error"===t&&(!this._events||!this._events.error||s(this._events.error)&&!this._events.error.length))throw arguments[1]instanceof Error?arguments[1]:new Error("Uncaught, unspecified 'error' event.");if(!this._events)return!1;var e=this._events[t];if(!e)return!1;if("function"==typeof e){switch(arguments.length){case 1:e.call(this);break;case 2:e.call(this,arguments[1]);break;case 3:e.call(this,arguments[1],arguments[2]);break;default:var n=Array.prototype.slice.call(arguments,1);e.apply(this,n)}return!0}if(s(e)){for(var n=Array.prototype.slice.call(arguments,1),r=e.slice(),i=0,o=r.length;o>i;i++)r[i].apply(this,n);return!0}return!1},o.prototype.addListener=function(t,e){if("function"!=typeof e)throw new Error("addListener only takes instances of Function");if(this._events||(this._events={}),this.emit("newListener",t,e),this._events[t])if(s(this._events[t])){if(!this._events[t].warned){var n;n=void 0!==this._events.maxListeners?this._events.maxListeners:a,n&&n>0&&this._events[t].length>n&&(this._events[t].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[t].length),console.trace())}this._events[t].push(e)}else this._events[t]=[this._events[t],e];else this._events[t]=e;return this},o.prototype.on=o.prototype.addListener,o.prototype.once=function(t,e){var n=this;return n.on(t,function r(){n.removeListener(t,r),e.apply(this,arguments)}),this},o.prototype.removeListener=function(t,e){if("function"!=typeof e)throw new Error("removeListener only takes instances of Function");if(!this._events||!this._events[t])return this;var n=this._events[t];if(s(n)){var i=r(n,e);if(0>i)return this;n.splice(i,1),0==n.length&&delete this._events[t]}else this._events[t]===e&&delete this._events[t];return this},o.prototype.removeAllListeners=function(t){return 0===arguments.length?(this._events={},this):(t&&this._events&&this._events[t]&&(this._events[t]=null),this)},o.prototype.listeners=function(t){return this._events||(this._events={}),this._events[t]||(this._events[t]=[]),s(this._events[t])||(this._events[t]=[this._events[t]]),this._events[t]},o.listenerCount=function(t,e){var n;return n=t._events&&t._events[e]?"function"==typeof t._events[e]?1:t._events[e].length:0}},{__browserify_process:72}],62:[function(t,e,n){function r(t){return Array.isArray(t)||"object"==typeof t&&"[object Array]"===Object.prototype.toString.call(t)}function i(t){"object"==typeof t&&"[object RegExp]"===Object.prototype.toString.call(t)}function o(t){return"object"==typeof t&&"[object Date]"===Object.prototype.toString.call(t)}t("events"),n.isArray=r,n.isDate=function(t){return"[object Date]"===Object.prototype.toString.call(t)},n.isRegExp=function(t){return"[object RegExp]"===Object.prototype.toString.call(t)},n.print=function(){},n.puts=function(){},n.debug=function(){},n.inspect=function(t,e,u,c){function f(t,u){if(t&&"function"==typeof t.inspect&&t!==n&&(!t.constructor||t.constructor.prototype!==t))return t.inspect(u);switch(typeof t){case"undefined":return p("undefined","undefined");case"string":var c="'"+JSON.stringify(t).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return p(c,"string");case"number":return p(""+t,"number");case"boolean":return p(""+t,"boolean")}if(null===t)return p("null","null");var h=s(t),d=e?a(t):h;if("function"==typeof t&&0===d.length){if(i(t))return p(""+t,"regexp");var m=t.name?": "+t.name:"";return p("[Function"+m+"]","special")}if(o(t)&&0===d.length)return p(t.toUTCString(),"date");var g,b,v;if(r(t)?(b="Array",v=["[","]"]):(b="Object",v=["{","}"]),"function"==typeof t){var y=t.name?": "+t.name:"";g=i(t)?" "+t:" [Function"+y+"]"}else g="";if(o(t)&&(g=" "+t.toUTCString()),0===d.length)return v[0]+g+v[1];if(0>u)return i(t)?p(""+t,"regexp"):p("[Object]","special");l.push(t);var x=d.map(function(e){var n,i;if(t.__lookupGetter__&&(t.__lookupGetter__(e)?i=t.__lookupSetter__(e)?p("[Getter/Setter]","special"):p("[Getter]","special"):t.__lookupSetter__(e)&&(i=p("[Setter]","special"))),h.indexOf(e)<0&&(n="["+e+"]"),i||(l.indexOf(t[e])<0?(i=null===u?f(t[e]):f(t[e],u-1),i.indexOf("\n")>-1&&(i=r(t)?i.split("\n").map(function(t){return"  "+t}).join("\n").substr(2):"\n"+i.split("\n").map(function(t){return"   "+t}).join("\n"))):i=p("[Circular]","special")),"undefined"==typeof n){if("Array"===b&&e.match(/^\d+$/))return i;n=JSON.stringify(""+e),n.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(n=n.substr(1,n.length-2),n=p(n,"name")):(n=n.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),n=p(n,"string"))}return n+": "+i});l.pop();var w=0,S=x.reduce(function(t,e){return w++,e.indexOf("\n")>=0&&w++,t+e.length+1},0);return x=S>50?v[0]+(""===g?"":g+"\n ")+" "+x.join(",\n  ")+" "+v[1]:v[0]+g+" "+x.join(", ")+" "+v[1]}var l=[],p=function(t,e){var n={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},r={special:"cyan",number:"blue","boolean":"yellow",undefined:"grey","null":"bold",string:"green",date:"magenta",regexp:"red"}[e];return r?"["+n[r][0]+"m"+t+"["+n[r][1]+"m":t};return c||(p=function(t){return t}),f(t,"undefined"==typeof u?2:u)},n.log=function(){},n.pump=null;var s=Object.keys||function(t){var e=[];for(var n in t)e.push(n);return e},a=Object.getOwnPropertyNames||function(t){var e=[];for(var n in t)Object.hasOwnProperty.call(t,n)&&e.push(n);return e},u=Object.create||function(t,e){var n;if(null===t)n={__proto__:null};else{if("object"!=typeof t)throw new TypeError("typeof prototype["+typeof t+"] != 'object'");var r=function(){};r.prototype=t,n=new r,n.__proto__=t}return"undefined"!=typeof e&&Object.defineProperties&&Object.defineProperties(n,e),n};n.inherits=function(t,e){t.super_=e,t.prototype=u(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}})};var c=/%[sdj%]/g;n.format=function(t){if("string"!=typeof t){for(var e=[],r=0;r<arguments.length;r++)e.push(n.inspect(arguments[r]));return e.join(" ")}for(var r=1,i=arguments,o=i.length,s=String(t).replace(c,function(t){if("%%"===t)return"%";if(r>=o)return t;switch(t){case"%s":return String(i[r++]);case"%d":return Number(i[r++]);case"%j":return JSON.stringify(i[r++]);default:return t}}),a=i[r];o>r;a=i[++r])s+=null===a||"object"!=typeof a?" "+a:" "+n.inspect(a);return s}},{events:61}],63:[function(t,e,n){n.readIEEE754=function(t,e,n,r,i){var o,s,a=8*i-r-1,u=(1<<a)-1,c=u>>1,f=-7,l=n?0:i-1,p=n?1:-1,h=t[e+l];for(l+=p,o=h&(1<<-f)-1,h>>=-f,f+=a;f>0;o=256*o+t[e+l],l+=p,f-=8);for(s=o&(1<<-f)-1,o>>=-f,f+=r;f>0;s=256*s+t[e+l],l+=p,f-=8);if(0===o)o=1-c;else{if(o===u)return s?0/0:1/0*(h?-1:1);s+=Math.pow(2,r),o-=c}return(h?-1:1)*s*Math.pow(2,o-r)},n.writeIEEE754=function(t,e,n,r,i,o){var s,a,u,c=8*o-i-1,f=(1<<c)-1,l=f>>1,p=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,h=r?o-1:0,d=r?-1:1,m=0>e||0===e&&0>1/e?1:0;for(e=Math.abs(e),isNaN(e)||1/0===e?(a=isNaN(e)?1:0,s=f):(s=Math.floor(Math.log(e)/Math.LN2),e*(u=Math.pow(2,-s))<1&&(s--,u*=2),e+=s+l>=1?p/u:p*Math.pow(2,1-l),e*u>=2&&(s++,u/=2),s+l>=f?(a=0,s=f):s+l>=1?(a=(e*u-1)*Math.pow(2,i),s+=l):(a=e*Math.pow(2,l-1)*Math.pow(2,i),s=0));i>=8;t[n+h]=255&a,h+=d,a/=256,i-=8);for(s=s<<i|a,c+=i;c>0;t[n+h]=255&s,h+=d,s/=256,c-=8);t[n+h-d]|=128*m}},{}],64:[function(t,e,n){function r(t,e,n){if(!(this instanceof r))return new r(t,e,n);this.parent=this,this.offset=0;var o;if("number"==typeof n)this.length=i(e),this.offset=n;else{switch(o=typeof t){case"number":this.length=i(t);break;case"string":this.length=r.byteLength(t,e);break;case"object":this.length=i(t.length);break;default:throw new Error("First argument needs to be a number, array or string.")}if(s(t))for(var a=0;a<this.length;a++)this[a]=t instanceof r?t.readUInt8(a):t[a];else if("string"==o)this.length=this.write(t,0,e);else if("number"===o)for(var a=0;a<this.length;a++)this[a]=0}}function i(t){return t=~~Math.ceil(+t),0>t?0:t}function o(t){return(Array.isArray||function(t){return"[object Array]"=={}.toString.apply(t)})(t)}function s(t){return o(t)||r.isBuffer(t)||t&&"object"==typeof t&&"number"==typeof t.length}function a(t){return 16>t?"0"+t.toString(16):t.toString(16)}function u(t){for(var e=[],n=0;n<t.length;n++)if(t.charCodeAt(n)<=127)e.push(t.charCodeAt(n));else for(var r=encodeURIComponent(t.charAt(n)).substr(1).split("%"),i=0;i<r.length;i++)e.push(parseInt(r[i],16));return e}function c(t){for(var e=[],n=0;n<t.length;n++)e.push(255&t.charCodeAt(n));return e}function f(e){return t("base64-js").toByteArray(e)}function l(t,e,n,r){for(var i=0;r>i&&!(i+n>=e.length||i>=t.length);)e[i+n]=t[i],i++;return i}function p(t){try{return decodeURIComponent(t)}catch(e){return String.fromCharCode(65533)}}function h(t,e,n,r){var i=0;return r||(I.ok("boolean"==typeof n,"missing or invalid endian"),I.ok(void 0!==e&&null!==e,"missing offset"),I.ok(e+1<t.length,"Trying to read beyond buffer length")),e>=t.length?0:(n?(i=t[e]<<8,e+1<t.length&&(i|=t[e+1])):(i=t[e],e+1<t.length&&(i|=t[e+1]<<8)),i)}function d(t,e,n,r){var i=0;return r||(I.ok("boolean"==typeof n,"missing or invalid endian"),I.ok(void 0!==e&&null!==e,"missing offset"),I.ok(e+3<t.length,"Trying to read beyond buffer length")),e>=t.length?0:(n?(e+1<t.length&&(i=t[e+1]<<16),e+2<t.length&&(i|=t[e+2]<<8),e+3<t.length&&(i|=t[e+3]),i+=t[e]<<24>>>0):(e+2<t.length&&(i=t[e+2]<<16),e+1<t.length&&(i|=t[e+1]<<8),i|=t[e],e+3<t.length&&(i+=t[e+3]<<24>>>0)),i)}function m(t,e,n,r){var i,o;return r||(I.ok("boolean"==typeof n,"missing or invalid endian"),I.ok(void 0!==e&&null!==e,"missing offset"),I.ok(e+1<t.length,"Trying to read beyond buffer length")),o=h(t,e,n,r),i=32768&o,i?-1*(65535-o+1):o}function g(t,e,n,r){var i,o;return r||(I.ok("boolean"==typeof n,"missing or invalid endian"),I.ok(void 0!==e&&null!==e,"missing offset"),I.ok(e+3<t.length,"Trying to read beyond buffer length")),o=d(t,e,n,r),i=2147483648&o,i?-1*(4294967295-o+1):o}function b(e,n,r,i){return i||(I.ok("boolean"==typeof r,"missing or invalid endian"),I.ok(n+3<e.length,"Trying to read beyond buffer length")),t("./buffer_ieee754").readIEEE754(e,n,r,23,4)}function v(e,n,r,i){return i||(I.ok("boolean"==typeof r,"missing or invalid endian"),I.ok(n+7<e.length,"Trying to read beyond buffer length")),t("./buffer_ieee754").readIEEE754(e,n,r,52,8)}function y(t,e){I.ok("number"==typeof t,"cannot write a non-number as a number"),I.ok(t>=0,"specified a negative value for writing an unsigned value"),I.ok(e>=t,"value is larger than maximum value for type"),I.ok(Math.floor(t)===t,"value has a fractional component")}function x(t,e,n,r,i){i||(I.ok(void 0!==e&&null!==e,"missing value"),I.ok("boolean"==typeof r,"missing or invalid endian"),I.ok(void 0!==n&&null!==n,"missing offset"),I.ok(n+1<t.length,"trying to write beyond buffer length"),y(e,65535));for(var o=0;o<Math.min(t.length-n,2);o++)t[n+o]=(e&255<<8*(r?1-o:o))>>>8*(r?1-o:o)}function w(t,e,n,r,i){i||(I.ok(void 0!==e&&null!==e,"missing value"),I.ok("boolean"==typeof r,"missing or invalid endian"),I.ok(void 0!==n&&null!==n,"missing offset"),I.ok(n+3<t.length,"trying to write beyond buffer length"),y(e,4294967295));for(var o=0;o<Math.min(t.length-n,4);o++)t[n+o]=255&e>>>8*(r?3-o:o)}function S(t,e,n){I.ok("number"==typeof t,"cannot write a non-number as a number"),I.ok(e>=t,"value larger than maximum allowed value"),I.ok(t>=n,"value smaller than minimum allowed value"),I.ok(Math.floor(t)===t,"value has a fractional component")}function E(t,e,n){I.ok("number"==typeof t,"cannot write a non-number as a number"),I.ok(e>=t,"value larger than maximum allowed value"),I.ok(t>=n,"value smaller than minimum allowed value")}function _(t,e,n,r,i){i||(I.ok(void 0!==e&&null!==e,"missing value"),I.ok("boolean"==typeof r,"missing or invalid endian"),I.ok(void 0!==n&&null!==n,"missing offset"),I.ok(n+1<t.length,"Trying to write beyond buffer length"),S(e,32767,-32768)),e>=0?x(t,e,n,r,i):x(t,65535+e+1,n,r,i)}function j(t,e,n,r,i){i||(I.ok(void 0!==e&&null!==e,"missing value"),I.ok("boolean"==typeof r,"missing or invalid endian"),I.ok(void 0!==n&&null!==n,"missing offset"),I.ok(n+3<t.length,"Trying to write beyond buffer length"),S(e,2147483647,-2147483648)),e>=0?w(t,e,n,r,i):w(t,4294967295+e+1,n,r,i)}function k(e,n,r,i,o){o||(I.ok(void 0!==n&&null!==n,"missing value"),I.ok("boolean"==typeof i,"missing or invalid endian"),I.ok(void 0!==r&&null!==r,"missing offset"),I.ok(r+3<e.length,"Trying to write beyond buffer length"),E(n,3.4028234663852886e38,-3.4028234663852886e38)),t("./buffer_ieee754").writeIEEE754(e,n,r,i,23,4)}function A(e,n,r,i,o){o||(I.ok(void 0!==n&&null!==n,"missing value"),I.ok("boolean"==typeof i,"missing or invalid endian"),I.ok(void 0!==r&&null!==r,"missing offset"),I.ok(r+7<e.length,"Trying to write beyond buffer length"),E(n,1.7976931348623157e308,-1.7976931348623157e308)),t("./buffer_ieee754").writeIEEE754(e,n,r,i,52,8)}var I=t("assert");n.Buffer=r,n.SlowBuffer=r,r.poolSize=8192,n.INSPECT_MAX_BYTES=50,r.prototype.get=function(t){if(0>t||t>=this.length)throw new Error("oob");return this[t]},r.prototype.set=function(t,e){if(0>t||t>=this.length)throw new Error("oob");return this[t]=e},r.byteLength=function(t,e){switch(e||"utf8"){case"hex":return t.length/2;case"utf8":case"utf-8":return u(t).length;case"ascii":case"binary":return t.length;case"base64":return f(t).length;default:throw new Error("Unknown encoding")}},r.prototype.utf8Write=function(t,e,n){return r._charsWritten=l(u(t),this,e,n)},r.prototype.asciiWrite=function(t,e,n){return r._charsWritten=l(c(t),this,e,n)},r.prototype.binaryWrite=r.prototype.asciiWrite,r.prototype.base64Write=function(t,e,n){return r._charsWritten=l(f(t),this,e,n)},r.prototype.base64Slice=function(){var e=Array.prototype.slice.apply(this,arguments);return t("base64-js").fromByteArray(e)},r.prototype.utf8Slice=function(){for(var t=Array.prototype.slice.apply(this,arguments),e="",n="",r=0;r<t.length;)t[r]<=127?(e+=p(n)+String.fromCharCode(t[r]),n=""):n+="%"+t[r].toString(16),r++;return e+p(n)},r.prototype.asciiSlice=function(){for(var t=Array.prototype.slice.apply(this,arguments),e="",n=0;n<t.length;n++)e+=String.fromCharCode(t[n]);return e},r.prototype.binarySlice=r.prototype.asciiSlice,r.prototype.inspect=function(){for(var t=[],e=this.length,r=0;e>r;r++)if(t[r]=a(this[r]),r==n.INSPECT_MAX_BYTES){t[r+1]="...";break}return"<Buffer "+t.join(" ")+">"},r.prototype.hexSlice=function(t,e){var n=this.length;(!t||0>t)&&(t=0),(!e||0>e||e>n)&&(e=n);for(var r="",i=t;e>i;i++)r+=a(this[i]);return r},r.prototype.toString=function(t,e,n){if(t=String(t||"utf8").toLowerCase(),e=+e||0,"undefined"==typeof n&&(n=this.length),+n==e)return"";switch(t){case"hex":return this.hexSlice(e,n);case"utf8":case"utf-8":return this.utf8Slice(e,n);case"ascii":return this.asciiSlice(e,n);case"binary":return this.binarySlice(e,n);case"base64":return this.base64Slice(e,n);case"ucs2":case"ucs-2":return this.ucs2Slice(e,n);default:throw new Error("Unknown encoding")}},r.prototype.hexWrite=function(t,e,n){e=+e||0;var i=this.length-e;n?(n=+n,n>i&&(n=i)):n=i;var o=t.length;if(o%2)throw new Error("Invalid hex string");n>o/2&&(n=o/2);for(var s=0;n>s;s++){var a=parseInt(t.substr(2*s,2),16);if(isNaN(a))throw new Error("Invalid hex string");this[e+s]=a}return r._charsWritten=2*s,s},r.prototype.write=function(t,e,n,r){if(isFinite(e))isFinite(n)||(r=n,n=void 0);else{var i=r;r=e,e=n,n=i}e=+e||0;var o=this.length-e;switch(n?(n=+n,n>o&&(n=o)):n=o,r=String(r||"utf8").toLowerCase()){case"hex":return this.hexWrite(t,e,n);case"utf8":case"utf-8":return this.utf8Write(t,e,n);case"ascii":return this.asciiWrite(t,e,n);case"binary":return this.binaryWrite(t,e,n);case"base64":return this.base64Write(t,e,n);case"ucs2":case"ucs-2":return this.ucs2Write(t,e,n);default:throw new Error("Unknown encoding")}},r.prototype.slice=function(t,e){if(void 0===e&&(e=this.length),e>this.length)throw new Error("oob");if(t>e)throw new Error("oob");return new r(this,e-t,+t)},r.prototype.copy=function(t,e,n,r){var i=this;if(n||(n=0),(void 0===r||isNaN(r))&&(r=this.length),e||(e=0),n>r)throw new Error("sourceEnd < sourceStart");if(r===n)return 0;if(0==t.length||0==i.length)return 0;if(0>e||e>=t.length)throw new Error("targetStart out of bounds");if(0>n||n>=i.length)throw new Error("sourceStart out of bounds");if(0>r||r>i.length)throw new Error("sourceEnd out of bounds");r>this.length&&(r=this.length),t.length-e<r-n&&(r=t.length-e+n);for(var o=[],s=n;r>s;s++)I.ok("undefined"!=typeof this[s],"copying undefined buffer bytes!"),o.push(this[s]);for(var s=e;s<e+o.length;s++)t[s]=o[s-e]},r.prototype.fill=function(t,e,n){if(t||(t=0),e||(e=0),n||(n=this.length),"string"==typeof t&&(t=t.charCodeAt(0)),"number"!=typeof t||isNaN(t))throw new Error("value is not a number");if(e>n)throw new Error("end < start");if(n===e)return 0;if(0==this.length)return 0;if(0>e||e>=this.length)throw new Error("start out of bounds");if(0>n||n>this.length)throw new Error("end out of bounds");for(var r=e;n>r;r++)this[r]=t},r.isBuffer=function(t){return t instanceof r||t instanceof r},r.concat=function(t,e){if(!o(t))throw new Error("Usage: Buffer.concat(list, [totalLength])\n       list should be an Array.");if(0===t.length)return new r(0);if(1===t.length)return t[0];if("number"!=typeof e){e=0;for(var n=0;n<t.length;n++){var i=t[n];e+=i.length}}for(var s=new r(e),a=0,n=0;n<t.length;n++){var i=t[n];i.copy(s,a),a+=i.length}return s},r.prototype.readUInt8=function(t,e){var n=this;return e||(I.ok(void 0!==t&&null!==t,"missing offset"),I.ok(t<n.length,"Trying to read beyond buffer length")),t>=n.length?void 0:n[t]},r.prototype.readUInt16LE=function(t,e){return h(this,t,!1,e)},r.prototype.readUInt16BE=function(t,e){return h(this,t,!0,e)},r.prototype.readUInt32LE=function(t,e){return d(this,t,!1,e)},r.prototype.readUInt32BE=function(t,e){return d(this,t,!0,e)},r.prototype.readInt8=function(t,e){var n,r=this;return e||(I.ok(void 0!==t&&null!==t,"missing offset"),I.ok(t<r.length,"Trying to read beyond buffer length")),t>=r.length?void 0:(n=128&r[t],n?-1*(255-r[t]+1):r[t])},r.prototype.readInt16LE=function(t,e){return m(this,t,!1,e)},r.prototype.readInt16BE=function(t,e){return m(this,t,!0,e)},r.prototype.readInt32LE=function(t,e){return g(this,t,!1,e)},r.prototype.readInt32BE=function(t,e){return g(this,t,!0,e)},r.prototype.readFloatLE=function(t,e){return b(this,t,!1,e)},r.prototype.readFloatBE=function(t,e){return b(this,t,!0,e)},r.prototype.readDoubleLE=function(t,e){return v(this,t,!1,e)},r.prototype.readDoubleBE=function(t,e){return v(this,t,!0,e)},r.prototype.writeUInt8=function(t,e,n){var r=this;n||(I.ok(void 0!==t&&null!==t,"missing value"),I.ok(void 0!==e&&null!==e,"missing offset"),I.ok(e<r.length,"trying to write beyond buffer length"),y(t,255)),e<r.length&&(r[e]=t)},r.prototype.writeUInt16LE=function(t,e,n){x(this,t,e,!1,n)},r.prototype.writeUInt16BE=function(t,e,n){x(this,t,e,!0,n)},r.prototype.writeUInt32LE=function(t,e,n){w(this,t,e,!1,n)},r.prototype.writeUInt32BE=function(t,e,n){w(this,t,e,!0,n)},r.prototype.writeInt8=function(t,e,n){var r=this;n||(I.ok(void 0!==t&&null!==t,"missing value"),I.ok(void 0!==e&&null!==e,"missing offset"),I.ok(e<r.length,"Trying to write beyond buffer length"),S(t,127,-128)),t>=0?r.writeUInt8(t,e,n):r.writeUInt8(255+t+1,e,n)},r.prototype.writeInt16LE=function(t,e,n){_(this,t,e,!1,n)},r.prototype.writeInt16BE=function(t,e,n){_(this,t,e,!0,n)},r.prototype.writeInt32LE=function(t,e,n){j(this,t,e,!1,n)},r.prototype.writeInt32BE=function(t,e,n){j(this,t,e,!0,n)},r.prototype.writeFloatLE=function(t,e,n){k(this,t,e,!1,n)},r.prototype.writeFloatBE=function(t,e,n){k(this,t,e,!0,n)},r.prototype.writeDoubleLE=function(t,e,n){A(this,t,e,!1,n)},r.prototype.writeDoubleBE=function(t,e,n){A(this,t,e,!0,n)}},{"./buffer_ieee754":63,assert:60,"base64-js":65}],65:[function(t,e){!function(){"use strict";function t(t){var e,n,i,o,s,a;if(t.length%4>0)throw"Invalid string. Length must be a multiple of 4";for(s=t.indexOf("="),s=s>0?t.length-s:0,a=[],i=s>0?t.length-4:t.length,e=0,n=0;i>e;e+=4,n+=3)o=r.indexOf(t[e])<<18|r.indexOf(t[e+1])<<12|r.indexOf(t[e+2])<<6|r.indexOf(t[e+3]),a.push((16711680&o)>>16),a.push((65280&o)>>8),a.push(255&o);return 2===s?(o=r.indexOf(t[e])<<2|r.indexOf(t[e+1])>>4,a.push(255&o)):1===s&&(o=r.indexOf(t[e])<<10|r.indexOf(t[e+1])<<4|r.indexOf(t[e+2])>>2,a.push(255&o>>8),a.push(255&o)),a}function n(t){function e(t){return r[63&t>>18]+r[63&t>>12]+r[63&t>>6]+r[63&t]}var n,i,o,s=t.length%3,a="";for(n=0,o=t.length-s;o>n;n+=3)i=(t[n]<<16)+(t[n+1]<<8)+t[n+2],a+=e(i);switch(s){case 1:i=t[t.length-1],a+=r[i>>2],a+=r[63&i<<4],a+="==";break;case 2:i=(t[t.length-2]<<8)+t[t.length-1],a+=r[i>>10],a+=r[63&i>>4],a+=r[63&i<<2],a+="="}return a}var r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";e.exports.toByteArray=t,e.exports.fromByteArray=n}()},{}],66:[function(t,e,n){function r(){var t=[].slice.call(arguments).join(" ");throw new Error([t,"we accept pull requests","http://github.com/dominictarr/crypto-browserify"].join("\n"))}function i(t,e){for(var n in t)e(t[n],n)}var o=t("buffer").Buffer,s=t("./sha"),a=t("./sha256"),u=t("./rng"),c=t("./md5"),f={sha1:{hex:s.hex_sha1,base64:s.b64_sha1,binary:s.str_sha1},sha256:{hex:a.hex_sha256,base64:a.b64_sha256,binary:a.str_sha256},md5:{hex:c.hex_md5,base64:c.b64_md5,binary:c.bin_md5}},l={sha1:{hex:s.hex_hmac_sha1,base64:s.b64_hmac_sha1,binary:s.str_hmac_sha1},sha256:{hex:a.hex_hmac_sha256,base64:a.b64_hmac_sha256,binary:a.str_hmac_sha256},md5:{hex:c.hex_hmac_md5,base64:c.b64_hmac_md5,binary:c.bin_hmac_md5}};
n.createHash=function(t){t=t||"sha1",f[t]||r("algorithm:",t,"is not yet supported");var e="",n=f[t];return{update:function(t){return e+=t,this},digest:function(i){i=i||"binary";var o;(o=n[i])||r("encoding:",i,"is not yet supported for algorithm",t);var s=o(e);return e=null,s}}},n.createHmac=function(t,e){l[t]||r("algorithm:",t,"is not yet supported"),"string"!=typeof e&&(e=e.toString("binary"));var n="",i=l[t];return{update:function(t){return n+=t,this},digest:function(o){o=o||"binary";var s;(s=i[o])||r("encoding:",o,"is not yet support for algorithm",t);var a=s(e,n);return n=null,a}}},n.randomBytes=function(t,e){if(!e||!e.call)return new o(u(t));try{e.call(this,void 0,new o(u(t)))}catch(n){e(n)}},i(["createCredentials","createCipher","createCipheriv","createDecipher","createDecipheriv","createSign","createVerify","createDiffieHellman","pbkdf2"],function(t){n[t]=function(){r("sorry,",t,"is not implemented yet")}})},{"./md5":67,"./rng":68,"./sha":69,"./sha256":70,buffer:64}],67:[function(t,e,n){function r(t){return x(c(v(t),t.length*_))}function i(t){return w(c(v(t),t.length*_))}function o(t){return y(c(v(t),t.length*_))}function s(t,e){return x(m(t,e))}function a(t,e){return w(m(t,e))}function u(t,e){return y(m(t,e))}function c(t,e){t[e>>5]|=128<<e%32,t[(e+64>>>9<<4)+14]=e;for(var n=1732584193,r=-271733879,i=-1732584194,o=271733878,s=0;s<t.length;s+=16){var a=n,u=r,c=i,f=o;n=l(n,r,i,o,t[s+0],7,-680876936),o=l(o,n,r,i,t[s+1],12,-389564586),i=l(i,o,n,r,t[s+2],17,606105819),r=l(r,i,o,n,t[s+3],22,-1044525330),n=l(n,r,i,o,t[s+4],7,-176418897),o=l(o,n,r,i,t[s+5],12,1200080426),i=l(i,o,n,r,t[s+6],17,-1473231341),r=l(r,i,o,n,t[s+7],22,-45705983),n=l(n,r,i,o,t[s+8],7,1770035416),o=l(o,n,r,i,t[s+9],12,-1958414417),i=l(i,o,n,r,t[s+10],17,-42063),r=l(r,i,o,n,t[s+11],22,-1990404162),n=l(n,r,i,o,t[s+12],7,1804603682),o=l(o,n,r,i,t[s+13],12,-40341101),i=l(i,o,n,r,t[s+14],17,-1502002290),r=l(r,i,o,n,t[s+15],22,1236535329),n=p(n,r,i,o,t[s+1],5,-165796510),o=p(o,n,r,i,t[s+6],9,-1069501632),i=p(i,o,n,r,t[s+11],14,643717713),r=p(r,i,o,n,t[s+0],20,-373897302),n=p(n,r,i,o,t[s+5],5,-701558691),o=p(o,n,r,i,t[s+10],9,38016083),i=p(i,o,n,r,t[s+15],14,-660478335),r=p(r,i,o,n,t[s+4],20,-405537848),n=p(n,r,i,o,t[s+9],5,568446438),o=p(o,n,r,i,t[s+14],9,-1019803690),i=p(i,o,n,r,t[s+3],14,-187363961),r=p(r,i,o,n,t[s+8],20,1163531501),n=p(n,r,i,o,t[s+13],5,-1444681467),o=p(o,n,r,i,t[s+2],9,-51403784),i=p(i,o,n,r,t[s+7],14,1735328473),r=p(r,i,o,n,t[s+12],20,-1926607734),n=h(n,r,i,o,t[s+5],4,-378558),o=h(o,n,r,i,t[s+8],11,-2022574463),i=h(i,o,n,r,t[s+11],16,1839030562),r=h(r,i,o,n,t[s+14],23,-35309556),n=h(n,r,i,o,t[s+1],4,-1530992060),o=h(o,n,r,i,t[s+4],11,1272893353),i=h(i,o,n,r,t[s+7],16,-155497632),r=h(r,i,o,n,t[s+10],23,-1094730640),n=h(n,r,i,o,t[s+13],4,681279174),o=h(o,n,r,i,t[s+0],11,-358537222),i=h(i,o,n,r,t[s+3],16,-722521979),r=h(r,i,o,n,t[s+6],23,76029189),n=h(n,r,i,o,t[s+9],4,-640364487),o=h(o,n,r,i,t[s+12],11,-421815835),i=h(i,o,n,r,t[s+15],16,530742520),r=h(r,i,o,n,t[s+2],23,-995338651),n=d(n,r,i,o,t[s+0],6,-198630844),o=d(o,n,r,i,t[s+7],10,1126891415),i=d(i,o,n,r,t[s+14],15,-1416354905),r=d(r,i,o,n,t[s+5],21,-57434055),n=d(n,r,i,o,t[s+12],6,1700485571),o=d(o,n,r,i,t[s+3],10,-1894986606),i=d(i,o,n,r,t[s+10],15,-1051523),r=d(r,i,o,n,t[s+1],21,-2054922799),n=d(n,r,i,o,t[s+8],6,1873313359),o=d(o,n,r,i,t[s+15],10,-30611744),i=d(i,o,n,r,t[s+6],15,-1560198380),r=d(r,i,o,n,t[s+13],21,1309151649),n=d(n,r,i,o,t[s+4],6,-145523070),o=d(o,n,r,i,t[s+11],10,-1120210379),i=d(i,o,n,r,t[s+2],15,718787259),r=d(r,i,o,n,t[s+9],21,-343485551),n=g(n,a),r=g(r,u),i=g(i,c),o=g(o,f)}return Array(n,r,i,o)}function f(t,e,n,r,i,o){return g(b(g(g(e,t),g(r,o)),i),n)}function l(t,e,n,r,i,o,s){return f(e&n|~e&r,t,e,i,o,s)}function p(t,e,n,r,i,o,s){return f(e&r|n&~r,t,e,i,o,s)}function h(t,e,n,r,i,o,s){return f(e^n^r,t,e,i,o,s)}function d(t,e,n,r,i,o,s){return f(n^(e|~r),t,e,i,o,s)}function m(t,e){var n=v(t);n.length>16&&(n=c(n,t.length*_));for(var r=Array(16),i=Array(16),o=0;16>o;o++)r[o]=909522486^n[o],i[o]=1549556828^n[o];var s=c(r.concat(v(e)),512+e.length*_);return c(i.concat(s),640)}function g(t,e){var n=(65535&t)+(65535&e),r=(t>>16)+(e>>16)+(n>>16);return r<<16|65535&n}function b(t,e){return t<<e|t>>>32-e}function v(t){for(var e=Array(),n=(1<<_)-1,r=0;r<t.length*_;r+=_)e[r>>5]|=(t.charCodeAt(r/_)&n)<<r%32;return e}function y(t){for(var e="",n=(1<<_)-1,r=0;r<32*t.length;r+=_)e+=String.fromCharCode(t[r>>5]>>>r%32&n);return e}function x(t){for(var e=S?"0123456789ABCDEF":"0123456789abcdef",n="",r=0;r<4*t.length;r++)n+=e.charAt(15&t[r>>2]>>8*(r%4)+4)+e.charAt(15&t[r>>2]>>8*(r%4));return n}function w(t){for(var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",n="",r=0;r<4*t.length;r+=3)for(var i=(255&t[r>>2]>>8*(r%4))<<16|(255&t[r+1>>2]>>8*((r+1)%4))<<8|255&t[r+2>>2]>>8*((r+2)%4),o=0;4>o;o++)n+=8*r+6*o>32*t.length?E:e.charAt(63&i>>6*(3-o));return n}var S=0,E="=",_=8;n.hex_md5=r,n.b64_md5=i,n.bin_md5=o,n.hex_hmac_md5=s,n.b64_hmac_md5=a,n.bin_hmac_md5=u},{}],68:[function(t,e){!function(){var t,n,r=this;if(t=function(t){for(var e,e,n=new Array(t),r=0;t>r;r++)0==(3&r)&&(e=4294967296*Math.random()),n[r]=255&e>>>((3&r)<<3);return n},r.crypto&&crypto.getRandomValues){var i=new Uint32Array(4);n=function(t){var e=new Array(t);crypto.getRandomValues(i);for(var n=0;t>n;n++)e[n]=255&i[n>>2]>>>8*(3&n);return e}}e.exports=n||t}()},{}],69:[function(t,e,n){function r(t){return b(c(m(t),t.length*w))}function i(t){return v(c(m(t),t.length*w))}function o(t){return g(c(m(t),t.length*w))}function s(t,e){return b(p(t,e))}function a(t,e){return v(p(t,e))}function u(t,e){return g(p(t,e))}function c(t,e){t[e>>5]|=128<<24-e%32,t[(e+64>>9<<4)+15]=e;for(var n=Array(80),r=1732584193,i=-271733879,o=-1732584194,s=271733878,a=-1009589776,u=0;u<t.length;u+=16){for(var c=r,p=i,m=o,g=s,b=a,v=0;80>v;v++){n[v]=16>v?t[u+v]:d(n[v-3]^n[v-8]^n[v-14]^n[v-16],1);var y=h(h(d(r,5),f(v,i,o,s)),h(h(a,n[v]),l(v)));a=s,s=o,o=d(i,30),i=r,r=y}r=h(r,c),i=h(i,p),o=h(o,m),s=h(s,g),a=h(a,b)}return Array(r,i,o,s,a)}function f(t,e,n,r){return 20>t?e&n|~e&r:40>t?e^n^r:60>t?e&n|e&r|n&r:e^n^r}function l(t){return 20>t?1518500249:40>t?1859775393:60>t?-1894007588:-899497514}function p(t,e){var n=m(t);n.length>16&&(n=c(n,t.length*w));for(var r=Array(16),i=Array(16),o=0;16>o;o++)r[o]=909522486^n[o],i[o]=1549556828^n[o];var s=c(r.concat(m(e)),512+e.length*w);return c(i.concat(s),672)}function h(t,e){var n=(65535&t)+(65535&e),r=(t>>16)+(e>>16)+(n>>16);return r<<16|65535&n}function d(t,e){return t<<e|t>>>32-e}function m(t){for(var e=Array(),n=(1<<w)-1,r=0;r<t.length*w;r+=w)e[r>>5]|=(t.charCodeAt(r/w)&n)<<32-w-r%32;return e}function g(t){for(var e="",n=(1<<w)-1,r=0;r<32*t.length;r+=w)e+=String.fromCharCode(t[r>>5]>>>32-w-r%32&n);return e}function b(t){for(var e=y?"0123456789ABCDEF":"0123456789abcdef",n="",r=0;r<4*t.length;r++)n+=e.charAt(15&t[r>>2]>>8*(3-r%4)+4)+e.charAt(15&t[r>>2]>>8*(3-r%4));return n}function v(t){for(var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",n="",r=0;r<4*t.length;r+=3)for(var i=(255&t[r>>2]>>8*(3-r%4))<<16|(255&t[r+1>>2]>>8*(3-(r+1)%4))<<8|255&t[r+2>>2]>>8*(3-(r+2)%4),o=0;4>o;o++)n+=8*r+6*o>32*t.length?x:e.charAt(63&i>>6*(3-o));return n}n.hex_sha1=r,n.b64_sha1=i,n.str_sha1=o,n.hex_hmac_sha1=s,n.b64_hmac_sha1=a,n.str_hmac_sha1=u;var y=0,x="=",w=8},{}],70:[function(t,e,n){function r(t){return E(w(S(t),t.length*l))}function i(t){return _(w(S(t),t.length*l))}function o(t){return c(w(S(t),t.length*l))}function s(t,e){return E(j(t,e))}function a(t,e){return _(j(t,e))}function u(t,e){return c(j(t,e))}function c(t){for(var e="",n=(1<<l)-1,r=0;r<32*t.length;r+=l)e+=String.fromCharCode(t[r>>5]>>>32-l-r%32&n);return e}n.hex_sha256=r,n.b64_sha256=i,n.str_sha256=o,n.hex_hmac_sha256=s,n.b64_hmac_sha256=a,n.str_hmac_sha256=u;var f=0,l=8,p=function(t,e){var n=(65535&t)+(65535&e),r=(t>>16)+(e>>16)+(n>>16);return r<<16|65535&n},h=function(t,e){return t>>>e|t<<32-e},d=function(t,e){return t>>>e},m=function(t,e,n){return t&e^~t&n},g=function(t,e,n){return t&e^t&n^e&n},b=function(t){return h(t,2)^h(t,13)^h(t,22)},v=function(t){return h(t,6)^h(t,11)^h(t,25)},y=function(t){return h(t,7)^h(t,18)^d(t,3)},x=function(t){return h(t,17)^h(t,19)^d(t,10)},w=function(t,e){var n,r,i,o,s,a,u,c,f,l,h,d,w=new Array(1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298),S=new Array(1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225),E=new Array(64);t[e>>5]|=128<<24-e%32,t[(e+64>>9<<4)+15]=e;for(var f=0;f<t.length;f+=16){n=S[0],r=S[1],i=S[2],o=S[3],s=S[4],a=S[5],u=S[6],c=S[7];for(var l=0;64>l;l++)E[l]=16>l?t[l+f]:p(p(p(x(E[l-2]),E[l-7]),y(E[l-15])),E[l-16]),h=p(p(p(p(c,v(s)),m(s,a,u)),w[l]),E[l]),d=p(b(n),g(n,r,i)),c=u,u=a,a=s,s=p(o,h),o=i,i=r,r=n,n=p(h,d);S[0]=p(n,S[0]),S[1]=p(r,S[1]),S[2]=p(i,S[2]),S[3]=p(o,S[3]),S[4]=p(s,S[4]),S[5]=p(a,S[5]),S[6]=p(u,S[6]),S[7]=p(c,S[7])}return S},S=function(t){for(var e=Array(),n=(1<<l)-1,r=0;r<t.length*l;r+=l)e[r>>5]|=(t.charCodeAt(r/l)&n)<<24-r%32;return e},E=function(t){for(var e=f?"0123456789ABCDEF":"0123456789abcdef",n="",r=0;r<4*t.length;r++)n+=e.charAt(15&t[r>>2]>>8*(3-r%4)+4)+e.charAt(15&t[r>>2]>>8*(3-r%4));return n},_=function(t){var e,n,r,i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",o="",s=4*t.length,a="=";for(e=0;s>e;e+=3)for(r=(255&t[e>>2]>>8*(3-e%4))<<16|(255&t[e+1>>2]>>8*(3-(e+1)%4))<<8|255&t[e+2>>2]>>8*(3-(e+2)%4),n=0;4>n;n+=1)o+=8*e+6*n<=32*t.length?i.charAt(63&r>>6*(3-n)):a;return o},j=function(t,e){var n=S(t);n.length>16&&(n=w(n,t.length*l));for(var r=Array(16),i=Array(16),o=0;16>o;o++)r[o]=909522486^n[o],i[o]=1549556828^n[o];var s=w(r.concat(S(e)),512+e.length*l);return w(i.concat(s),768)}},{}],71:[function(t,e){t=function(t,e,n,r){function i(r){if(!n[r]){if(!e[r]){if(t)return t(r);throw new Error("Cannot find module '"+r+"'")}var o=n[r]={exports:{}};e[r][0](function(t){var n=e[r][1][t];return i(n?n:t)},o,o.exports)}return n[r].exports}for(var o=0;o<r.length;o++)i(r[o]);return i}("undefined"!=typeof t&&t,{1:[function(t,e){function n(t){if(Object.keys)return Object.keys(t);var e=[];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.push(n);return e}function r(t,e){return void 0===e?""+e:"number"!=typeof e||!isNaN(e)&&isFinite(e)?"function"==typeof e||e instanceof RegExp?e.toString():e:e.toString()}function i(t,e){return"string"==typeof t?t.length<e?t:t.slice(0,e):t}function o(t,e,n,r,i){throw new g.AssertionError({message:n,actual:t,expected:e,operator:r,stackStartFunction:i})}function s(t,e){t||o(t,!0,e,"==",g.ok)}function a(t,e){if(t===e)return!0;if(d.isBuffer(t)&&d.isBuffer(e)){if(t.length!=e.length)return!1;for(var n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}return t instanceof Date&&e instanceof Date?t.getTime()===e.getTime():"object"!=typeof t&&"object"!=typeof e?t==e:f(t,e)}function u(t){return null===t||void 0===t}function c(t){return"[object Arguments]"==Object.prototype.toString.call(t)}function f(t,e){if(u(t)||u(e))return!1;if(t.prototype!==e.prototype)return!1;if(c(t))return c(e)?(t=m.call(t),e=m.call(e),a(t,e)):!1;try{var r,i,o=n(t),s=n(e)}catch(f){return!1}if(o.length!=s.length)return!1;for(o.sort(),s.sort(),i=o.length-1;i>=0;i--)if(o[i]!=s[i])return!1;for(i=o.length-1;i>=0;i--)if(r=o[i],!a(t[r],e[r]))return!1;return!0}function l(t,e){return t&&e?e instanceof RegExp?e.test(t):t instanceof e?!0:e.call({},t)===!0?!0:!1:!1}function p(t,e,n,r){var i;"string"==typeof n&&(r=n,n=null);try{e()}catch(s){i=s}if(r=(n&&n.name?" ("+n.name+").":".")+(r?" "+r:"."),t&&!i&&o("Missing expected exception"+r),!t&&l(i,n)&&o("Got unwanted exception"+r),t&&i&&n&&!l(i,n)||!t&&i)throw i}var h=t("util"),d=t("buffer").Buffer,m=Array.prototype.slice,g=e.exports=s;g.AssertionError=function(t){this.name="AssertionError",this.message=t.message,this.actual=t.actual,this.expected=t.expected,this.operator=t.operator;var e=t.stackStartFunction||o;Error.captureStackTrace&&Error.captureStackTrace(this,e)},h.inherits(g.AssertionError,Error),g.AssertionError.prototype.toString=function(){return this.message?[this.name+":",this.message].join(" "):[this.name+":",i(JSON.stringify(this.actual,r),128),this.operator,i(JSON.stringify(this.expected,r),128)].join(" ")},g.AssertionError.__proto__=Error.prototype,g.fail=o,g.ok=s,g.equal=function(t,e,n){t!=e&&o(t,e,n,"==",g.equal)},g.notEqual=function(t,e,n){t==e&&o(t,e,n,"!=",g.notEqual)},g.deepEqual=function(t,e,n){a(t,e)||o(t,e,n,"deepEqual",g.deepEqual)},g.notDeepEqual=function(t,e,n){a(t,e)&&o(t,e,n,"notDeepEqual",g.notDeepEqual)},g.strictEqual=function(t,e,n){t!==e&&o(t,e,n,"===",g.strictEqual)},g.notStrictEqual=function(t,e,n){t===e&&o(t,e,n,"!==",g.notStrictEqual)},g.throws=function(){p.apply(this,[!0].concat(m.call(arguments)))},g.doesNotThrow=function(){p.apply(this,[!1].concat(m.call(arguments)))},g.ifError=function(t){if(t)throw t}},{util:2,buffer:3}],2:[function(t,e,n){function r(t){return t instanceof Array||Array.isArray(t)||t&&t!==Object.prototype&&r(t.__proto__)}function i(t){return t instanceof RegExp||"object"==typeof t&&"[object RegExp]"===Object.prototype.toString.call(t)}function o(t){if(t instanceof Date)return!0;if("object"!=typeof t)return!1;var e=Date.prototype&&a(Date.prototype),n=t.__proto__&&a(t.__proto__);return JSON.stringify(n)===JSON.stringify(e)}t("events"),n.isArray=r,n.isDate=function(t){return"[object Date]"===Object.prototype.toString.call(t)},n.isRegExp=function(t){return"[object RegExp]"===Object.prototype.toString.call(t)},n.print=function(){},n.puts=function(){},n.debug=function(){},n.inspect=function(t,e,u,c){function f(t,u){if(t&&"function"==typeof t.inspect&&t!==n&&(!t.constructor||t.constructor.prototype!==t))return t.inspect(u);switch(typeof t){case"undefined":return p("undefined","undefined");case"string":var c="'"+JSON.stringify(t).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return p(c,"string");case"number":return p(""+t,"number");case"boolean":return p(""+t,"boolean")}if(null===t)return p("null","null");var h=s(t),d=e?a(t):h;if("function"==typeof t&&0===d.length){if(i(t))return p(""+t,"regexp");var m=t.name?": "+t.name:"";return p("[Function"+m+"]","special")}if(o(t)&&0===d.length)return p(t.toUTCString(),"date");var g,b,v;if(r(t)?(b="Array",v=["[","]"]):(b="Object",v=["{","}"]),"function"==typeof t){var y=t.name?": "+t.name:"";g=i(t)?" "+t:" [Function"+y+"]"}else g="";if(o(t)&&(g=" "+t.toUTCString()),0===d.length)return v[0]+g+v[1];if(0>u)return i(t)?p(""+t,"regexp"):p("[Object]","special");l.push(t);var x=d.map(function(e){var n,i;if(t.__lookupGetter__&&(t.__lookupGetter__(e)?i=t.__lookupSetter__(e)?p("[Getter/Setter]","special"):p("[Getter]","special"):t.__lookupSetter__(e)&&(i=p("[Setter]","special"))),h.indexOf(e)<0&&(n="["+e+"]"),i||(l.indexOf(t[e])<0?(i=null===u?f(t[e]):f(t[e],u-1),i.indexOf("\n")>-1&&(i=r(t)?i.split("\n").map(function(t){return"  "+t}).join("\n").substr(2):"\n"+i.split("\n").map(function(t){return"   "+t}).join("\n"))):i=p("[Circular]","special")),"undefined"==typeof n){if("Array"===b&&e.match(/^\d+$/))return i;n=JSON.stringify(""+e),n.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(n=n.substr(1,n.length-2),n=p(n,"name")):(n=n.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),n=p(n,"string"))}return n+": "+i});l.pop();var w=0,S=x.reduce(function(t,e){return w++,e.indexOf("\n")>=0&&w++,t+e.length+1},0);return x=S>50?v[0]+(""===g?"":g+"\n ")+" "+x.join(",\n  ")+" "+v[1]:v[0]+g+" "+x.join(", ")+" "+v[1]}var l=[],p=function(t,e){var n={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},r={special:"cyan",number:"blue","boolean":"yellow",undefined:"grey","null":"bold",string:"green",date:"magenta",regexp:"red"}[e];return r?"["+n[r][0]+"m"+t+"["+n[r][1]+"m":t};return c||(p=function(t){return t}),f(t,"undefined"==typeof u?2:u)},n.log=function(){},n.pump=null;var s=Object.keys||function(t){var e=[];for(var n in t)e.push(n);return e},a=Object.getOwnPropertyNames||function(t){var e=[];for(var n in t)Object.hasOwnProperty.call(t,n)&&e.push(n);return e},u=Object.create||function(t,e){var n;if(null===t)n={__proto__:null};else{if("object"!=typeof t)throw new TypeError("typeof prototype["+typeof t+"] != 'object'");var r=function(){};r.prototype=t,n=new r,n.__proto__=t}return"undefined"!=typeof e&&Object.defineProperties&&Object.defineProperties(n,e),n};n.inherits=function(t,e){t.super_=e,t.prototype=u(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}})};var c=/%[sdj%]/g;n.format=function(t){if("string"!=typeof t){for(var e=[],r=0;r<arguments.length;r++)e.push(n.inspect(arguments[r]));return e.join(" ")}for(var r=1,i=arguments,o=i.length,s=String(t).replace(c,function(t){if("%%"===t)return"%";if(r>=o)return t;switch(t){case"%s":return String(i[r++]);case"%d":return Number(i[r++]);case"%j":return JSON.stringify(i[r++]);default:return t}}),a=i[r];o>r;a=i[++r])s+=null===a||"object"!=typeof a?" "+a:" "+n.inspect(a);return s}},{events:4}],5:[function(t,e,n){n.readIEEE754=function(t,e,n,r,i){var o,s,a=8*i-r-1,u=(1<<a)-1,c=u>>1,f=-7,l=n?0:i-1,p=n?1:-1,h=t[e+l];for(l+=p,o=h&(1<<-f)-1,h>>=-f,f+=a;f>0;o=256*o+t[e+l],l+=p,f-=8);for(s=o&(1<<-f)-1,o>>=-f,f+=r;f>0;s=256*s+t[e+l],l+=p,f-=8);if(0===o)o=1-c;else{if(o===u)return s?0/0:1/0*(h?-1:1);s+=Math.pow(2,r),o-=c}return(h?-1:1)*s*Math.pow(2,o-r)},n.writeIEEE754=function(t,e,n,r,i,o){var s,a,u,c=8*o-i-1,f=(1<<c)-1,l=f>>1,p=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,h=r?o-1:0,d=r?-1:1,m=0>e||0===e&&0>1/e?1:0;for(e=Math.abs(e),isNaN(e)||1/0===e?(a=isNaN(e)?1:0,s=f):(s=Math.floor(Math.log(e)/Math.LN2),e*(u=Math.pow(2,-s))<1&&(s--,u*=2),e+=s+l>=1?p/u:p*Math.pow(2,1-l),e*u>=2&&(s++,u/=2),s+l>=f?(a=0,s=f):s+l>=1?(a=(e*u-1)*Math.pow(2,i),s+=l):(a=e*Math.pow(2,l-1)*Math.pow(2,i),s=0));i>=8;t[n+h]=255&a,h+=d,a/=256,i-=8);for(s=s<<i|a,c+=i;c>0;t[n+h]=255&s,h+=d,s/=256,c-=8);t[n+h-d]|=128*m}},{}],6:[function(t,e){var n=e.exports={};n.nextTick=function(){var t="undefined"!=typeof window&&window.setImmediate,e="undefined"!=typeof window&&window.postMessage&&window.addEventListener;if(t)return function(t){return window.setImmediate(t)};if(e){var n=[];return window.addEventListener("message",function(t){if(t.source===window&&"process-tick"===t.data&&(t.stopPropagation(),n.length>0)){var e=n.shift();e()}},!0),function(t){n.push(t),window.postMessage("process-tick","*")}}return function(t){setTimeout(t,0)}}(),n.title="browser",n.browser=!0,n.env={},n.argv=[],n.binding=function(){throw new Error("process.binding is not supported")},n.cwd=function(){return"/"},n.chdir=function(){throw new Error("process.chdir is not supported")}},{}],4:[function(t,e,n){!function(t){function e(t,e){if(t.indexOf)return t.indexOf(e);for(var n=0;n<t.length;n++)if(e===t[n])return n;return-1}t.EventEmitter||(t.EventEmitter=function(){});var r=n.EventEmitter=t.EventEmitter,i="function"==typeof Array.isArray?Array.isArray:function(t){return"[object Array]"===Object.prototype.toString.call(t)},o=10;r.prototype.setMaxListeners=function(t){this._events||(this._events={}),this._events.maxListeners=t},r.prototype.emit=function(t){if("error"===t&&(!this._events||!this._events.error||i(this._events.error)&&!this._events.error.length))throw arguments[1]instanceof Error?arguments[1]:new Error("Uncaught, unspecified 'error' event.");if(!this._events)return!1;var e=this._events[t];if(!e)return!1;if("function"==typeof e){switch(arguments.length){case 1:e.call(this);break;case 2:e.call(this,arguments[1]);break;case 3:e.call(this,arguments[1],arguments[2]);break;default:var n=Array.prototype.slice.call(arguments,1);e.apply(this,n)}return!0}if(i(e)){for(var n=Array.prototype.slice.call(arguments,1),r=e.slice(),o=0,s=r.length;s>o;o++)r[o].apply(this,n);return!0}return!1},r.prototype.addListener=function(t,e){if("function"!=typeof e)throw new Error("addListener only takes instances of Function");if(this._events||(this._events={}),this.emit("newListener",t,e),this._events[t])if(i(this._events[t])){if(!this._events[t].warned){var n;n=void 0!==this._events.maxListeners?this._events.maxListeners:o,n&&n>0&&this._events[t].length>n&&(this._events[t].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[t].length),console.trace())}this._events[t].push(e)}else this._events[t]=[this._events[t],e];else this._events[t]=e;return this},r.prototype.on=r.prototype.addListener,r.prototype.once=function(t,e){var n=this;return n.on(t,function r(){n.removeListener(t,r),e.apply(this,arguments)}),this},r.prototype.removeListener=function(t,n){if("function"!=typeof n)throw new Error("removeListener only takes instances of Function");if(!this._events||!this._events[t])return this;var r=this._events[t];if(i(r)){var o=e(r,n);if(0>o)return this;r.splice(o,1),0==r.length&&delete this._events[t]}else this._events[t]===n&&delete this._events[t];return this},r.prototype.removeAllListeners=function(t){return 0===arguments.length?(this._events={},this):(t&&this._events&&this._events[t]&&(this._events[t]=null),this)},r.prototype.listeners=function(t){return this._events||(this._events={}),this._events[t]||(this._events[t]=[]),i(this._events[t])||(this._events[t]=[this._events[t]]),this._events[t]}}(t("__browserify_process"))},{__browserify_process:6}],"buffer-browserify":[function(t,e){e.exports=t("q9TxCC")},{}],q9TxCC:[function(t,e,n){function r(t){this.length=t}function i(t){return 16>t?"0"+t.toString(16):t.toString(16)}function o(t){for(var e=[],n=0;n<t.length;n++)if(t.charCodeAt(n)<=127)e.push(t.charCodeAt(n));else for(var r=encodeURIComponent(t.charAt(n)).substr(1).split("%"),i=0;i<r.length;i++)e.push(parseInt(r[i],16));return e}function s(t){for(var e=[],n=0;n<t.length;n++)e.push(255&t.charCodeAt(n));return e}function a(e){return t("base64-js").toByteArray(e)}function u(t,e,n,r){for(var i=0;r>i&&!(i+n>=e.length||i>=t.length);)e[i+n]=t[i],i++;return i}function c(t){try{return decodeURIComponent(t)}catch(e){return String.fromCharCode(65533)}}function f(t){return t=~~Math.ceil(+t),0>t?0:t}function l(t,e,n){if(!(this instanceof l))return new l(t,e,n);var i;if("number"==typeof n)this.length=f(e),this.parent=t,this.offset=n;else{switch(i=typeof t){case"number":this.length=f(t);break;case"string":this.length=l.byteLength(t,e);break;case"object":this.length=f(t.length);break;default:throw new Error("First argument needs to be a number, array or string.")}if(this.length>l.poolSize?(this.parent=new r(this.length),this.offset=0):((!O||O.length-O.used<this.length)&&h(),this.parent=O,this.offset=O.used,O.used+=this.length),p(t))for(var o=0;o<this.length;o++)this.parent[o+this.offset]=t instanceof l?t.readUInt8(o):t[o];else"string"==i&&(this.length=this.write(t,0,e))}}function p(t){return Array.isArray(t)||l.isBuffer(t)||t&&"object"==typeof t&&"number"==typeof t.length}function h(){O=new r(l.poolSize),O.used=0}function d(t,e,n,r){var i=0;return r||(C.ok("boolean"==typeof n,"missing or invalid endian"),C.ok(void 0!==e&&null!==e,"missing offset"),C.ok(e+1<t.length,"Trying to read beyond buffer length")),e>=t.length?0:(n?(i=t.parent[t.offset+e]<<8,e+1<t.length&&(i|=t.parent[t.offset+e+1])):(i=t.parent[t.offset+e],e+1<t.length&&(i|=t.parent[t.offset+e+1]<<8)),i)}function m(t,e,n,r){var i=0;return r||(C.ok("boolean"==typeof n,"missing or invalid endian"),C.ok(void 0!==e&&null!==e,"missing offset"),C.ok(e+3<t.length,"Trying to read beyond buffer length")),e>=t.length?0:(n?(e+1<t.length&&(i=t.parent[t.offset+e+1]<<16),e+2<t.length&&(i|=t.parent[t.offset+e+2]<<8),e+3<t.length&&(i|=t.parent[t.offset+e+3]),i+=t.parent[t.offset+e]<<24>>>0):(e+2<t.length&&(i=t.parent[t.offset+e+2]<<16),e+1<t.length&&(i|=t.parent[t.offset+e+1]<<8),i|=t.parent[t.offset+e],e+3<t.length&&(i+=t.parent[t.offset+e+3]<<24>>>0)),i)}function g(t,e,n,r){var i,o;return r||(C.ok("boolean"==typeof n,"missing or invalid endian"),C.ok(void 0!==e&&null!==e,"missing offset"),C.ok(e+1<t.length,"Trying to read beyond buffer length")),o=d(t,e,n,r),i=32768&o,i?-1*(65535-o+1):o}function b(t,e,n,r){var i,o;return r||(C.ok("boolean"==typeof n,"missing or invalid endian"),C.ok(void 0!==e&&null!==e,"missing offset"),C.ok(e+3<t.length,"Trying to read beyond buffer length")),o=m(t,e,n,r),i=2147483648&o,i?-1*(4294967295-o+1):o}function v(e,n,r,i){return i||(C.ok("boolean"==typeof r,"missing or invalid endian"),C.ok(n+3<e.length,"Trying to read beyond buffer length")),t("./buffer_ieee754").readIEEE754(e,n,r,23,4)}function y(e,n,r,i){return i||(C.ok("boolean"==typeof r,"missing or invalid endian"),C.ok(n+7<e.length,"Trying to read beyond buffer length")),t("./buffer_ieee754").readIEEE754(e,n,r,52,8)}function x(t,e){C.ok("number"==typeof t,"cannot write a non-number as a number"),C.ok(t>=0,"specified a negative value for writing an unsigned value"),C.ok(e>=t,"value is larger than maximum value for type"),C.ok(Math.floor(t)===t,"value has a fractional component")}function w(t,e,n,r,i){i||(C.ok(void 0!==e&&null!==e,"missing value"),C.ok("boolean"==typeof r,"missing or invalid endian"),C.ok(void 0!==n&&null!==n,"missing offset"),C.ok(n+1<t.length,"trying to write beyond buffer length"),x(e,65535));for(var o=0;o<Math.min(t.length-n,2);o++)t.parent[t.offset+n+o]=(e&255<<8*(r?1-o:o))>>>8*(r?1-o:o)}function S(t,e,n,r,i){i||(C.ok(void 0!==e&&null!==e,"missing value"),C.ok("boolean"==typeof r,"missing or invalid endian"),C.ok(void 0!==n&&null!==n,"missing offset"),C.ok(n+3<t.length,"trying to write beyond buffer length"),x(e,4294967295));for(var o=0;o<Math.min(t.length-n,4);o++)t.parent[t.offset+n+o]=255&e>>>8*(r?3-o:o)}function E(t,e,n){C.ok("number"==typeof t,"cannot write a non-number as a number"),C.ok(e>=t,"value larger than maximum allowed value"),C.ok(t>=n,"value smaller than minimum allowed value"),C.ok(Math.floor(t)===t,"value has a fractional component")}function _(t,e,n){C.ok("number"==typeof t,"cannot write a non-number as a number"),C.ok(e>=t,"value larger than maximum allowed value"),C.ok(t>=n,"value smaller than minimum allowed value")}function j(t,e,n,r,i){i||(C.ok(void 0!==e&&null!==e,"missing value"),C.ok("boolean"==typeof r,"missing or invalid endian"),C.ok(void 0!==n&&null!==n,"missing offset"),C.ok(n+1<t.length,"Trying to write beyond buffer length"),E(e,32767,-32768)),e>=0?w(t,e,n,r,i):w(t,65535+e+1,n,r,i)}function k(t,e,n,r,i){i||(C.ok(void 0!==e&&null!==e,"missing value"),C.ok("boolean"==typeof r,"missing or invalid endian"),C.ok(void 0!==n&&null!==n,"missing offset"),C.ok(n+3<t.length,"Trying to write beyond buffer length"),E(e,2147483647,-2147483648)),e>=0?S(t,e,n,r,i):S(t,4294967295+e+1,n,r,i)}function A(e,n,r,i,o){o||(C.ok(void 0!==n&&null!==n,"missing value"),C.ok("boolean"==typeof i,"missing or invalid endian"),C.ok(void 0!==r&&null!==r,"missing offset"),C.ok(r+3<e.length,"Trying to write beyond buffer length"),_(n,3.4028234663852886e38,-3.4028234663852886e38)),t("./buffer_ieee754").writeIEEE754(e,n,r,i,23,4)}function I(e,n,r,i,o){o||(C.ok(void 0!==n&&null!==n,"missing value"),C.ok("boolean"==typeof i,"missing or invalid endian"),C.ok(void 0!==r&&null!==r,"missing offset"),C.ok(r+7<e.length,"Trying to write beyond buffer length"),_(n,1.7976931348623157e308,-1.7976931348623157e308)),t("./buffer_ieee754").writeIEEE754(e,n,r,i,52,8)}var C=t("assert");n.INSPECT_MAX_BYTES=50,r.byteLength=function(t,e){switch(e||"utf8"){case"hex":return t.length/2;case"utf8":case"utf-8":return o(t).length;case"ascii":case"binary":return t.length;case"base64":return a(t).length;default:throw new Error("Unknown encoding")}},r.prototype.utf8Write=function(t,e,n){return r._charsWritten=u(o(t),this,e,n)},r.prototype.asciiWrite=function(t,e,n){return r._charsWritten=u(s(t),this,e,n)},r.prototype.binaryWrite=r.prototype.asciiWrite,r.prototype.base64Write=function(t,e,n){return r._charsWritten=u(a(t),this,e,n)},r.prototype.base64Slice=function(){var e=Array.prototype.slice.apply(this,arguments);return t("base64-js").fromByteArray(e)},r.prototype.utf8Slice=function(){for(var t=Array.prototype.slice.apply(this,arguments),e="",n="",r=0;r<t.length;)t[r]<=127?(e+=c(n)+String.fromCharCode(t[r]),n=""):n+="%"+t[r].toString(16),r++;return e+c(n)},r.prototype.asciiSlice=function(){for(var t=Array.prototype.slice.apply(this,arguments),e="",n=0;n<t.length;n++)e+=String.fromCharCode(t[n]);return e},r.prototype.binarySlice=r.prototype.asciiSlice,r.prototype.inspect=function(){for(var t=[],e=this.length,r=0;e>r;r++)if(t[r]=i(this[r]),r==n.INSPECT_MAX_BYTES){t[r+1]="...";break}return"<SlowBuffer "+t.join(" ")+">"},r.prototype.hexSlice=function(t,e){var n=this.length;(!t||0>t)&&(t=0),(!e||0>e||e>n)&&(e=n);for(var r="",o=t;e>o;o++)r+=i(this[o]);return r},r.prototype.toString=function(t,e,n){if(t=String(t||"utf8").toLowerCase(),e=+e||0,"undefined"==typeof n&&(n=this.length),+n==e)return"";switch(t){case"hex":return this.hexSlice(e,n);case"utf8":case"utf-8":return this.utf8Slice(e,n);case"ascii":return this.asciiSlice(e,n);case"binary":return this.binarySlice(e,n);case"base64":return this.base64Slice(e,n);case"ucs2":case"ucs-2":return this.ucs2Slice(e,n);default:throw new Error("Unknown encoding")}},r.prototype.hexWrite=function(t,e,n){e=+e||0;var i=this.length-e;n?(n=+n,n>i&&(n=i)):n=i;var o=t.length;if(o%2)throw new Error("Invalid hex string");n>o/2&&(n=o/2);for(var s=0;n>s;s++){var a=parseInt(t.substr(2*s,2),16);if(isNaN(a))throw new Error("Invalid hex string");this[e+s]=a}return r._charsWritten=2*s,s},r.prototype.write=function(t,e,n,r){if(isFinite(e))isFinite(n)||(r=n,n=void 0);else{var i=r;r=e,e=n,n=i}e=+e||0;var o=this.length-e;switch(n?(n=+n,n>o&&(n=o)):n=o,r=String(r||"utf8").toLowerCase()){case"hex":return this.hexWrite(t,e,n);case"utf8":case"utf-8":return this.utf8Write(t,e,n);case"ascii":return this.asciiWrite(t,e,n);case"binary":return this.binaryWrite(t,e,n);case"base64":return this.base64Write(t,e,n);case"ucs2":case"ucs-2":return this.ucs2Write(t,e,n);default:throw new Error("Unknown encoding")}},r.prototype.slice=function(t,e){if(void 0===e&&(e=this.length),e>this.length)throw new Error("oob");if(t>e)throw new Error("oob");return new l(this,e-t,+t)},r.prototype.copy=function(t,e,n,r){for(var i=[],o=n;r>o;o++)C.ok("undefined"!=typeof this[o],"copying undefined buffer bytes!"),i.push(this[o]);for(var o=e;o<e+i.length;o++)t[o]=i[o-e]},r.prototype.fill=function(t,e,n){if(n>this.length)throw new Error("oob");if(e>n)throw new Error("oob");for(var r=e;n>r;r++)this[r]=t},n.SlowBuffer=r,n.Buffer=l,l.poolSize=8192;var O;l.isBuffer=function(t){return t instanceof l||t instanceof r},l.concat=function(t,e){if(!Array.isArray(t))throw new Error("Usage: Buffer.concat(list, [totalLength])\n       list should be an Array.");if(0===t.length)return new l(0);if(1===t.length)return t[0];if("number"!=typeof e){e=0;for(var n=0;n<t.length;n++){var r=t[n];e+=r.length}}for(var i=new l(e),o=0,n=0;n<t.length;n++){var r=t[n];r.copy(i,o),o+=r.length}return i},l.prototype.inspect=function(){for(var t=[],e=this.length,r=0;e>r;r++)if(t[r]=i(this.parent[r+this.offset]),r==n.INSPECT_MAX_BYTES){t[r+1]="...";break}return"<Buffer "+t.join(" ")+">"},l.prototype.get=function(t){if(0>t||t>=this.length)throw new Error("oob");return this.parent[this.offset+t]},l.prototype.set=function(t,e){if(0>t||t>=this.length)throw new Error("oob");
return this.parent[this.offset+t]=e},l.prototype.write=function(t,e,n,i){if(isFinite(e))isFinite(n)||(i=n,n=void 0);else{var o=i;i=e,e=n,n=o}e=+e||0;var s=this.length-e;n?(n=+n,n>s&&(n=s)):n=s,i=String(i||"utf8").toLowerCase();var a;switch(i){case"hex":a=this.parent.hexWrite(t,this.offset+e,n);break;case"utf8":case"utf-8":a=this.parent.utf8Write(t,this.offset+e,n);break;case"ascii":a=this.parent.asciiWrite(t,this.offset+e,n);break;case"binary":a=this.parent.binaryWrite(t,this.offset+e,n);break;case"base64":a=this.parent.base64Write(t,this.offset+e,n);break;case"ucs2":case"ucs-2":a=this.parent.ucs2Write(t,this.offset+e,n);break;default:throw new Error("Unknown encoding")}return l._charsWritten=r._charsWritten,a},l.prototype.toString=function(t,e,n){switch(t=String(t||"utf8").toLowerCase(),"undefined"==typeof e||0>e?e=0:e>this.length&&(e=this.length),"undefined"==typeof n||n>this.length?n=this.length:0>n&&(n=0),e+=this.offset,n+=this.offset,t){case"hex":return this.parent.hexSlice(e,n);case"utf8":case"utf-8":return this.parent.utf8Slice(e,n);case"ascii":return this.parent.asciiSlice(e,n);case"binary":return this.parent.binarySlice(e,n);case"base64":return this.parent.base64Slice(e,n);case"ucs2":case"ucs-2":return this.parent.ucs2Slice(e,n);default:throw new Error("Unknown encoding")}},l.byteLength=r.byteLength,l.prototype.fill=function(t,e,n){if(t||(t=0),e||(e=0),n||(n=this.length),"string"==typeof t&&(t=t.charCodeAt(0)),"number"!=typeof t||isNaN(t))throw new Error("value is not a number");if(e>n)throw new Error("end < start");if(n===e)return 0;if(0==this.length)return 0;if(0>e||e>=this.length)throw new Error("start out of bounds");if(0>n||n>this.length)throw new Error("end out of bounds");return this.parent.fill(t,e+this.offset,n+this.offset)},l.prototype.copy=function(t,e,n,r){var i=this;if(n||(n=0),r||(r=this.length),e||(e=0),n>r)throw new Error("sourceEnd < sourceStart");if(r===n)return 0;if(0==t.length||0==i.length)return 0;if(0>e||e>=t.length)throw new Error("targetStart out of bounds");if(0>n||n>=i.length)throw new Error("sourceStart out of bounds");if(0>r||r>i.length)throw new Error("sourceEnd out of bounds");return r>this.length&&(r=this.length),t.length-e<r-n&&(r=t.length-e+n),this.parent.copy(t.parent,e+t.offset,n+this.offset,r+this.offset)},l.prototype.slice=function(t,e){if(void 0===e&&(e=this.length),e>this.length)throw new Error("oob");if(t>e)throw new Error("oob");return new l(this.parent,e-t,+t+this.offset)},l.prototype.utf8Slice=function(t,e){return this.toString("utf8",t,e)},l.prototype.binarySlice=function(t,e){return this.toString("binary",t,e)},l.prototype.asciiSlice=function(t,e){return this.toString("ascii",t,e)},l.prototype.utf8Write=function(t,e){return this.write(t,e,"utf8")},l.prototype.binaryWrite=function(t,e){return this.write(t,e,"binary")},l.prototype.asciiWrite=function(t,e){return this.write(t,e,"ascii")},l.prototype.readUInt8=function(t,e){var n=this;return e||(C.ok(void 0!==t&&null!==t,"missing offset"),C.ok(t<n.length,"Trying to read beyond buffer length")),t>=n.length?void 0:n.parent[n.offset+t]},l.prototype.readUInt16LE=function(t,e){return d(this,t,!1,e)},l.prototype.readUInt16BE=function(t,e){return d(this,t,!0,e)},l.prototype.readUInt32LE=function(t,e){return m(this,t,!1,e)},l.prototype.readUInt32BE=function(t,e){return m(this,t,!0,e)},l.prototype.readInt8=function(t,e){var n,r=this;return e||(C.ok(void 0!==t&&null!==t,"missing offset"),C.ok(t<r.length,"Trying to read beyond buffer length")),t>=r.length?void 0:(n=128&r.parent[r.offset+t],n?-1*(255-r.parent[r.offset+t]+1):r.parent[r.offset+t])},l.prototype.readInt16LE=function(t,e){return g(this,t,!1,e)},l.prototype.readInt16BE=function(t,e){return g(this,t,!0,e)},l.prototype.readInt32LE=function(t,e){return b(this,t,!1,e)},l.prototype.readInt32BE=function(t,e){return b(this,t,!0,e)},l.prototype.readFloatLE=function(t,e){return v(this,t,!1,e)},l.prototype.readFloatBE=function(t,e){return v(this,t,!0,e)},l.prototype.readDoubleLE=function(t,e){return y(this,t,!1,e)},l.prototype.readDoubleBE=function(t,e){return y(this,t,!0,e)},l.prototype.writeUInt8=function(t,e,n){var r=this;n||(C.ok(void 0!==t&&null!==t,"missing value"),C.ok(void 0!==e&&null!==e,"missing offset"),C.ok(e<r.length,"trying to write beyond buffer length"),x(t,255)),e<r.length&&(r.parent[r.offset+e]=t)},l.prototype.writeUInt16LE=function(t,e,n){w(this,t,e,!1,n)},l.prototype.writeUInt16BE=function(t,e,n){w(this,t,e,!0,n)},l.prototype.writeUInt32LE=function(t,e,n){S(this,t,e,!1,n)},l.prototype.writeUInt32BE=function(t,e,n){S(this,t,e,!0,n)},l.prototype.writeInt8=function(t,e,n){var r=this;n||(C.ok(void 0!==t&&null!==t,"missing value"),C.ok(void 0!==e&&null!==e,"missing offset"),C.ok(e<r.length,"Trying to write beyond buffer length"),E(t,127,-128)),t>=0?r.writeUInt8(t,e,n):r.writeUInt8(255+t+1,e,n)},l.prototype.writeInt16LE=function(t,e,n){j(this,t,e,!1,n)},l.prototype.writeInt16BE=function(t,e,n){j(this,t,e,!0,n)},l.prototype.writeInt32LE=function(t,e,n){k(this,t,e,!1,n)},l.prototype.writeInt32BE=function(t,e,n){k(this,t,e,!0,n)},l.prototype.writeFloatLE=function(t,e,n){A(this,t,e,!1,n)},l.prototype.writeFloatBE=function(t,e,n){A(this,t,e,!0,n)},l.prototype.writeDoubleLE=function(t,e,n){I(this,t,e,!1,n)},l.prototype.writeDoubleBE=function(t,e,n){I(this,t,e,!0,n)},r.prototype.readUInt8=l.prototype.readUInt8,r.prototype.readUInt16LE=l.prototype.readUInt16LE,r.prototype.readUInt16BE=l.prototype.readUInt16BE,r.prototype.readUInt32LE=l.prototype.readUInt32LE,r.prototype.readUInt32BE=l.prototype.readUInt32BE,r.prototype.readInt8=l.prototype.readInt8,r.prototype.readInt16LE=l.prototype.readInt16LE,r.prototype.readInt16BE=l.prototype.readInt16BE,r.prototype.readInt32LE=l.prototype.readInt32LE,r.prototype.readInt32BE=l.prototype.readInt32BE,r.prototype.readFloatLE=l.prototype.readFloatLE,r.prototype.readFloatBE=l.prototype.readFloatBE,r.prototype.readDoubleLE=l.prototype.readDoubleLE,r.prototype.readDoubleBE=l.prototype.readDoubleBE,r.prototype.writeUInt8=l.prototype.writeUInt8,r.prototype.writeUInt16LE=l.prototype.writeUInt16LE,r.prototype.writeUInt16BE=l.prototype.writeUInt16BE,r.prototype.writeUInt32LE=l.prototype.writeUInt32LE,r.prototype.writeUInt32BE=l.prototype.writeUInt32BE,r.prototype.writeInt8=l.prototype.writeInt8,r.prototype.writeInt16LE=l.prototype.writeInt16LE,r.prototype.writeInt16BE=l.prototype.writeInt16BE,r.prototype.writeInt32LE=l.prototype.writeInt32LE,r.prototype.writeInt32BE=l.prototype.writeInt32BE,r.prototype.writeFloatLE=l.prototype.writeFloatLE,r.prototype.writeFloatBE=l.prototype.writeFloatBE,r.prototype.writeDoubleLE=l.prototype.writeDoubleLE,r.prototype.writeDoubleBE=l.prototype.writeDoubleBE},{assert:1,"./buffer_ieee754":5,"base64-js":7}],7:[function(t,e){!function(){"use strict";function t(t){var e,n,i,o,s,a;if(t.length%4>0)throw"Invalid string. Length must be a multiple of 4";for(s=t.indexOf("="),s=s>0?t.length-s:0,a=[],i=s>0?t.length-4:t.length,e=0,n=0;i>e;e+=4,n+=3)o=r.indexOf(t[e])<<18|r.indexOf(t[e+1])<<12|r.indexOf(t[e+2])<<6|r.indexOf(t[e+3]),a.push((16711680&o)>>16),a.push((65280&o)>>8),a.push(255&o);return 2===s?(o=r.indexOf(t[e])<<2|r.indexOf(t[e+1])>>4,a.push(255&o)):1===s&&(o=r.indexOf(t[e])<<10|r.indexOf(t[e+1])<<4|r.indexOf(t[e+2])>>2,a.push(255&o>>8),a.push(255&o)),a}function n(t){function e(t){return r[63&t>>18]+r[63&t>>12]+r[63&t>>6]+r[63&t]}var n,i,o,s=t.length%3,a="";for(n=0,o=t.length-s;o>n;n+=3)i=(t[n]<<16)+(t[n+1]<<8)+t[n+2],a+=e(i);switch(s){case 1:i=t[t.length-1],a+=r[i>>2],a+=r[63&i<<4],a+="==";break;case 2:i=(t[t.length-2]<<8)+t[t.length-1],a+=r[i>>10],a+=r[63&i>>4],a+=r[63&i<<2],a+="="}return a}var r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";e.exports.toByteArray=t,e.exports.fromByteArray=n}()},{}],8:[function(t,e,n){n.readIEEE754=function(t,e,n,r,i){var o,s,a=8*i-r-1,u=(1<<a)-1,c=u>>1,f=-7,l=n?0:i-1,p=n?1:-1,h=t[e+l];for(l+=p,o=h&(1<<-f)-1,h>>=-f,f+=a;f>0;o=256*o+t[e+l],l+=p,f-=8);for(s=o&(1<<-f)-1,o>>=-f,f+=r;f>0;s=256*s+t[e+l],l+=p,f-=8);if(0===o)o=1-c;else{if(o===u)return s?0/0:1/0*(h?-1:1);s+=Math.pow(2,r),o-=c}return(h?-1:1)*s*Math.pow(2,o-r)},n.writeIEEE754=function(t,e,n,r,i,o){var s,a,u,c=8*o-i-1,f=(1<<c)-1,l=f>>1,p=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,h=r?o-1:0,d=r?-1:1,m=0>e||0===e&&0>1/e?1:0;for(e=Math.abs(e),isNaN(e)||1/0===e?(a=isNaN(e)?1:0,s=f):(s=Math.floor(Math.log(e)/Math.LN2),e*(u=Math.pow(2,-s))<1&&(s--,u*=2),e+=s+l>=1?p/u:p*Math.pow(2,1-l),e*u>=2&&(s++,u/=2),s+l>=f?(a=0,s=f):s+l>=1?(a=(e*u-1)*Math.pow(2,i),s+=l):(a=e*Math.pow(2,l-1)*Math.pow(2,i),s=0));i>=8;t[n+h]=255&a,h+=d,a/=256,i-=8);for(s=s<<i|a,c+=i;c>0;t[n+h]=255&s,h+=d,s/=256,c-=8);t[n+h-d]|=128*m}},{}],3:[function(t,e,n){function r(t){this.length=t}function i(t){return 16>t?"0"+t.toString(16):t.toString(16)}function o(t){for(var e=[],n=0;n<t.length;n++)if(t.charCodeAt(n)<=127)e.push(t.charCodeAt(n));else for(var r=encodeURIComponent(t.charAt(n)).substr(1).split("%"),i=0;i<r.length;i++)e.push(parseInt(r[i],16));return e}function s(t){for(var e=[],n=0;n<t.length;n++)e.push(255&t.charCodeAt(n));return e}function a(e){return t("base64-js").toByteArray(e)}function u(t,e,n,r){for(var i=0;r>i&&!(i+n>=e.length||i>=t.length);)e[i+n]=t[i],i++;return i}function c(t){try{return decodeURIComponent(t)}catch(e){return String.fromCharCode(65533)}}function f(t){return t=~~Math.ceil(+t),0>t?0:t}function l(t,e,n){if(!(this instanceof l))return new l(t,e,n);var i;if("number"==typeof n)this.length=f(e),this.parent=t,this.offset=n;else{switch(i=typeof t){case"number":this.length=f(t);break;case"string":this.length=l.byteLength(t,e);break;case"object":this.length=f(t.length);break;default:throw new Error("First argument needs to be a number, array or string.")}if(this.length>l.poolSize?(this.parent=new r(this.length),this.offset=0):((!O||O.length-O.used<this.length)&&h(),this.parent=O,this.offset=O.used,O.used+=this.length),p(t))for(var o=0;o<this.length;o++)this.parent[o+this.offset]=t[o];else"string"==i&&(this.length=this.write(t,0,e))}}function p(t){return Array.isArray(t)||l.isBuffer(t)||t&&"object"==typeof t&&"number"==typeof t.length}function h(){O=new r(l.poolSize),O.used=0}function d(t,e,n,r){var i=0;return r||(C.ok("boolean"==typeof n,"missing or invalid endian"),C.ok(void 0!==e&&null!==e,"missing offset"),C.ok(e+1<t.length,"Trying to read beyond buffer length")),n?(i=t.parent[t.offset+e]<<8,i|=t.parent[t.offset+e+1]):(i=t.parent[t.offset+e],i|=t.parent[t.offset+e+1]<<8),i}function m(t,e,n,r){var i=0;return r||(C.ok("boolean"==typeof n,"missing or invalid endian"),C.ok(void 0!==e&&null!==e,"missing offset"),C.ok(e+3<t.length,"Trying to read beyond buffer length")),n?(i=t.parent[t.offset+e+1]<<16,i|=t.parent[t.offset+e+2]<<8,i|=t.parent[t.offset+e+3],i+=t.parent[t.offset+e]<<24>>>0):(i=t.parent[t.offset+e+2]<<16,i|=t.parent[t.offset+e+1]<<8,i|=t.parent[t.offset+e],i+=t.parent[t.offset+e+3]<<24>>>0),i}function g(t,e,n,r){var i,o;return r||(C.ok("boolean"==typeof n,"missing or invalid endian"),C.ok(void 0!==e&&null!==e,"missing offset"),C.ok(e+1<t.length,"Trying to read beyond buffer length")),o=d(t,e,n,r),i=32768&o,i?-1*(65535-o+1):o}function b(t,e,n,r){var i,o;return r||(C.ok("boolean"==typeof n,"missing or invalid endian"),C.ok(void 0!==e&&null!==e,"missing offset"),C.ok(e+3<t.length,"Trying to read beyond buffer length")),o=m(t,e,n,r),i=2147483648&o,i?-1*(4294967295-o+1):o}function v(e,n,r,i){return i||(C.ok("boolean"==typeof r,"missing or invalid endian"),C.ok(n+3<e.length,"Trying to read beyond buffer length")),t("./buffer_ieee754").readIEEE754(e,n,r,23,4)}function y(e,n,r,i){return i||(C.ok("boolean"==typeof r,"missing or invalid endian"),C.ok(n+7<e.length,"Trying to read beyond buffer length")),t("./buffer_ieee754").readIEEE754(e,n,r,52,8)}function x(t,e){C.ok("number"==typeof t,"cannot write a non-number as a number"),C.ok(t>=0,"specified a negative value for writing an unsigned value"),C.ok(e>=t,"value is larger than maximum value for type"),C.ok(Math.floor(t)===t,"value has a fractional component")}function w(t,e,n,r,i){i||(C.ok(void 0!==e&&null!==e,"missing value"),C.ok("boolean"==typeof r,"missing or invalid endian"),C.ok(void 0!==n&&null!==n,"missing offset"),C.ok(n+1<t.length,"trying to write beyond buffer length"),x(e,65535)),r?(t.parent[t.offset+n]=(65280&e)>>>8,t.parent[t.offset+n+1]=255&e):(t.parent[t.offset+n+1]=(65280&e)>>>8,t.parent[t.offset+n]=255&e)}function S(t,e,n,r,i){i||(C.ok(void 0!==e&&null!==e,"missing value"),C.ok("boolean"==typeof r,"missing or invalid endian"),C.ok(void 0!==n&&null!==n,"missing offset"),C.ok(n+3<t.length,"trying to write beyond buffer length"),x(e,4294967295)),r?(t.parent[t.offset+n]=255&e>>>24,t.parent[t.offset+n+1]=255&e>>>16,t.parent[t.offset+n+2]=255&e>>>8,t.parent[t.offset+n+3]=255&e):(t.parent[t.offset+n+3]=255&e>>>24,t.parent[t.offset+n+2]=255&e>>>16,t.parent[t.offset+n+1]=255&e>>>8,t.parent[t.offset+n]=255&e)}function E(t,e,n){C.ok("number"==typeof t,"cannot write a non-number as a number"),C.ok(e>=t,"value larger than maximum allowed value"),C.ok(t>=n,"value smaller than minimum allowed value"),C.ok(Math.floor(t)===t,"value has a fractional component")}function _(t,e,n){C.ok("number"==typeof t,"cannot write a non-number as a number"),C.ok(e>=t,"value larger than maximum allowed value"),C.ok(t>=n,"value smaller than minimum allowed value")}function j(t,e,n,r,i){i||(C.ok(void 0!==e&&null!==e,"missing value"),C.ok("boolean"==typeof r,"missing or invalid endian"),C.ok(void 0!==n&&null!==n,"missing offset"),C.ok(n+1<t.length,"Trying to write beyond buffer length"),E(e,32767,-32768)),e>=0?w(t,e,n,r,i):w(t,65535+e+1,n,r,i)}function k(t,e,n,r,i){i||(C.ok(void 0!==e&&null!==e,"missing value"),C.ok("boolean"==typeof r,"missing or invalid endian"),C.ok(void 0!==n&&null!==n,"missing offset"),C.ok(n+3<t.length,"Trying to write beyond buffer length"),E(e,2147483647,-2147483648)),e>=0?S(t,e,n,r,i):S(t,4294967295+e+1,n,r,i)}function A(e,n,r,i,o){o||(C.ok(void 0!==n&&null!==n,"missing value"),C.ok("boolean"==typeof i,"missing or invalid endian"),C.ok(void 0!==r&&null!==r,"missing offset"),C.ok(r+3<e.length,"Trying to write beyond buffer length"),_(n,3.4028234663852886e38,-3.4028234663852886e38)),t("./buffer_ieee754").writeIEEE754(e,n,r,i,23,4)}function I(e,n,r,i,o){o||(C.ok(void 0!==n&&null!==n,"missing value"),C.ok("boolean"==typeof i,"missing or invalid endian"),C.ok(void 0!==r&&null!==r,"missing offset"),C.ok(r+7<e.length,"Trying to write beyond buffer length"),_(n,1.7976931348623157e308,-1.7976931348623157e308)),t("./buffer_ieee754").writeIEEE754(e,n,r,i,52,8)}var C=t("assert");n.INSPECT_MAX_BYTES=50,r.byteLength=function(t,e){switch(e||"utf8"){case"hex":return t.length/2;case"utf8":case"utf-8":return o(t).length;case"ascii":return t.length;case"base64":return a(t).length;default:throw new Error("Unknown encoding")}},r.prototype.utf8Write=function(t,e,n){return r._charsWritten=u(o(t),this,e,n)},r.prototype.asciiWrite=function(t,e,n){return r._charsWritten=u(s(t),this,e,n)},r.prototype.base64Write=function(t,e,n){return r._charsWritten=u(a(t),this,e,n)},r.prototype.base64Slice=function(){var e=Array.prototype.slice.apply(this,arguments);return t("base64-js").fromByteArray(e)},r.prototype.utf8Slice=function(){for(var t=Array.prototype.slice.apply(this,arguments),e="",n="",r=0;r<t.length;)t[r]<=127?(e+=c(n)+String.fromCharCode(t[r]),n=""):n+="%"+t[r].toString(16),r++;return e+c(n)},r.prototype.asciiSlice=function(){for(var t=Array.prototype.slice.apply(this,arguments),e="",n=0;n<t.length;n++)e+=String.fromCharCode(t[n]);return e},r.prototype.inspect=function(){for(var t=[],e=this.length,r=0;e>r;r++)if(t[r]=i(this[r]),r==n.INSPECT_MAX_BYTES){t[r+1]="...";break}return"<SlowBuffer "+t.join(" ")+">"},r.prototype.hexSlice=function(t,e){var n=this.length;(!t||0>t)&&(t=0),(!e||0>e||e>n)&&(e=n);for(var r="",o=t;e>o;o++)r+=i(this[o]);return r},r.prototype.toString=function(t,e,n){if(t=String(t||"utf8").toLowerCase(),e=+e||0,"undefined"==typeof n&&(n=this.length),+n==e)return"";switch(t){case"hex":return this.hexSlice(e,n);case"utf8":case"utf-8":return this.utf8Slice(e,n);case"ascii":return this.asciiSlice(e,n);case"binary":return this.binarySlice(e,n);case"base64":return this.base64Slice(e,n);case"ucs2":case"ucs-2":return this.ucs2Slice(e,n);default:throw new Error("Unknown encoding")}},r.prototype.hexWrite=function(t,e,n){e=+e||0;var i=this.length-e;n?(n=+n,n>i&&(n=i)):n=i;var o=t.length;if(o%2)throw new Error("Invalid hex string");n>o/2&&(n=o/2);for(var s=0;n>s;s++){var a=parseInt(t.substr(2*s,2),16);if(isNaN(a))throw new Error("Invalid hex string");this[e+s]=a}return r._charsWritten=2*s,s},r.prototype.write=function(t,e,n,r){if(isFinite(e))isFinite(n)||(r=n,n=void 0);else{var i=r;r=e,e=n,n=i}e=+e||0;var o=this.length-e;switch(n?(n=+n,n>o&&(n=o)):n=o,r=String(r||"utf8").toLowerCase()){case"hex":return this.hexWrite(t,e,n);case"utf8":case"utf-8":return this.utf8Write(t,e,n);case"ascii":return this.asciiWrite(t,e,n);case"binary":return this.binaryWrite(t,e,n);case"base64":return this.base64Write(t,e,n);case"ucs2":case"ucs-2":return this.ucs2Write(t,e,n);default:throw new Error("Unknown encoding")}},r.prototype.slice=function(t,e){if(void 0===e&&(e=this.length),e>this.length)throw new Error("oob");if(t>e)throw new Error("oob");return new l(this,e-t,+t)},r.prototype.copy=function(t,e,n,r){for(var i=[],o=n;r>o;o++)C.ok("undefined"!=typeof this[o],"copying undefined buffer bytes!"),i.push(this[o]);for(var o=e;o<e+i.length;o++)t[o]=i[o-e]},n.SlowBuffer=r,n.Buffer=l,l.poolSize=8192;var O;l.isBuffer=function(t){return t instanceof l||t instanceof r},l.concat=function(t,e){if(!Array.isArray(t))throw new Error("Usage: Buffer.concat(list, [totalLength])\n       list should be an Array.");if(0===t.length)return new l(0);if(1===t.length)return t[0];if("number"!=typeof e){e=0;for(var n=0;n<t.length;n++){var r=t[n];e+=r.length}}for(var i=new l(e),o=0,n=0;n<t.length;n++){var r=t[n];r.copy(i,o),o+=r.length}return i},l.prototype.inspect=function(){for(var t=[],e=this.length,r=0;e>r;r++)if(t[r]=i(this.parent[r+this.offset]),r==n.INSPECT_MAX_BYTES){t[r+1]="...";break}return"<Buffer "+t.join(" ")+">"},l.prototype.get=function(t){if(0>t||t>=this.length)throw new Error("oob");return this.parent[this.offset+t]},l.prototype.set=function(t,e){if(0>t||t>=this.length)throw new Error("oob");return this.parent[this.offset+t]=e},l.prototype.write=function(t,e,n,i){if(isFinite(e))isFinite(n)||(i=n,n=void 0);else{var o=i;i=e,e=n,n=o}e=+e||0;var s=this.length-e;n?(n=+n,n>s&&(n=s)):n=s,i=String(i||"utf8").toLowerCase();var a;switch(i){case"hex":a=this.parent.hexWrite(t,this.offset+e,n);break;case"utf8":case"utf-8":a=this.parent.utf8Write(t,this.offset+e,n);break;case"ascii":a=this.parent.asciiWrite(t,this.offset+e,n);break;case"binary":a=this.parent.binaryWrite(t,this.offset+e,n);break;case"base64":a=this.parent.base64Write(t,this.offset+e,n);break;case"ucs2":case"ucs-2":a=this.parent.ucs2Write(t,this.offset+e,n);break;default:throw new Error("Unknown encoding")}return l._charsWritten=r._charsWritten,a},l.prototype.toString=function(t,e,n){switch(t=String(t||"utf8").toLowerCase(),"undefined"==typeof e||0>e?e=0:e>this.length&&(e=this.length),"undefined"==typeof n||n>this.length?n=this.length:0>n&&(n=0),e+=this.offset,n+=this.offset,t){case"hex":return this.parent.hexSlice(e,n);case"utf8":case"utf-8":return this.parent.utf8Slice(e,n);case"ascii":return this.parent.asciiSlice(e,n);case"binary":return this.parent.binarySlice(e,n);case"base64":return this.parent.base64Slice(e,n);case"ucs2":case"ucs-2":return this.parent.ucs2Slice(e,n);default:throw new Error("Unknown encoding")}},l.byteLength=r.byteLength,l.prototype.fill=function(t,e,n){if(t||(t=0),e||(e=0),n||(n=this.length),"string"==typeof t&&(t=t.charCodeAt(0)),"number"!=typeof t||isNaN(t))throw new Error("value is not a number");if(e>n)throw new Error("end < start");if(n===e)return 0;if(0==this.length)return 0;if(0>e||e>=this.length)throw new Error("start out of bounds");if(0>n||n>this.length)throw new Error("end out of bounds");return this.parent.fill(t,e+this.offset,n+this.offset)},l.prototype.copy=function(t,e,n,r){var i=this;if(n||(n=0),r||(r=this.length),e||(e=0),n>r)throw new Error("sourceEnd < sourceStart");if(r===n)return 0;if(0==t.length||0==i.length)return 0;if(0>e||e>=t.length)throw new Error("targetStart out of bounds");if(0>n||n>=i.length)throw new Error("sourceStart out of bounds");if(0>r||r>i.length)throw new Error("sourceEnd out of bounds");return r>this.length&&(r=this.length),t.length-e<r-n&&(r=t.length-e+n),this.parent.copy(t.parent,e+t.offset,n+this.offset,r+this.offset)},l.prototype.slice=function(t,e){if(void 0===e&&(e=this.length),e>this.length)throw new Error("oob");if(t>e)throw new Error("oob");return new l(this.parent,e-t,+t+this.offset)},l.prototype.utf8Slice=function(t,e){return this.toString("utf8",t,e)},l.prototype.binarySlice=function(t,e){return this.toString("binary",t,e)},l.prototype.asciiSlice=function(t,e){return this.toString("ascii",t,e)},l.prototype.utf8Write=function(t,e){return this.write(t,e,"utf8")},l.prototype.binaryWrite=function(t,e){return this.write(t,e,"binary")},l.prototype.asciiWrite=function(t,e){return this.write(t,e,"ascii")},l.prototype.readUInt8=function(t,e){var n=this;return e||(C.ok(void 0!==t&&null!==t,"missing offset"),C.ok(t<n.length,"Trying to read beyond buffer length")),n.parent[n.offset+t]},l.prototype.readUInt16LE=function(t,e){return d(this,t,!1,e)},l.prototype.readUInt16BE=function(t,e){return d(this,t,!0,e)},l.prototype.readUInt32LE=function(t,e){return m(this,t,!1,e)},l.prototype.readUInt32BE=function(t,e){return m(this,t,!0,e)},l.prototype.readInt8=function(t,e){var n,r=this;return e||(C.ok(void 0!==t&&null!==t,"missing offset"),C.ok(t<r.length,"Trying to read beyond buffer length")),n=128&r.parent[r.offset+t],n?-1*(255-r.parent[r.offset+t]+1):r.parent[r.offset+t]},l.prototype.readInt16LE=function(t,e){return g(this,t,!1,e)},l.prototype.readInt16BE=function(t,e){return g(this,t,!0,e)},l.prototype.readInt32LE=function(t,e){return b(this,t,!1,e)},l.prototype.readInt32BE=function(t,e){return b(this,t,!0,e)},l.prototype.readFloatLE=function(t,e){return v(this,t,!1,e)},l.prototype.readFloatBE=function(t,e){return v(this,t,!0,e)},l.prototype.readDoubleLE=function(t,e){return y(this,t,!1,e)},l.prototype.readDoubleBE=function(t,e){return y(this,t,!0,e)},l.prototype.writeUInt8=function(t,e,n){var r=this;n||(C.ok(void 0!==t&&null!==t,"missing value"),C.ok(void 0!==e&&null!==e,"missing offset"),C.ok(e<r.length,"trying to write beyond buffer length"),x(t,255)),r.parent[r.offset+e]=t},l.prototype.writeUInt16LE=function(t,e,n){w(this,t,e,!1,n)},l.prototype.writeUInt16BE=function(t,e,n){w(this,t,e,!0,n)},l.prototype.writeUInt32LE=function(t,e,n){S(this,t,e,!1,n)},l.prototype.writeUInt32BE=function(t,e,n){S(this,t,e,!0,n)},l.prototype.writeInt8=function(t,e,n){var r=this;n||(C.ok(void 0!==t&&null!==t,"missing value"),C.ok(void 0!==e&&null!==e,"missing offset"),C.ok(e<r.length,"Trying to write beyond buffer length"),E(t,127,-128)),t>=0?r.writeUInt8(t,e,n):r.writeUInt8(255+t+1,e,n)},l.prototype.writeInt16LE=function(t,e,n){j(this,t,e,!1,n)},l.prototype.writeInt16BE=function(t,e,n){j(this,t,e,!0,n)},l.prototype.writeInt32LE=function(t,e,n){k(this,t,e,!1,n)},l.prototype.writeInt32BE=function(t,e,n){k(this,t,e,!0,n)},l.prototype.writeFloatLE=function(t,e,n){A(this,t,e,!1,n)},l.prototype.writeFloatBE=function(t,e,n){A(this,t,e,!0,n)},l.prototype.writeDoubleLE=function(t,e,n){I(this,t,e,!1,n)},l.prototype.writeDoubleBE=function(t,e,n){I(this,t,e,!0,n)},r.prototype.readUInt8=l.prototype.readUInt8,r.prototype.readUInt16LE=l.prototype.readUInt16LE,r.prototype.readUInt16BE=l.prototype.readUInt16BE,r.prototype.readUInt32LE=l.prototype.readUInt32LE,r.prototype.readUInt32BE=l.prototype.readUInt32BE,r.prototype.readInt8=l.prototype.readInt8,r.prototype.readInt16LE=l.prototype.readInt16LE,r.prototype.readInt16BE=l.prototype.readInt16BE,r.prototype.readInt32LE=l.prototype.readInt32LE,r.prototype.readInt32BE=l.prototype.readInt32BE,r.prototype.readFloatLE=l.prototype.readFloatLE,r.prototype.readFloatBE=l.prototype.readFloatBE,r.prototype.readDoubleLE=l.prototype.readDoubleLE,r.prototype.readDoubleBE=l.prototype.readDoubleBE,r.prototype.writeUInt8=l.prototype.writeUInt8,r.prototype.writeUInt16LE=l.prototype.writeUInt16LE,r.prototype.writeUInt16BE=l.prototype.writeUInt16BE,r.prototype.writeUInt32LE=l.prototype.writeUInt32LE,r.prototype.writeUInt32BE=l.prototype.writeUInt32BE,r.prototype.writeInt8=l.prototype.writeInt8,r.prototype.writeInt16LE=l.prototype.writeInt16LE,r.prototype.writeInt16BE=l.prototype.writeInt16BE,r.prototype.writeInt32LE=l.prototype.writeInt32LE,r.prototype.writeInt32BE=l.prototype.writeInt32BE,r.prototype.writeFloatLE=l.prototype.writeFloatLE,r.prototype.writeFloatBE=l.prototype.writeFloatBE,r.prototype.writeDoubleLE=l.prototype.writeDoubleLE,r.prototype.writeDoubleBE=l.prototype.writeDoubleBE},{assert:1,"./buffer_ieee754":8,"base64-js":9}],9:[function(t,e){!function(){"use strict";function t(t){var e,n,i,o,s,a;if(t.length%4>0)throw"Invalid string. Length must be a multiple of 4";for(s=t.indexOf("="),s=s>0?t.length-s:0,a=[],i=s>0?t.length-4:t.length,e=0,n=0;i>e;e+=4,n+=3)o=r.indexOf(t[e])<<18|r.indexOf(t[e+1])<<12|r.indexOf(t[e+2])<<6|r.indexOf(t[e+3]),a.push((16711680&o)>>16),a.push((65280&o)>>8),a.push(255&o);return 2===s?(o=r.indexOf(t[e])<<2|r.indexOf(t[e+1])>>4,a.push(255&o)):1===s&&(o=r.indexOf(t[e])<<10|r.indexOf(t[e+1])<<4|r.indexOf(t[e+2])>>2,a.push(255&o>>8),a.push(255&o)),a}function n(t){function e(t){return r[63&t>>18]+r[63&t>>12]+r[63&t>>6]+r[63&t]}var n,i,o,s=t.length%3,a="";for(n=0,o=t.length-s;o>n;n+=3)i=(t[n]<<16)+(t[n+1]<<8)+t[n+2],a+=e(i);switch(s){case 1:i=t[t.length-1],a+=r[i>>2],a+=r[63&i<<4],a+="==";break;case 2:i=(t[t.length-2]<<8)+t[t.length-1],a+=r[i>>10],a+=r[63&i>>4],a+=r[63&i<<2],a+="="}return a}var r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";e.exports.toByteArray=t,e.exports.fromByteArray=n}()},{}]},{},[]),e.exports=t("buffer-browserify")},{}],72:[function(t,e){var n=e.exports={};n.nextTick=function(){var t="undefined"!=typeof window&&window.setImmediate,e="undefined"!=typeof window&&window.postMessage&&window.addEventListener;if(t)return function(t){return window.setImmediate(t)};if(e){var n=[];return window.addEventListener("message",function(t){if(t.source===window&&"process-tick"===t.data&&(t.stopPropagation(),n.length>0)){var e=n.shift();e()}},!0),function(t){n.push(t),window.postMessage("process-tick","*")}}return function(t){setTimeout(t,0)}}(),n.title="browser",n.browser=!0,n.env={},n.argv=[],n.binding=function(){throw new Error("process.binding is not supported")},n.cwd=function(){return"/"},n.chdir=function(){throw new Error("process.chdir is not supported")}},{}],73:[function(t,e){function n(t,e){return o.init(this,e,t)}var r=t("./vendor/lodash"),i=t("async"),o=t("jxt"),s=t("xhr"),a=new DOMParser;n.prototype={constructor:{value:n},NS:"http://docs.oasis-open.org/ns/xri/xrd-1.0",EL:"XRD",toString:o.toString,toJSON:o.toJSON,get subject(){return o.getSubText(this.xml,this.NS,"Subject")},get expires(){return new Date(o.getSubText(this.xml,this.NS,"Expires"))},get aliases(){return o.getMultiSubText(this.xml,this.NS,"Alias")},get properties(){var t={},e=o.find(this.xml,this.NS,"Property");return r.each(e,function(e){var n=o.getAttribute(e,"type");t[n]=e.textContent}),t},get links(){var t=[],e=o.find(this.xml,this.NS,"Link");return r.each(e,function(e){var n={rel:o.getAttribute(e,"rel"),href:o.getAttribute(e,"href"),type:o.getAttribute(e,"type"),template:o.getAttribute(e,"template"),titles:o.getSubLangText(e,this.NS,"Title","default"),properties:{}},i=o.find(e,this.NS,"Property");r.each(i,function(t){var e=o.getAttribute(t,"type");n.properties[e]=t.textContent}),t.push(n)}),t}},e.exports=function(t,e){"string"==typeof t&&(t={host:t}),t=r.extend({ssl:!0,json:!0},t);var o=t.ssl?"https://":"http://";i.parallel({json:function(e){return t.json?(s({uri:o+t.host+"/.well-known/host-meta.json"},function(t,n,r){if(t)return e();try{e("completed",JSON.parse(r))}catch(i){e(null,{})}}),void 0):e(null,{})},xrd:function(e){s({uri:o+t.host+"/.well-known/host-meta"},function(t,r){if(t)return e(null,{});try{var i=a.parseFromString(r.body,"application/xml").childNodes[0],o=new n({},i);e("completed",o.toJSON())}catch(s){e(null,{})}})}},function(t,n){if(t){if(Object.keys(n.json).length)return e(!1,n.json);if(Object.keys(n.xrd).length)return e(!1,n.xrd)}e("no-host-meta",{})})}},{"./vendor/lodash":79,async:59,jxt:74,xhr:76}],74:[function(t,e,n){var r=t("./vendor/lodash"),i=new XMLSerializer,o="http://www.w3.org/XML/1998/namespace",s={},a={},u={},c=n.find=function(t,e,n){var i=t.querySelectorAll(n);return r.filter(i,function(n){return n.namespaceURI===e&&n.parentNode==t})};n.findOrCreate=function(t,e,n){var r=c(t,e,n);if(r.length)return r[0];var i=document.createElementNS(e,n);return t.appendChild(i),i},n.init=function(t,e,n){return t.xml=e||document.createElementNS(t.NS,t.EL),t.xml.parentNode&&t.xml.parentNode.namespaceURI===t.NS||t.xml.setAttribute("xmlns",t.NS),t._extensions={},r.each(t.xml.childNodes,function(e){var n=e.namespaceURI+"|"+e.localName,r=a[n];if(void 0!==r){var i=r.prototype._name;t._extensions[i]=new r(null,e),t._extensions[i].parent=t}}),r.extend(t,n),t},n.getSubText=function(t,e,n){var r=c(t,e,n);if(!r)return"";for(var i=0;i<r.length;i++)if(r[i].namespaceURI===e)return r[i].textContent||"";return""},n.getMultiSubText=function(t,e,n,r){var i=c(t,e,n),o=[];r=r||function(t){return t.textContent||""};for(var s=0;s<i.length;s++)i[s].namespaceURI===e&&o.push(r(i[s]));return o},n.getSubLangText=function(t,e,n,r){var i=c(t,e,n);if(!i)return{};for(var s,a,u={},f=[],l=0;l<i.length;l++)a=i[l],a.namespaceURI===e&&(s=a.getAttributeNS(o,"lang")||r,f.push(s),u[s]=a.textContent||"");return u},n.setSubText=function(t,e,n,r){var i=c(t,e,n);if(i.length){for(var o=0;o<i.length;o++)if(i[o].namespaceURI===e){if(r)return i[o].textContent=r,void 0;t.removeChild(i[o])}}else if(r){var s=document.createElementNS(e,n);s.textContent=r,t.appendChild(s)}},n.setMultiSubText=function(t,e,n,i,o){var s=c(t,e,n),a=[];o=o||function(r){var i=document.createElementNS(e,n);i.textContent=r,t.appendChild(i)},a="string"==typeof i?(i||"").split("\n"):i,r.forEach(s,function(e){t.removeChild(e)}),r.forEach(a,function(t){t&&o(t)})},n.setSubLangText=function(t,e,n,r,i){var s,a,u=c(t,e,n);if(u.length)for(var f=0;f<u.length;f++)s=u[f],s.namespaceURI===e&&t.removeChild(s);if("string"==typeof r)s=document.createElementNS(e,n),s.textContent=r,t.appendChild(s);else if("object"==typeof r)for(a in r)r.hasOwnProperty(a)&&(s=document.createElementNS(e,n),a!==i&&s.setAttributeNS(o,"lang",a),s.textContent=r[a],t.appendChild(s))},n.getAttribute=function(t,e,n){return t.getAttribute(e)||n||""},n.setAttribute=function(t,e,n,r){n||r?t.setAttribute(e,n):t.removeAttribute(e)},n.getBoolAttribute=function(t,e,n){var r=t.getAttribute(e)||n||"";return"true"===r||"1"===r},n.setBoolAttribute=function(t,e,n){n?t.setAttribute(e,"1"):t.removeAttribute(e)},n.getSubAttribute=function(t,e,n,r,i){var o=c(t,e,n);if(!o)return"";for(var s=0;s<o.length;s++)if(o[s].namespaceURI===e)return o[s].getAttribute(r)||i||"";return""},n.setSubAttribute=function(t,e,n,r,i){var o=c(t,e,n);if(o.length){for(var s=0;s<o.length;s++)if(o[s].namespaceURI===e){if(i)return o[s].setAttribute(r,i),void 0;o[s].removeAttribute(r)}}else i&&(n=document.createElementNS(e,n),n.setAttribute(r,i),t.appendChild(n))},n.toString=function(){return i.serializeToString(this.xml)},n.toJSON=function(){var t,e={},n={constructor:!0,NS:!0,EL:!0,toString:!0,toJSON:!0,_extensions:!0,prototype:!0,xml:!0,parent:!0,_name:!0};for(t in this._extensions)this._extensions[t].toJSON&&(e[t]=this._extensions[t].toJSON());for(t in this)if(!n[t]&&!(u[this.NS+"|"+this.EL]||{})[t]&&!this._extensions[t]&&"_"!==t[0]){var r=this[t];if("function"==typeof r)continue;var i=Object.prototype.toString.call(r);
i.indexOf("Object")>=0?Object.keys(r).length>0&&(e[t]=r):i.indexOf("Array")>=0?r.length>0&&(e[t]=r):r&&(e[t]=r)}return e},n.extend=function(t,e){var i=t.prototype.NS+"|"+t.prototype.EL,o=e.prototype._name,s=e.prototype.NS+"|"+e.prototype.EL;a[s]=e,u[s]||(u[s]={}),u[i]||(u[i]={}),u[i][o]=e,t.prototype.__defineGetter__(o,function(){if(!this._extensions[o]){var t=n.find(this.xml,e.prototype.NS,e.prototype.EL);t.length?this._extensions[o]=new e(null,t[0]):(this._extensions[o]=new e,this.xml.appendChild(this._extensions[o].xml)),this._extensions[o].parent=this}return this._extensions[o]}),t.prototype.__defineSetter__(o,function(t){var e=this[o];r.extend(e,t)})},n.topLevel=function(t){var e=t.prototype.NS+"|"+t.prototype.EL;a[e]=t,s[e]=t},n.build=function(t){var e=s[t.namespaceURI+"|"+t.localName];return e?new e(null,t):void 0},n.XML_NS=o,n.TOP_LEVEL_LOOKUP=s,n.LOOKUP_EXT=u,n.LOOKUP=a},{"./vendor/lodash":75}],75:[function(e,n,r){var i=self;!function(e){function o(t){return"function"!=typeof t.toString&&"string"==typeof(t+"")}function s(t){t.length=0,v.length<w&&v.push(t)}function a(t){var e=t.k;e&&a(e),t.b=t.k=t.object=t.number=t.string=null,y.length<w&&y.push(t)}function u(){}function c(){var t=y.pop()||{a:"",b:null,c:"",k:null,"false":!1,d:"",e:"",f:"","null":!1,number:null,object:null,push:null,g:null,string:null,h:"","true":!1,undefined:!1,i:!1,j:!1};t.g=E,t.b=t.c=t.f=t.h="",t.e="r",t.i=!0,t.j=!!ee;for(var e,n=0;e=arguments[n];n++)for(var r in e)t[r]=e[r];n=t.a,t.d=/^[^,]+/.exec(n)[0],e=Function,n="return function("+n+"){",r="var m,r="+t.d+",C="+t.e+";if(!r)return C;"+t.h+";",t.b?(r+="var s=r.length;m=-1;if("+t.b+"){",Y.unindexedChars&&(r+="if(q(r)){r=r.split('')}"),r+="while(++m<s){"+t.f+";}}else{"):Y.nonEnumArgs&&(r+="var s=r.length;m=-1;if(s&&n(r)){while(++m<s){m+='';"+t.f+";}}else{"),Y.enumPrototypes&&(r+="var E=typeof r=='function';"),Y.enumErrorProps&&(r+="var D=r===j||r instanceof Error;");var i=[];if(Y.enumPrototypes&&i.push('!(E&&m=="prototype")'),Y.enumErrorProps&&i.push('!(D&&(m=="message"||m=="name"))'),t.i&&t.j)r+="var A=-1,B=z[typeof r]&&t(r),s=B?B.length:0;while(++A<s){m=B[A];",i.length&&(r+="if("+i.join("&&")+"){"),r+=t.f+";",i.length&&(r+="}"),r+="}";else if(r+="for(m in r){",t.i&&i.push("l.call(r, m)"),i.length&&(r+="if("+i.join("&&")+"){"),r+=t.f+";",i.length&&(r+="}"),r+="}",Y.nonEnumShadows){for(r+="if(r!==y){var h=r.constructor,p=r===(h&&h.prototype),e=r===H?G:r===j?i:J.call(r),v=w[e];",k=0;7>k;k++)r+="m='"+t.g[k]+"';if((!(p&&v[m])&&l.call(r,m))",t.i||(r+="||(!v[m]&&r[m]!==y[m])"),r+="){"+t.f+"}";r+="}"}return(t.b||Y.nonEnumArgs)&&(r+="}"),r+=t.c+";return C",e=e("i,j,l,n,o,q,t,u,y,z,w,G,H,J",n+r+"}"),a(t),e(C,P,z,f,Z,d,ee,u,U,M,K,L,D,J)}function f(t){return J.call(t)==_}function l(t,e,n,r,i,a){var c=n===x;if("function"==typeof n&&!c){n=u.createCallback(n,r,2);var h=n(t,e);if("undefined"!=typeof h)return!!h}if(t===e)return 0!==t||1/t==1/e;var d=typeof t,m=typeof e;if(t===t&&(!t||"function"!=d&&"object"!=d)&&(!e||"function"!=m&&"object"!=m))return!1;if(null==t||null==e)return t===e;if(m=J.call(t),d=J.call(e),m==_&&(m=N),d==_&&(d=N),m!=d)return!1;switch(m){case A:case I:return+t==+e;case O:return t!=+t?e!=+e:0==t?1/t==1/e:t==+e;case T:case L:return t==e+""}if(d=m==j,!d){if(z.call(t,"__wrapped__")||z.call(e,"__wrapped__"))return l(t.__wrapped__||t,e.__wrapped__||e,n,r,i,a);if(m!=N||!Y.nodeClass&&(o(t)||o(e)))return!1;var m=!Y.argsObject&&f(t)?Object:t.constructor,g=!Y.argsObject&&f(e)?Object:e.constructor;if(!(m==g||p(m)&&m instanceof m&&p(g)&&g instanceof g))return!1}for(g=!i,i||(i=v.pop()||[]),a||(a=v.pop()||[]),m=i.length;m--;)if(i[m]==t)return a[m]==e;var b=0,h=!0;if(i.push(t),a.push(e),d){if(m=t.length,b=e.length,h=b==t.length,!h&&!c)return h;for(;b--;)if(d=m,g=e[b],c)for(;d--&&!(h=l(t[d],g,n,r,i,a)););else if(!(h=l(t[b],g,n,r,i,a)))break;return h}return re(e,function(e,o,s){return z.call(s,o)?(b++,h=z.call(t,o)&&l(t[o],e,n,r,i,a)):void 0}),h&&!c&&re(t,function(t,e,n){return z.call(n,e)?h=-1<--b:void 0}),g&&(s(i),s(a)),h}function p(t){return"function"==typeof t}function h(t){return!(!t||!M[typeof t])}function d(t){return"string"==typeof t||J.call(t)==L}function m(t,e,n){var r=[];if(e=u.createCallback(e,n),Z(t)){n=-1;for(var i=t.length;++n<i;){var o=t[n];e(o,n,t)&&r.push(o)}}else ne(t,function(t,n,i){e(t,n,i)&&r.push(t)});return r}function g(t,e,n){if(e&&"undefined"==typeof n&&Z(t)){n=-1;for(var r=t.length;++n<r&&!1!==e(t[n],n,t););}else ne(t,e,n);return t}function b(t){return t}var v=[],y=[],x={},w=40,S=(S=/\bthis\b/)&&S.test(function(){return this})&&S,E="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" "),_="[object Arguments]",j="[object Array]",A="[object Boolean]",I="[object Date]",C="[object Error]",O="[object Number]",N="[object Object]",T="[object RegExp]",L="[object String]",M={"boolean":!1,"function":!0,object:!0,number:!1,string:!1,undefined:!1},q=M[typeof r]&&r,B=M[typeof n]&&n&&n.exports==q&&n,R=M[typeof i]&&i;!R||R.global!==R&&R.window!==R||(e=R);var P=Error.prototype,U=Object.prototype,D=String.prototype,R=RegExp("^"+(U.valueOf+"").replace(/[.*+?^${}()|[\]\\]/g,"\\$&").replace(/valueOf|for [^\]]+/g,".+?")+"$"),F=Function.prototype.toString,z=U.hasOwnProperty,W=U.propertyIsEnumerable,J=U.toString,G=R.test(G=J.bind)&&G,H=R.test(H=Object.create)&&H,X=R.test(X=Array.isArray)&&X,V=R.test(V=Object.keys)&&V,H=R.test(e.attachEvent),$=G&&!/\n|true/.test(G+H),K={};K[j]=K[I]=K[O]={constructor:!0,toLocaleString:!0,toString:!0,valueOf:!0},K[A]=K[L]={constructor:!0,toString:!0,valueOf:!0},K[C]=K["[object Function]"]=K[T]={constructor:!0,toString:!0},K[N]={constructor:!0},function(){for(var t=E.length;t--;){var e,n=E[t];for(e in K)z.call(K,e)&&!z.call(K[e],n)&&(K[e][n]=!1)}}();var Y=u.support={};!function(){var t=function(){this.x=1},e=[];t.prototype={valueOf:1,y:1};for(var n in new t)e.push(n);for(n in arguments);Y.argsObject=arguments.constructor==Object&&!(arguments instanceof Array),Y.argsClass=f(arguments),Y.enumErrorProps=W.call(P,"message")||W.call(P,"name"),Y.enumPrototypes=W.call(t,"prototype"),Y.fastBind=G&&!$,Y.nonEnumArgs=0!=n,Y.nonEnumShadows=!/valueOf/.test(e),Y.unindexedChars="xx"!="x"[0]+Object("x")[0];try{Y.nodeClass=!(J.call(document)==N&&!({toString:0}+""))}catch(r){Y.nodeClass=!0}}(1);var Q={a:"x,F,k",h:"var a=arguments,b=0,c=typeof k=='number'?2:a.length;while(++b<c){r=a[b];if(r&&z[typeof r]){",f:"if(typeof C[m]=='undefined')C[m]=r[m]",c:"}}"},H={a:"f,d,I",h:"d=d&&typeof I=='undefined'?d:u.createCallback(d,I)",b:"typeof s=='number'",f:"if(d(r[m],m,f)===false)return C"},R={h:"if(!z[typeof r])return C;"+H.h,b:!1};Y.argsClass||(f=function(t){return t?z.call(t,"callee"):!1});var Z=X||function(t){return t?"object"==typeof t&&J.call(t)==j:!1},te=c({a:"x",e:"[]",h:"if(!(z[typeof x]))return C",f:"C.push(m)"}),ee=V?function(t){return h(t)?Y.enumPrototypes&&"function"==typeof t||Y.nonEnumArgs&&t.length&&f(t)?te(t):V(t):[]}:te,ne=c(H),X=c(Q,{h:Q.h.replace(";",";if(c>3&&typeof a[c-2]=='function'){var d=u.createCallback(a[--c-1],a[c--],2)}else if(c>2&&typeof a[c-1]=='function'){d=a[--c]}"),f:"C[m]=d?d(C[m],r[m]):r[m]"}),re=c(H,R,{i:!1});p(/x/)&&(p=function(t){return"function"==typeof t&&"[object Function]"==J.call(t)}),u.assign=X,u.createCallback=function(t,e,n){if(null==t)return b;var r=typeof t;if("function"!=r){if("object"!=r)return function(e){return e[t]};var i=ee(t);return function(e){for(var n=i.length,r=!1;n--&&(r=l(e[i[n]],t[i[n]],x)););return r}}return"undefined"==typeof e||S&&!S.test(F.call(t))?t:1===n?function(n){return t.call(e,n)}:2===n?function(n,r){return t.call(e,n,r)}:4===n?function(n,r,i,o){return t.call(e,n,r,i,o)}:function(n,r,i){return t.call(e,n,r,i)}},u.filter=m,u.forEach=g,u.forIn=re,u.keys=ee,u.each=g,u.extend=X,u.select=m,u.identity=b,u.isArguments=f,u.isArray=Z,u.isEqual=l,u.isFunction=p,u.isObject=h,u.isString=d,u.VERSION="1.3.1","function"==typeof t&&"object"==typeof t.amd&&t.amd?(e._=u,t(function(){return u})):q&&!q.nodeType?B?(B.exports=u)._=u:q._=u:e._=u}(this)},{}],76:[function(t,e){function n(t,e){function n(){4===f.readyState&&i()}function i(){var t=null,n=f.statusCode=f.status,r=f.body=f.response||f.responseText||f.responseXML;if(0===n||n>=400&&600>n){var i=f.responseText||s[String(f.status).charAt(0)];t=new Error(i),t.statusCode=f.status}if(m)try{r=f.body=JSON.parse(r)}catch(o){}e(t,f,r)}function c(t){e(t,f)}"string"==typeof t&&(t={uri:t}),t=t||{},e=o(e);var f;t.cors?(f=new u,f.withCredentials=!0):f=new a;var l=f.url=t.uri,p=f.method=t.method||"GET",h=t.body||t.data,d=f.headers=t.headers||{},m=!1;return"json"in t&&(m=!0,d["Content-Type"]="application/json",h=JSON.stringify(t.json)),f.onreadystatechange=n,f.onload=i,f.onerror=c,f.onprogress=function(){},f.ontimeout=r,f.open(p,l),f.timeout="timeout"in t?t.timeout:5e3,f.setRequestHeader&&Object.keys(d).forEach(function(t){f.setRequestHeader(t,d[t])}),f.send(h),f}function r(){}var i=t("global/window"),o=t("once"),s={0:"Internal XMLHttpRequest Error",4:"4xx Client Error",5:"5xx Server Error"},a=i.XMLHttpRequest||r,u="withCredentials"in new a?i.XMLHttpRequest:i.XDomainRequest;e.exports=n},{"global/window":77,once:78}],77:[function(t,e){var n=self;e.exports="undefined"!=typeof window?window:"undefined"!=typeof n?n:{}},{}],78:[function(t,e){function n(t){var e=!1;return function(){return e?void 0:(e=!0,t.apply(this,arguments))}}e.exports=n,n.proto=n(function(){Object.defineProperty(Function.prototype,"once",{value:function(){return n(this)},configurable:!0})})},{}],79:[function(e,n,r){var i=self;!function(e){function o(t){return"function"!=typeof t.toString&&"string"==typeof(t+"")}function s(t){t.length=0,b.length<x&&b.push(t)}function a(t){var e=t.k;e&&a(e),t.b=t.k=t.object=t.number=t.string=null,v.length<x&&v.push(t)}function u(){}function c(){var t=v.pop()||{a:"",b:null,c:"",k:null,"false":!1,d:"",e:"",f:"","null":!1,number:null,object:null,push:null,g:null,string:null,h:"","true":!1,undefined:!1,i:!1,j:!1};t.g=S,t.b=t.c=t.f=t.h="",t.e="r",t.i=!0,t.j=!!te;for(var e,n=0;e=arguments[n];n++)for(var r in e)t[r]=e[r];n=t.a,t.d=/^[^,]+/.exec(n)[0],e=Function,n="return function("+n+"){",r="var m,r="+t.d+",C="+t.e+";if(!r)return C;"+t.h+";",t.b?(r+="var s=r.length;m=-1;if("+t.b+"){",K.unindexedChars&&(r+="if(q(r)){r=r.split('')}"),r+="while(++m<s){"+t.f+";}}else{"):K.nonEnumArgs&&(r+="var s=r.length;m=-1;if(s&&n(r)){while(++m<s){m+='';"+t.f+";}}else{"),K.enumPrototypes&&(r+="var E=typeof r=='function';"),K.enumErrorProps&&(r+="var D=r===j||r instanceof Error;");var i=[];if(K.enumPrototypes&&i.push('!(E&&m=="prototype")'),K.enumErrorProps&&i.push('!(D&&(m=="message"||m=="name"))'),t.i&&t.j)r+="var A=-1,B=z[typeof r]&&t(r),s=B?B.length:0;while(++A<s){m=B[A];",i.length&&(r+="if("+i.join("&&")+"){"),r+=t.f+";",i.length&&(r+="}"),r+="}";else if(r+="for(m in r){",t.i&&i.push("l.call(r, m)"),i.length&&(r+="if("+i.join("&&")+"){"),r+=t.f+";",i.length&&(r+="}"),r+="}",K.nonEnumShadows){for(r+="if(r!==y){var h=r.constructor,p=r===(h&&h.prototype),e=r===H?G:r===j?i:J.call(r),v=w[e];",k=0;7>k;k++)r+="m='"+t.g[k]+"';if((!(p&&v[m])&&l.call(r,m))",t.i||(r+="||(!v[m]&&r[m]!==y[m])"),r+="){"+t.f+"}";r+="}"}return(t.b||K.nonEnumArgs)&&(r+="}"),r+=t.c+";return C",e=e("i,j,l,n,o,q,t,u,y,z,w,G,H,J",n+r+"}"),a(t),e(I,R,F,f,Q,d,te,u,P,L,$,T,U,W)}function f(t){return W.call(t)==E}function l(t,e,n,r,i,a){var c=n===y;if("function"==typeof n&&!c){n=u.createCallback(n,r,2);var h=n(t,e);if("undefined"!=typeof h)return!!h}if(t===e)return 0!==t||1/t==1/e;var d=typeof t,m=typeof e;if(t===t&&(!t||"function"!=d&&"object"!=d)&&(!e||"function"!=m&&"object"!=m))return!1;if(null==t||null==e)return t===e;if(m=W.call(t),d=W.call(e),m==E&&(m=O),d==E&&(d=O),m!=d)return!1;switch(m){case j:case A:return+t==+e;case C:return t!=+t?e!=+e:0==t?1/t==1/e:t==+e;case N:case T:return t==e+""}if(d=m==_,!d){if(F.call(t,"__wrapped__")||F.call(e,"__wrapped__"))return l(t.__wrapped__||t,e.__wrapped__||e,n,r,i,a);if(m!=O||!K.nodeClass&&(o(t)||o(e)))return!1;var m=!K.argsObject&&f(t)?Object:t.constructor,g=!K.argsObject&&f(e)?Object:e.constructor;if(!(m==g||p(m)&&m instanceof m&&p(g)&&g instanceof g))return!1}for(g=!i,i||(i=b.pop()||[]),a||(a=b.pop()||[]),m=i.length;m--;)if(i[m]==t)return a[m]==e;var v=0,h=!0;if(i.push(t),a.push(e),d){if(m=t.length,v=e.length,h=v==t.length,!h&&!c)return h;for(;v--;)if(d=m,g=e[v],c)for(;d--&&!(h=l(t[d],g,n,r,i,a)););else if(!(h=l(t[v],g,n,r,i,a)))break;return h}return ne(e,function(e,o,s){return F.call(s,o)?(v++,h=F.call(t,o)&&l(t[o],e,n,r,i,a)):void 0}),h&&!c&&ne(t,function(t,e,n){return F.call(n,e)?h=-1<--v:void 0}),g&&(s(i),s(a)),h}function p(t){return"function"==typeof t}function h(t){return!(!t||!L[typeof t])}function d(t){return"string"==typeof t||W.call(t)==T}function m(t,e,n){if(e&&"undefined"==typeof n&&Q(t)){n=-1;for(var r=t.length;++n<r&&!1!==e(t[n],n,t););}else ee(t,e,n);return t}function g(t){return t}var b=[],v=[],y={},x=40,w=(w=/\bthis\b/)&&w.test(function(){return this})&&w,S="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" "),E="[object Arguments]",_="[object Array]",j="[object Boolean]",A="[object Date]",I="[object Error]",C="[object Number]",O="[object Object]",N="[object RegExp]",T="[object String]",L={"boolean":!1,"function":!0,object:!0,number:!1,string:!1,undefined:!1},M=L[typeof r]&&r,q=L[typeof n]&&n&&n.exports==M&&n,B=L[typeof i]&&i;!B||B.global!==B&&B.window!==B||(e=B);var R=Error.prototype,P=Object.prototype,U=String.prototype,B=RegExp("^"+(P.valueOf+"").replace(/[.*+?^${}()|[\]\\]/g,"\\$&").replace(/valueOf|for [^\]]+/g,".+?")+"$"),D=Function.prototype.toString,F=P.hasOwnProperty,z=P.propertyIsEnumerable,W=P.toString,J=B.test(J=W.bind)&&J,G=B.test(G=Object.create)&&G,H=B.test(H=Array.isArray)&&H,X=B.test(X=Object.keys)&&X,G=B.test(e.attachEvent),V=J&&!/\n|true/.test(J+G),$={};$[_]=$[A]=$[C]={constructor:!0,toLocaleString:!0,toString:!0,valueOf:!0},$[j]=$[T]={constructor:!0,toString:!0,valueOf:!0},$[I]=$["[object Function]"]=$[N]={constructor:!0,toString:!0},$[O]={constructor:!0},function(){for(var t=S.length;t--;){var e,n=S[t];for(e in $)F.call($,e)&&!F.call($[e],n)&&($[e][n]=!1)}}();var K=u.support={};!function(){var t=function(){this.x=1},e=[];t.prototype={valueOf:1,y:1};for(var n in new t)e.push(n);for(n in arguments);K.argsObject=arguments.constructor==Object&&!(arguments instanceof Array),K.argsClass=f(arguments),K.enumErrorProps=z.call(R,"message")||z.call(R,"name"),K.enumPrototypes=z.call(t,"prototype"),K.fastBind=J&&!V,K.nonEnumArgs=0!=n,K.nonEnumShadows=!/valueOf/.test(e),K.unindexedChars="xx"!="x"[0]+Object("x")[0];try{K.nodeClass=!(W.call(document)==O&&!({toString:0}+""))}catch(r){K.nodeClass=!0}}(1);var Y={a:"x,F,k",h:"var a=arguments,b=0,c=typeof k=='number'?2:a.length;while(++b<c){r=a[b];if(r&&z[typeof r]){",f:"if(typeof C[m]=='undefined')C[m]=r[m]",c:"}}"},G={a:"f,d,I",h:"d=d&&typeof I=='undefined'?d:u.createCallback(d,I)",b:"typeof s=='number'",f:"if(d(r[m],m,f)===false)return C"},B={h:"if(!z[typeof r])return C;"+G.h,b:!1};K.argsClass||(f=function(t){return t?F.call(t,"callee"):!1});var Q=H||function(t){return t?"object"==typeof t&&W.call(t)==_:!1},Z=c({a:"x",e:"[]",h:"if(!(z[typeof x]))return C",f:"C.push(m)"}),te=X?function(t){return h(t)?K.enumPrototypes&&"function"==typeof t||K.nonEnumArgs&&t.length&&f(t)?Z(t):X(t):[]}:Z,ee=c(G),H=c(Y,{h:Y.h.replace(";",";if(c>3&&typeof a[c-2]=='function'){var d=u.createCallback(a[--c-1],a[c--],2)}else if(c>2&&typeof a[c-1]=='function'){d=a[--c]}"),f:"C[m]=d?d(C[m],r[m]):r[m]"}),ne=c(G,B,{i:!1});p(/x/)&&(p=function(t){return"function"==typeof t&&"[object Function]"==W.call(t)}),u.assign=H,u.createCallback=function(t,e,n){if(null==t)return g;var r=typeof t;if("function"!=r){if("object"!=r)return function(e){return e[t]};var i=te(t);return function(e){for(var n=i.length,r=!1;n--&&(r=l(e[i[n]],t[i[n]],y)););return r}}return"undefined"==typeof e||w&&!w.test(D.call(t))?t:1===n?function(n){return t.call(e,n)}:2===n?function(n,r){return t.call(e,n,r)}:4===n?function(n,r,i,o){return t.call(e,n,r,i,o)}:function(n,r,i){return t.call(e,n,r,i)}},u.forEach=m,u.forIn=ne,u.keys=te,u.each=m,u.extend=H,u.identity=g,u.isArguments=f,u.isArray=Q,u.isEqual=l,u.isFunction=p,u.isObject=h,u.isString=d,u.VERSION="1.3.1","function"==typeof t&&"object"==typeof t.amd&&t.amd?(e._=u,t(function(){return u})):M&&!M.nodeType?q?(q.exports=u)._=u:M._=u:e._=u}(this)},{}],80:[function(t,e){function n(t){var e=this;t=t||{};var n=this.config={debug:!1,peerConnectionConfig:{},peerConnectionConstraints:{optional:[{DtlsSrtpKeyAgreement:!0},{RtpDataChannels:!1}]},autoAdjustMic:!1,media:{audio:!0,video:!0}};this.MediaSession=f,this.jid=t.jid,this.sessions={},this.peers={},this.screenSharingSupport=i.screenSharing,this.logger=function(){return t.debug?t.logger||console:t.logger||u}();for(var r in t)n[r]=t[r];this.capabilities=["urn:xmpp:jingle:1"],i.support?this.capabilities=["urn:xmpp:jingle:1","urn:xmpp:jingle:apps:rtp:1","urn:xmpp:jingle:apps:rtp:audio","urn:xmpp:jingle:apps:rtp:video","urn:xmpp:jingle:apps:rtp:rtcb-fb:0","urn:xmpp:jingle:apps:dtls:0","urn:xmpp:jingle:transports:ice-udp:1","urn:ietf:rfc:3264"]:this.logger.error("WebRTC not supported"),s.call(this),this.config.debug&&this.on("*",function(t,n,r){var i;i=e.config.logger===u?console:e.logger,i.log("jingleevent:",t,n,r)})}var r=t("underscore"),i=t("webrtcsupport"),o=t("getusermedia");t("jingle-rtcpeerconnection");var s=t("wildemitter");t("hark");var a=t("mediastream-gain"),u=t("mockconsole"),c=t("./session/session"),f=t("./session/media");n.prototype=Object.create(s.prototype,{constructor:{value:n}}),n.prototype.startLocalMedia=function(t,e){var n=this,r=t||{video:!0,audio:!0};o(r,function(t,i){t||(r.audio&&n.config.detectSpeakingEvents&&n.setupAudioMonitor(i),n.localStream=i,n.config.autoAdjustMic&&(n.gainController=new a(i),n.setMicIfEnabled(.5)),n.emit("localStream",i)),e&&e(t,i)})},n.prototype.stopLocalMedia=function(){this.localStream&&(this.localStream.stop(),this.emit("localStreamStopped"))},n.prototype.setupAudioMonitor=function(t){this.logger.log("Setup audio");var e,n=hark(t),r=this;n.on("speaking",function(){r.hardMuted||(r.setMicIfEnabled(1),r.emit("speaking"))}),n.on("stopped_speaking",function(){r.hardMuted||(e&&clearTimeout(e),e=setTimeout(function(){r.setMicIfEnabled(.5),r.emit("stoppedSpeaking")},1e3))})},n.prototype.setMicIfEnabled=function(t){this.config.autoAdjustMic&&this.gainController.setGain(t)},n.prototype.sendError=function(t,e,n){n.type="cancel",this.emit("send",{to:t,id:e,type:"error",error:n})},n.prototype.process=function(t){var e=this;if("error"===t.type)return this.emit("error",t);if("result"!==t.type){var n,i,o,s=t.jingle.sid,a=t.jingle.action,u=t.jingle.contents||[],l=r.map(u,function(t){return(t.description||{}).descType}),p=this.sessions[s]||null,h=t.from.full||t.from,d=t.id;if("session-initiate"!==a){if(!p)return e.logger.error("Unknown session"),this.sendError(h,d,{condition:"item-not-found",jingleCondition:"unknown-session"});if(p.peer!==h||p.ended)return e.logger.error("Session has ended, or action has wrong sender"),this.sendError(h,d,{condition:"item-not-found",jingleCondition:"unknown-session"});if("session-accept"===a&&!p.pending)return e.logger.error("Tried to accept session twice"),this.sendError(h,d,{condition:"unexpected-request",jingleCondition:"out-of-order"});if("session-terminate"!==a&&p.pendingAction&&(e.logger.error("Tie break during pending request"),p.isInitiator))return this.sendError(h,d,{condition:"conflict",jingleCondition:"tie-break"})}else{if(p)return p.peer!==h?(e.logger.error("Duplicate sid from new sender"),this.sendError(h,d,{condition:"service-unavailable"})):p.pending&&this.jid>p.peer?(e.logger.error("Tie break new session because of duplicate sids"),this.sendError(h,d,{condition:"conflict",jingleCondition:"tie-break"})):(e.logger.error("Someone is doing this wrong"),this.sendError(h,d,{condition:"unexpected-request",jingleCondition:"out-of-order"}));if(Object.keys(this.peers[h]||{}).length){n=Object.keys(this.peers[h]);for(var m=0;m<n.length;m++)if(i=n[m],o=this.sessions[i],o.pending&&r.intersection(l,o.contentTypes).length&&i>s)return e.logger.error("Tie break"),this.sendError(h,d,{condition:"conflict",jingleCondition:"tie-break"})}}if("session-initiate"===a){var g={sid:s,peer:h,initiator:!1,parent:this};p=l.indexOf("rtp")>=0?new f(g):new c(g),this.sessions[s]=p,this.peers[h]||(this.peers[h]=[]),this.peers[h].push(p)}p.process(a,t.jingle,function(n){n?(e.logger.error("Could not process",t,n),e.sendError(h,d,n)):(e.emit("send",{to:h,id:d,type:"result"}),"session-initiate"===a&&e.emit("incoming",p))})}},n.prototype.createMediaSession=function(t,e){var n=new f({sid:e,peer:t,initiator:!0,parent:this});return e=n.sid,this.sessions[e]=n,this.peers[t]||(this.peers[t]=[]),this.peers[t].push(n),this.emit("outgoing",n),n},e.exports=n},{"./session/media":93,"./session/session":94,getusermedia:81,hark:82,"jingle-rtcpeerconnection":83,"mediastream-gain":85,mockconsole:87,underscore:113,webrtcsupport:92,wildemitter:114}],81:[function(t,e){var n=navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia||navigator.msGetUserMedia;e.exports=function(t,e){var r,i=2===arguments.length,o={video:!0,audio:!0},s="PERMISSION_DENIED",a="CONSTRAINT_NOT_SATISFIED";return i||(e=t,t=o),n?(n.call(navigator,t,function(t){e(null,t)},function(t){var n;"string"==typeof t?(n=new Error("NavigatorUserMediaError"),n.name=t===s?s:a):(n=t,n.name||(t.name=n[s]?s:a)),e(n)}),void 0):(r=new Error("NavigatorUserMediaError"),r.name="NOT_SUPPORTED_ERROR",e(r))}},{}],82:[function(t,e){function n(t,e){var n=-1/0;t.getFloatFrequencyData(e);for(var r=0,i=e.length;i>r;r++)e[r]>n&&e[r]<0&&(n=e[r]);return n}var r=t("wildemitter");e.exports=function(t,e){var i=new r;if(!window.webkitAudioContext)return i;var o,s,a,e=e||{},u=e.smoothing||.5,c=e.interval||100,f=e.threshold,l=e.play,p=new webkitAudioContext;a=p.createAnalyser(),a.fftSize=512,a.smoothingTimeConstant=u,s=new Float32Array(a.fftSize),t.jquery&&(t=t[0]),t instanceof HTMLAudioElement?(o=p.createMediaElementSource(t),"undefined"==typeof l&&(l=!0),f=f||-65):(o=p.createMediaStreamSource(t),f=f||-45),o.connect(a),l&&a.connect(p.destination),i.speaking=!1,i.setThreshold=function(t){f=t},i.setInterval=function(t){c=t};var h=function(){setTimeout(function(){var t=n(a,s);i.emit("volume_change",t,f),t>f?i.speaking||(i.speaking=!0,i.emit("speaking")):i.speaking&&(i.speaking=!1,i.emit("stopped_speaking")),h()},c)};return h(),i}},{wildemitter:114}],83:[function(t,e){function n(){this.sid="",this.isInitiator=!0,this.localDescription={contents:[]},this.remoteDescription={contents:[]},o.call(this)}var r=t("underscore"),i=t("webrtcsupport"),o=t("rtcpeerconnection"),s=t("sdp-jingle-json");n.prototype=Object.create(o.prototype,{constructor:{value:n}}),n.prototype.offer=function(t,e){var n=this,r=2===arguments.length,i=r?t:{mandatory:{OfferToReceiveAudio:!0,OfferToReceiveVideo:!0}},o=r?e:t;this.pc.createOffer(function(t){t.sdp=n._applySdpHack(t.sdp),n.pc.setLocalDescription(t);var e=s.toSessionJSON(t.sdp,n.isInitiator?"initiator":"responder");n.localDescription=e;var r={type:"offer",sdp:t.sdp,json:e};n.emit("offer",r),o&&o(null,r)},function(t){n.emit("error",t),o&&o(t)},i)},o.prototype.handleAnswer=function(t,e){e=e||function(){};var n=this;t.sdp=s.toSessionSDP(t.json,this.sid),n.remoteDescription=t.json,this.pc.setRemoteDescription(new i.SessionDescription(t),function(){e(null)},function(t){e(t)})},n.prototype._answer=function(t,e,n){n=n||function(){};var r=this;t.sdp=s.toSessionSDP(t.json,r.sid),r.remoteDescription=t.json,this.pc.setRemoteDescription(new i.SessionDescription(t),function(){r.pc.createAnswer(function(t){t.sdp=r._applySdpHack(t.sdp),r.pc.setLocalDescription(t);var e=s.toSessionJSON(t.sdp);r.localDescription=e;var i={type:"answer",sdp:t.sdp,json:e};r.emit("answer",i),n&&n(null,i)},function(t){r.emit("error",t),n&&n(t)},e)},function(t){n(t)})},n.prototype.processIce=function(t,e){e=e||function(){};var n=this,o=r.map(this.remoteDescription.contents,function(t){return t.name}),a=t.contents||[];a.forEach(function(t){var e=t.transport||{},r=e.candidates||[],a=o.indexOf(t.name),u=t.name;r.forEach(function(t){var e=s.toCandidateSDP(t)+"\r\n",r={candidate:e,sdpMLineIndex:a,sdpMid:u};n.pc.addIceCandidate(new i.IceCandidate(r))})}),e()},n.prototype._onIce=function(t){var e=this;if(t.candidate){var n=t.candidate;this.emit("ice",{contents:[{name:n.sdpMid,creator:e.isInitiator?"initiator":"responder",transport:{transType:"iceUdp",candidates:[s.toCandidateJSON(n.candidate)]}}]})}else this.emit("endOfCandidates")},e.exports=n},{rtcpeerconnection:84,"sdp-jingle-json":88,underscore:113,webrtcsupport:92}],84:[function(t,e){function n(t,e){var n;this.pc=new i.PeerConnection(t,e),r.call(this),this.pc.onremovestream=this.emit.bind(this,"removeStream"),this.pc.onnegotiationneeded=this.emit.bind(this,"negotiationNeeded"),this.pc.oniceconnectionstatechange=this.emit.bind(this,"iceConnectionStateChange"),this.pc.onsignalingstatechange=this.emit.bind(this,"signalingStateChange"),this.pc.onaddstream=this._onAddStream.bind(this),this.pc.onicecandidate=this._onIce.bind(this),this.pc.ondatachannel=this._onDataChannel.bind(this),this.config={debug:!1,sdpHack:!0};for(n in t)this.config[n]=t[n];this.config.debug&&this.on("*",function(){var e=t.logger||console;e.log("PeerConnection event:",arguments)})}var r=t("wildemitter"),i=t("webrtcsupport");n.prototype=Object.create(r.prototype,{constructor:{value:n}}),n.prototype.addStream=function(t){this.localStream=t,this.pc.addStream(t)},n.prototype.processIce=function(t){this.pc.addIceCandidate(new i.IceCandidate(t))},n.prototype.offer=function(t,e){var n=this,r=2===arguments.length,i=r?t:{mandatory:{OfferToReceiveAudio:!0,OfferToReceiveVideo:!0}},o=r?e:t;this.pc.createOffer(function(t){t.sdp=n._applySdpHack(t.sdp),n.pc.setLocalDescription(t),n.emit("offer",t),o&&o(null,t)},function(t){n.emit("error",t),o&&o(t)},i)},n.prototype.answerAudioOnly=function(t,e){var n={mandatory:{OfferToReceiveAudio:!0,OfferToReceiveVideo:!1}};this._answer(t,n,e)},n.prototype.answerBroadcastOnly=function(t,e){var n={mandatory:{OfferToReceiveAudio:!1,OfferToReceiveVideo:!1}};this._answer(t,n,e)},n.prototype.answer=function(t,e,n){var r=3===arguments.length,i=r?n:e,o=r?e:{mandatory:{OfferToReceiveAudio:!0,OfferToReceiveVideo:!0}};this._answer(t,o,i)},n.prototype.handleAnswer=function(t){this.pc.setRemoteDescription(new i.SessionDescription(t))},n.prototype.close=function(){this.pc.close(),this.emit("close")},n.prototype._answer=function(t,e,n){var r=this;this.pc.setRemoteDescription(new i.SessionDescription(t)),this.pc.createAnswer(function(t){t.sdp=r._applySdpHack(t.sdp),r.pc.setLocalDescription(t),r.emit("answer",t),n&&n(null,t)},function(t){r.emit("error",t),n&&n(t)},e)},n.prototype._onIce=function(t){t.candidate?this.emit("ice",t.candidate):this.emit("endOfCandidates")},n.prototype._onDataChannel=function(t){this.emit("addChannel",t.channel)},n.prototype._onAddStream=function(t){this.remoteStream=t.stream,this.emit("addStream",t)},n.prototype._applySdpHack=function(t){if(!this.config.sdpHack)return t;var e=t.split("b=AS:30");return 2===e.length?e[0]+"b=AS:102400"+e[1]:t},n.prototype.createDataChannel=function(t,e){e||(e={});var n,r,o=!!e.reliable,s=e.protocol||"text/plain",a=!(!e.negotiated&&!e.preset);return"moz"===i.prefix?(n=o?{protocol:s,preset:a,stream:t}:{},r=this.pc.createDataChannel(t,n),r.binaryType="blob"):(n=o?{reliable:!0}:{reliable:!1},r=this.pc.createDataChannel(t,n)),r},e.exports=n},{webrtcsupport:92,wildemitter:114}],85:[function(t,e){function n(t){if(this.support=r.webAudio&&r.mediaStream,this.gain=1,this.support){var e=this.context=new r.AudioContext;this.microphone=e.createMediaStreamSource(t),this.gainFilter=e.createGain(),this.destination=e.createMediaStreamDestination(),this.outputStream=this.destination.stream,this.microphone.connect(this.gainFilter),this.gainFilter.connect(this.destination),t.removeTrack(t.getAudioTracks()[0]),t.addTrack(this.outputStream.getAudioTracks()[0])}this.stream=t}var r=t("webrtcsupport");n.prototype.setGain=function(t){this.support&&(this.gainFilter.gain.value=t,this.gain=t)},n.prototype.getGain=function(){return this.gain},n.prototype.off=function(){return this.setGain(0)},n.prototype.on=function(){this.setGain(1)},e.exports=n},{webrtcsupport:86}],86:[function(t,e){var n=window.mozRTCPeerConnection||window.webkitRTCPeerConnection||window.RTCPeerConnection,r=window.mozRTCIceCandidate||window.RTCIceCandidate,i=window.mozRTCSessionDescription||window.RTCSessionDescription,o=function(){return window.mozRTCPeerConnection?"moz":window.webkitRTCPeerConnection?"webkit":void 0}(),s=window.webkitMediaStream||window.MediaStream,a=navigator.userAgent.match("Chrome")&&parseInt(navigator.userAgent.match(/Chrome\/(.*) /)[1],10)>=26,u=window.webkitAudioContext||window.AudioContext;e.exports={support:!!n,dataChannel:!!(n&&n.prototype&&n.prototype.createDataChannel),prefix:o,webAudio:!(!u||!u.prototype.createMediaStreamSource),mediaStream:!(!s||!s.prototype.removeTrack),screenSharing:a,AudioContext:u,PeerConnection:n,SessionDescription:i,IceCandidate:r}},{}],87:[function(t,e){for(var n="assert,count,debug,dir,dirxml,error,exception,group,groupCollapsed,groupEnd,info,log,markTimeline,profile,profileEnd,time,timeEnd,trace,warn".split(","),r=n.length,i=function(){},o={};r--;)o[n[r]]=i;e.exports=o},{}],88:[function(t,e,n){var r=t("./lib/tosdp"),i=t("./lib/tojson");n.toSessionSDP=r.toSessionSDP,n.toMediaSDP=r.toMediaSDP,n.toCandidateSDP=r.toCandidateSDP,n.toSessionJSON=i.toSessionJSON,n.toMediaJSON=i.toMediaJSON,n.toCandidateJSON=i.toCandidateJSON},{"./lib/tojson":90,"./lib/tosdp":91}],89:[function(t,e,n){n.lines=function(t){return t.split("\r\n").filter(function(t){return t.length>0})},n.findLine=function(t,e,n){for(var r=t.length,i=0;i<e.length;i++)if(e[i].substr(0,r)===t)return e[i];if(!n)return!1;for(var o=0;o<n.length;o++)if(n[o].substr(0,r)===t)return n[o];return!1},n.findLines=function(t,e){for(var n=[],r=t.length,i=0;i<e.length;i++)e[i].substr(0,r)===t&&n.push(e[i]);return n},n.mline=function(t){for(var e=t.substr(2).split(" "),n={media:e[0],port:e[1],proto:e[2],formats:[]},r=3;r<e.length;r++)e[r]&&n.formats.push(e[r]);return n},n.rtpmap=function(t){var e=t.substr(9).split(" "),n={id:e.shift()};return e=e[0].split("/"),n.name=e[0],n.clockrate=e[1],n.channels=3==e.length?e[2]:"1",n},n.fmtp=function(t){for(var e,n,r,i=t.substr(t.indexOf(" ")+1).split(";"),o=[],s=0;s<i.length;s++)e=i[s].split("="),n=e[0].trim(),r=e[1],n&&r?o.push({key:n,value:r}):n&&o.push({key:"",value:n});return o},n.crypto=function(t){var e=t.substr(9).split(" "),n={tag:e[0],cipherSuite:e[1],keyParams:e[2],sessionParams:e.slice(3).join(" ")};return n},n.fingerprint=function(t){var e=t.substr(14).split(" ");return{hash:e[0],value:e[1]}},n.extmap=function(t){var e=t.substr(9).split(" "),n={},r=e.shift(),i=r.indexOf("/");return i>=0?(n.id=r.substr(0,i),n.senders=r.substr(i)):(n.id=r,n.senders="sendrecv"),n.uri=e.shift(),n},n.rtcpfb=function(t){var e=t.substr(10).split(" "),n={};return n.id=e.shift(),n.type=e.shift(),"trr-int"===n.type?n.value=e.shift():n.subtype=e.shift(),n.parameters=e,n},n.candidate=function(t){for(var e=t.substring(12).split(" "),n={foundation:e[0],component:e[1],protocol:e[2].toLowerCase(),priority:e[3],ip:e[4],port:e[5],type:e[7]},r=8;r<e.length;r+=2)"raddr"===e[r]?n.relAddr=e[r+1]:"rport"===e[r]?n.relPort=e[r+1]:"generation"===e[r]&&(n.generation=e[r+1]);return n.network="1",n},n.ssrc=function(t){for(var e,n,r=[],i={},o=0;o<t.length;o++){e=t[o].substr(7).split(" "),n=e.shift(),e=e.join(" ").split(":");var s=e.shift(),a=e.join(":")||null;i[n]||(i[n]={}),i[n][s]=a}for(n in i){var u=i[n];u.ssrc=n,r.push(u)}return r},n.grouping=function(t){for(var e,n=[],r=0;r<t.length;r++)e=t[r].substr(8).split(" "),n.push({semantics:e.shift(),contents:e});return n}},{}],90:[function(t,e,n){var r=t("./parsers"),i=Math.random();
n.toSessionJSON=function(t,e){for(var i=t.split("\r\nm="),o=1;o<i.length;o++)i[o]="m="+i[o],o!==i.length-1&&(i[o]+="\r\n");var s=i.shift()+"\r\n",a=r.lines(s),u={},c=[];i.forEach(function(t){c.push(n.toMediaJSON(t,s,e))}),u.contents=c;var f=r.findLines("a=group:",a);return f.length&&(u.groupings=r.grouping(f)),u},n.toMediaJSON=function(t,e,i){var o=r.lines(t),s=r.lines(e),a=r.mline(o[0]),u={creator:i,name:a.media,description:{descType:"rtp",media:a.media,payloads:[],encryption:[],feedback:[],headerExtensions:[]},transport:{transType:"iceUdp"}},c=u.description,f=u.transport,l=r.findLine("a=ssrc:",o);l&&(c.ssrc=l.substr(7).split(" ")[0]);var p=r.findLine("a=mid:",o);p&&(u.name=p.substr(6)),r.findLine("a=sendrecv",o,s)?u.senders="both":r.findLine("a=sendonly",o,s)?u.senders="initiator":r.findLine("a=recvonly",o,s)?u.senders="responder":r.findLine("a=inactive",o,s)&&(u.senders="none");var h=r.findLines("a=rtpmap:",o);h.forEach(function(t){var e=r.rtpmap(t);e.feedback=[];var n=r.findLines("a=fmtp:"+e.id,o);n.forEach(function(t){e.parameters=r.fmtp(t)});var i=r.findLines("a=rtcp-fb:"+e.id,o);i.forEach(function(t){e.feedback.push(r.rtcpfb(t))}),c.payloads.push(e)});var d=r.findLines("a=crypto:",o,s);d.forEach(function(t){c.encryption.push(r.crypto(t))}),r.findLine("a=rtcp-mux",o)&&(c.mux=!0);var m=r.findLines("a=rtcp-fb:*",o);m.forEach(function(t){c.feedback.push(r.rtcpfb(t))});var g=r.findLines("a=extmap:",o);g.forEach(function(t){var e=r.extmap(t),n={sendonly:"responder",recvonly:"initiator",sendrecv:"both",inactive:"none"};e.senders=n[e.senders],c.headerExtensions.push(e)});var b=r.findLines("a=ssrc:",o);b.length&&(c.ssrcs=r.ssrc(b));var v=r.findLine("a=fingerprint:",o,s);v&&(f.fingerprint=r.fingerprint(v));var y=r.findLine("a=ice-ufrag:",o,s),x=r.findLine("a=ice-pwd:",o,s);if(y&&x){f.ufrag=y.substr(12),f.pwd=x.substr(10),f.candidates=[];var w=r.findLines("a=candidate:",o,s);w.forEach(function(t){f.candidates.push(n.toCandidateJSON(t))})}return u},n.toCandidateJSON=function(t){var e=r.candidate(t.split("\r\n")[0]);return e.id=(i++).toString(36).substr(0,12),e}},{"./parsers":89}],91:[function(t,e,n){var r={initiator:"sendonly",responder:"recvonly",both:"sendrecv",none:"inactive",sendonly:"initator",recvonly:"responder",sendrecv:"both",inactive:"none"};n.toSessionSDP=function(t){var e=["v=0","o=- "+(t.sid||Date.now())+" 2 IN IP4 0.0.0.0","s=-","t=0 0"],r=t.groupings||[];r.forEach(function(t){e.push("a=group:"+t.semantics+" "+t.contents.join(" "))});var i=t.contents||[];return i.forEach(function(t){e.push(n.toMediaSDP(t))}),e.join("\r\n")+"\r\n"},n.toMediaSDP=function(t){var e=[],i=t.description,o=t.transport,s=i.payloads||[],a=[i.media,"1"];if(i.encryption&&i.encryption.length>0||o&&o.fingerprint?a.push("RTP/SAVPF"):a.push("RTP/AVPF"),s.forEach(function(t){a.push(t.id)}),e.push("m="+a.join(" ")),e.push("c=IN IP4 0.0.0.0"),e.push("a=rtcp:1 IN IP4 0.0.0.0"),o&&(o.ufrag&&e.push("a=ice-ufrag:"+o.ufrag),o.pwd&&e.push("a=ice-pwd:"+o.pwd),o.fingerprint)){var u=o.fingerprint;e.push("a=fingerprint:"+u.hash+" "+u.value)}e.push("a="+(r[t.senders]||"sendrecv")),e.push("a=mid:"+t.name),i.mux&&e.push("a=rtcp-mux");var c=i.encryption||[];c.forEach(function(t){e.push("a=crypto:"+t.tag+" "+t.cipherSuite+" "+t.keyParams+" "+t.sessionParams)}),s.forEach(function(t){var n="a=rtpmap:"+t.id+" "+t.name+"/"+t.clockrate;if(t.channels&&"1"!=t.channels&&(n+="/"+t.channels),e.push(n),t.parameters&&t.parameters.length){var r=["a=fmtp:"+t.id];t.parameters.forEach(function(t){r.push((t.key?t.key+"=":"")+t.value)}),e.push(r.join(" "))}t.feedback&&t.feedback.forEach(function(n){"trr-int"===n.type?e.push("a=rtcp-fb:"+t.id+" trr-int "+n.value?n.value:"0"):e.push("a=rtcp-fb:"+t.id+" "+n.type+(n.subtype?" "+n.subtype:""))})}),i.feedback&&i.feedback.forEach(function(t){"trr-int"===t.type?e.push(t.value):e.push("a=rtcp-fb:* "+t.type+(t.subtype?" "+t.subtype:""))});var f=i.headerExtensions||[];f.forEach(function(t){e.push("a=extmap:"+t.id+(t.senders?"/"+r[t.senders]:"")+" "+t.uri)});var l=i.ssrcs||[];l.forEach(function(t){for(var n in t)"ssrc"!=n&&e.push("a=ssrc:"+t.ssrc+" "+n+(t[n]?":"+t[n]:""))});var p=o.candidates||[];return p.forEach(function(t){e.push(n.toCandidateSDP(t))}),e.join("\r\n")},n.toCandidateSDP=function(t){var e=[];e.push(t.foundation),e.push(t.component),e.push(t.protocol),e.push(t.priority),e.push(t.ip),e.push(t.port);var n=t.type;return e.push("typ"),e.push(n),("srflx"===n||"prflx"===n||"relay"===n)&&t.relAddr&&t.relPort&&(e.push("raddr"),e.push(t.relAddr),e.push("rport"),e.push(t.relPort)),e.push("generation"),e.push(t.generation||"0"),"a=candidate:"+e.join(" ")}},{}],92:[function(t,e){var n,r=!1,i=!1,o=navigator.userAgent.toLowerCase();-1!==o.indexOf("firefox")?(n="moz",i=!0):-1!==o.indexOf("chrome")&&(n="webkit",r=!0);var s=window.mozRTCPeerConnection||window.webkitRTCPeerConnection,a=window.mozRTCIceCandidate||window.RTCIceCandidate,u=window.mozRTCSessionDescription||window.RTCSessionDescription,c=window.webkitMediaStream||window.MediaStream,f=navigator.userAgent.match("Chrome")&&parseInt(navigator.userAgent.match(/Chrome\/(.*) /)[1],10)>=26,l=window.webkitAudioContext||window.AudioContext;e.exports={support:!!s,dataChannel:r||i||s.prototype&&s.prototype.createDataChannel,prefix:n,webAudio:!(!l||!l.prototype.createMediaStreamSource),mediaStream:!(!c||!c.prototype.removeTrack),screenSharing:!!f,AudioContext:l,PeerConnection:s,SessionDescription:u,IceCandidate:a}},{}],93:[function(t,e){function n(t){i.call(this,t),this.pc=new o(this.parent.config.peerConnectionConfig,this.parent.config.peerConnectionConstraints),this.pc.on("ice",this.onIceCandidate.bind(this)),this.pc.on("addStream",this.onStreamAdded.bind(this)),this.pc.on("removeStream",this.onStreamRemoved.bind(this)),this.pendingAnswer=null,this.pc.addStream(this.parent.localStream),this.stream=null}var r=t("underscore"),i=t("./session"),o=t("jingle-rtcpeerconnection");n.prototype=Object.create(i.prototype,{constructor:{value:n}}),n.prototype=r.extend(n.prototype,{start:function(){var t=this;this.state="pending",this.pc.isInitiator=!0,this.pc.offer(function(e,n){t.send("session-initiate",n.json)})},end:function(){this.pc.close(),this.onStreamRemoved(),this.state="ended",this.send("session-terminate")},accept:function(){this.send("session-accept",this.pendingAnswer)},ring:function(){this.send("session-info",{ringing:!0})},mute:function(t,e){this.send("session-info",{mute:{creator:t,name:e}})},unmute:function(t,e){this.send("session-info",{unmute:{creator:t,name:e}})},hold:function(){this.send("session-info",{hold:!0})},resume:function(){this.send("session-info",{active:!0})},onSessionInitiate:function(t,e){var n=this;this.state="pending",this.pc.isInitiator=!1,this.pc.answer({type:"offer",json:t},function(t,r){return t?e(t):(n.pendingAnswer=r.json,e(),void 0)})},onSessionAccept:function(t,e){this.state="active",this.pc.handleAnswer({type:"answer",json:t},function(t){e(t)})},onSessionTerminate:function(t,e){this.state="ended",this.pc.close(),this.onStreamRemoved(),e()},onTransportInfo:function(t,e){this.pc.processIce(t,e)},onIceCandidate:function(t){this.send("transport-info",t)},onStreamAdded:function(t){this.stream||(this.stream=t.stream,this.parent.emit("peerStreamAdded",this))},onStreamRemoved:function(){this.parent.peers.splice(this.parent.peers.indexOf(this),1),this.state="ended",this.parent.emit("peerStreamRemoved",this)}}),e.exports=n},{"./session":94,"jingle-rtcpeerconnection":83,underscore:113}],94:[function(t,e){function n(t){var e=this;this.sid=t.sid||Date.now().toString(),this.peer=t.peer,this.isInitiator=t.initiator||!1,this.state="starting",this.parent=t.parent,this.processingQueue=r.queue(function(t,n){var r=t.action,i=t.changes,o=t.cb;e[r](i,function(t){o(t),n()})})}var r=t("async"),i=t("wildemitter");t("jingle-rtcpeerconnection"),t("sdp-jingle-json"),n.prototype=Object.create(i.prototype,{constructor:{value:n}}),n.prototype.start=function(){},n.prototype.end=function(){},n.prototype.process=function(t,e,n){var r=t.split("-"),i="on"+r[0][0].toUpperCase()+r[0].substr(1)+r[1][0].toUpperCase()+r[1].substr(1);this.processingQueue.push({action:i,changes:e,cb:n})},n.prototype.send=function(t,e){e=e||{},e.sid=this.sid,e.action=t,this.parent.emit("send",{to:this.peer,type:"set",jingle:e})},Object.defineProperty(n.prototype,"starting",{get:function(){return"starting"==this.state}}),Object.defineProperty(n.prototype,"pending",{get:function(){return"pending"==this.state}}),Object.defineProperty(n.prototype,"active",{get:function(){return"active"==this.state}}),Object.defineProperty(n.prototype,"ended",{get:function(){return"ended"==this.state}}),n.prototype.onContentAccept=function(t,e){e()},n.prototype.onContentAdd=function(t,e){e()},n.prototype.onContentModify=function(t,e){e()},n.prototype.onContentReject=function(t,e){e()},n.prototype.onContentRemove=function(t,e){e()},n.prototype.onDescriptionInfo=function(t,e){e()},n.prototype.onSessionAccept=function(t,e){e()},n.prototype.onSessionInfo=function(t,e){e()},n.prototype.onSessionInitiate=function(t,e){e()},n.prototype.onSessionTerminate=function(t,e){e()},n.prototype.onTransportAccept=function(t,e){e()},n.prototype.onTransportInfo=function(t,e){e()},n.prototype.onTransportReject=function(t,e){e()},n.prototype.onTransportReplace=function(t,e){e()},e.exports=n},{async:59,"jingle-rtcpeerconnection":83,"sdp-jingle-json":88,wildemitter:114}],95:[function(t,e){"use strict";var n=t("underscore"),r=t("./lib/core"),i=t("./lib/helpers"),o=t("./lib/types");e.exports=n.extend({},r,i,o)},{"./lib/core":96,"./lib/helpers":97,"./lib/types":98,underscore:113}],96:[function(t,e,n){"use strict";function r(t){var e=t.prototype._NS+"|"+t.prototype._EL;f[e]=t,p[e]=t}function i(t){return c.serializeToString(t)}function o(t){var e,n={},r={constructor:!0,_EL:!0,_NS:!0,_extensions:!0,_name:!0,parent:!0,prototype:!0,toJSON:!0,toString:!0,xml:!0};for(e in t._extensions)t._extensions[e].toJSON&&"_"!==e[0]&&(n[e]=t._extensions[e].toJSON());for(e in t)if(!r[e]&&!(l[t._NS+"|"+t._EL]||{})[e]&&!t._extensions[e]&&"_"!==e[0]){var i=t[e];if("function"==typeof i)continue;var o=Object.prototype.toString.call(i);o.indexOf("Object")>=0?Object.keys(i).length>0&&(n[e]=i):o.indexOf("Array")>=0?i.length>0&&(n[e]=i):i&&(n[e]=i)}return n}var s=t("underscore"),a=t("./helpers"),u=t("./types");a.find;var c=new XMLSerializer,f={},l={},p={};n.build=function(t){var e=p[t.namespaceURI+"|"+t.localName];return e?new e(null,t):void 0},n.extend=function(t,e,r){var i=t.prototype._NS+"|"+t.prototype._EL,o=e.prototype._name,s=e.prototype._NS+"|"+e.prototype._EL;f[s]=e,l[s]||(l[s]={}),l[i]||(l[i]={}),l[i][o]=e,n.add(t,o,u.extension(e)),r&&n.add(t,r,u.multiExtension(e))},n.add=function(t,e,n){n.enumerable=!0,Object.defineProperty(t.prototype,e,n)},n.define=function(t){var e=function(e,n,r){var i=this,o=(n||{}).parentNode||(r||{}).xml,u=(o||{}).namespaceURI;return i.xml=n||a.createElement(i._NS,i._EL,u),i._extensions={},s.each(i.xml.childNodes,function(t){var e=t.namespaceURI+"|"+t.localName,n=f[e];if(void 0!==n){var r=n.prototype._name;i._extensions[r]=new n(null,t),i._extensions[r].parent=i}}),s.extend(i,e),t.init&&t.init(e),i};e.prototype={constructor:{value:e},_name:t.name,_eventname:t.eventName,_NS:t.namespace,_EL:t.element,toString:function(){return i(this.xml)},toJSON:function(){return o(this)}};var u=Object.keys(t.fields||{});return u.forEach(function(r){n.add(e,r,t.fields[r])}),t.topLevel&&r(e),e}},{"./helpers":97,"./types":98,underscore:113}],97:[function(t,e,n){"use strict";var r=t("underscore"),i="http://www.w3.org/XML/1998/namespace";n.getParser=function(){return new DOMParser},n.createElement=function(t,e,r){var i=document.createElementNS(t,e);return r&&r===t||n.setAttribute(i,"xmlns",t),i};var o=n.find=function(t,e,n){var i=t.querySelectorAll(n);return r.filter(i,function(n){return n.namespaceURI===e&&n.parentNode==t})};n.findOrCreate=function(t,e,r){var i=n.find(t,e,r);if(i.length)return i[0];var o=n.createElement(e,r,t.namespaceURI);return t.appendChild(o),o},n.getAttribute=function(t,e,n){return t.getAttribute(e)||n||""},n.setAttribute=function(t,e,n,r){n||r?t.setAttribute(e,n):t.removeAttribute(e)},n.getBoolAttribute=function(t,e,n){var r=t.getAttribute(e)||n||"";return"true"===r||"1"===r},n.setBoolAttribute=function(t,e,n){n?t.setAttribute(e,"1"):t.removeAttribute(e)},n.getSubAttribute=function(t,e,n,r,i){var s=o(t,e,n);if(!s)return"";for(var a=0;a<s.length;a++)return s[a].getAttribute(r)||i||"";return""},n.setSubAttribute=function(t,e,r,i,s){var a=o(t,e,r);if(a.length)for(var u=0;u<a.length;u++){if(s)return a[u].setAttribute(i,s),void 0;a[u].removeAttribute(i)}else s&&(r=n.createElement(e,r,t.namespaceURI),r.setAttribute(i,s),t.appendChild(r))},n.getBoolSubAttribute=function(t,e,n,r,i){var o=t.getSubAttribute(e,n,r)||i||"";return"true"===o||"1"===o},n.setBoolSubAttribute=function(t,e,r,i,o){o=o?"1":"",n.setSubAttribute(t,e,r,i,o)},n.getText=function(t){return t.textContent},n.setText=function(t,e){t.textContent=e},n.getSubText=function(t,e,n,r){var i=o(t,e,n);return r=r||"",i.length?i[0].textContent||r:r},n.setSubText=function(t,e,r,i){var s=o(t,e,r);if(s.length)for(var a=0;a<s.length;a++){if(i)return s[a].textContent=i,void 0;t.removeChild(s[a])}else if(i){var u=n.createElement(e,r,t.namespaceURI);u.textContent=i,t.appendChild(u)}},n.getMultiSubText=function(t,e,n,r){var i=o(t,e,n),s=[];r=r||function(t){return t.textContent||""};for(var a=0;a<i.length;a++)s.push(r(i[a]));return s},n.setMultiSubText=function(t,e,i,s,a){var u=o(t,e,i),c=[];a=a||function(r){var o=n.createElement(e,i,t.namespaceURI);o.textContent=r,t.appendChild(o)},c="string"==typeof s?(s||"").split("\n"):s,r.forEach(u,function(e){t.removeChild(e)}),r.forEach(c,function(t){t&&a(t)})},n.getSubLangText=function(t,e,n,r){var s=o(t,e,n);if(!s.length)return{};for(var a,u,c={},f=[],l=0;l<s.length;l++)u=s[l],a=u.getAttributeNS(i,"lang")||r,f.push(a),c[a]=u.textContent||"";return c},n.setSubLangText=function(t,e,r,s,a){var u,c,f=o(t,e,r);if(f.length)for(var l=0;l<f.length;l++)t.removeChild(f[l]);if("string"==typeof s)u=n.createElement(e,r,t.namespaceURI),u.textContent=s,t.appendChild(u);else if("object"==typeof s)for(c in s)s.hasOwnProperty(c)&&(u=n.createElement(e,r,t.namespaceURI),c!==a&&u.setAttributeNS(i,"lang",c),u.textContent=s[c],t.appendChild(u))},n.getBoolSub=function(t,e,n){var r=o(t,e,n);return!!r.length},n.setBoolSub=function(t,e,r,i){var s=o(t,e,r);if(s.length)for(var a=0;a<s.length;a++){if(i)return;t.removeChild(s[a])}else if(i){var u=n.createElement(e,r,t.namespaceURI);t.appendChild(u)}}},{underscore:113}],98:[function(t,e,n){"use strict";var r=t("underscore"),i=t("./helpers"),o=i.find,s=n.field=function(t,e){return function(){var n=r.toArray(arguments);return{get:function(){return t.apply(null,[this.xml].concat(n))},set:function(t){e.apply(null,[this.xml].concat(n).concat([t]))}}}};n.field=s,n.boolAttribute=s(i.getBoolAttribute,i.setBoolAttribute),n.subAttribute=s(i.getSubAttribute,i.setSubAttribute),n.boolSubAttribute=s(i.getSubBoolAttribute,i.setSubBoolAttribute),n.text=s(i.getText,i.setText),n.subText=s(i.getSubText,i.setSubText),n.multiSubText=s(i.getMultiSubText,i.setMultiSubText),n.subLangText=s(i.getSubLangText,i.setSubLangText),n.boolSub=s(i.getBoolSub,i.setBoolSub),n.attribute=function(t,e){return{get:function(){return i.getAttribute(this.xml,t,e)},set:function(e){i.setAttribute(this.xml,t,e)}}},n.extension=function(t){return{get:function(){var e=this,n=t.prototype._name;if(!this._extensions[n]){var r=o(this.xml,t.prototype._NS,t.prototype._EL);r.length?this._extensions[n]=new t(null,r[0],e):(this._extensions[n]=new t({},null,e),this.xml.appendChild(this._extensions[n].xml)),this._extensions[n].parent=this}return this._extensions[n]},set:function(e){var n=this[t.prototype._name];r.extend(n,e)}}},n.multiExtension=function(t){return{get:function(){var e=this,n=o(this.xml,t.prototype._NS,t.prototype._EL),i=[];return r.forEach(n,function(n){i.push(new t({},n,e).toJSON())}),i},set:function(e){var n=this,i=o(this.xml,t.prototype._NS,t.prototype._EL);r.forEach(i,function(t){n.xml.removeChild(t)}),r.forEach(e,function(e){var r=new t(e,null,n);n.xml.appendChild(r.xml)})}}}},{"./helpers":97,underscore:113}],99:[function(e,n){var r=e("__browserify_Buffer").Buffer;!function(){function i(t,e,n){var r=e&&n||0,i=0;for(e=e||[],t.toLowerCase().replace(/[0-9a-f]{2}/g,function(t){16>i&&(e[r+i++]=g[t])});16>i;)e[r+i++]=0;return e}function o(t,e){var n=e||0,r=m;return r[t[n++]]+r[t[n++]]+r[t[n++]]+r[t[n++]]+"-"+r[t[n++]]+r[t[n++]]+"-"+r[t[n++]]+r[t[n++]]+"-"+r[t[n++]]+r[t[n++]]+"-"+r[t[n++]]+r[t[n++]]+r[t[n++]]+r[t[n++]]+r[t[n++]]+r[t[n++]]}function s(t,e,n){var r=e&&n||0,i=e||[];t=t||{};var s=null!=t.clockseq?t.clockseq:x,a=null!=t.msecs?t.msecs:(new Date).getTime(),u=null!=t.nsecs?t.nsecs:S+1,c=a-w+(u-S)/1e4;if(0>c&&null==t.clockseq&&(s=16383&s+1),(0>c||a>w)&&null==t.nsecs&&(u=0),u>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");w=a,S=u,x=s,a+=122192928e5;var f=(1e4*(268435455&a)+u)%4294967296;i[r++]=255&f>>>24,i[r++]=255&f>>>16,i[r++]=255&f>>>8,i[r++]=255&f;var l=268435455&1e4*(a/4294967296);i[r++]=255&l>>>8,i[r++]=255&l,i[r++]=16|15&l>>>24,i[r++]=255&l>>>16,i[r++]=128|s>>>8,i[r++]=255&s;for(var p=t.node||y,h=0;6>h;h++)i[r+h]=p[h];return e?e:o(i)}function a(t,e,n){var r=e&&n||0;"string"==typeof t&&(e="binary"==t?new d(16):null,t=null),t=t||{};var i=t.random||(t.rng||u)();if(i[6]=64|15&i[6],i[8]=128|63&i[8],e)for(var s=0;16>s;s++)e[r+s]=i[s];return e||o(i)}var u,c=this;if("function"==typeof e)try{var f=e("crypto").randomBytes;u=f&&function(){return f(16)}}catch(l){}if(!u&&c.crypto&&crypto.getRandomValues){var p=new Uint8Array(16);u=function(){return crypto.getRandomValues(p),p}}if(!u){var h=new Array(16);u=function(){for(var t,e=0;16>e;e++)0===(3&e)&&(t=4294967296*Math.random()),h[e]=255&t>>>((3&e)<<3);return h}}for(var d="function"==typeof r?r:Array,m=[],g={},b=0;256>b;b++)m[b]=(b+256).toString(16).substr(1),g[m[b]]=b;var v=u(),y=[1|v[0],v[1],v[2],v[3],v[4],v[5]],x=16383&(v[6]<<8|v[7]),w=0,S=0,E=a;if(E.v1=s,E.v4=a,E.parse=i,E.unparse=o,E.BufferClass=d,c.define&&t.amd)t(function(){return E});else if("undefined"!=typeof n&&n.exports)n.exports=E;else{var _=c.uuid;E.noConflict=function(){return c.uuid=_,E},c.uuid=E}}()},{__browserify_Buffer:71,crypto:66}],100:[function(t,e,n){function r(t){c.call(this),this.registry=new Object,this.insureids=0,this.freq=void 0===t?5:t,this.run=!1,this.start()}function i(t,e,n,r){void 0===r&&(++this.insureids,this.insureids%=65e3,r=this.insureids),expiretime=Date.now()+1e3*e;var i=this,o={paddle:i,error_callback:t,args:n,id:r,timeout:expiretime,done:!1,check_in:function(){return this.paddle.check_in(this.id)}};return this.registry[r]=o,o}function o(t){return void 0!==t.id&&(t=t.id),t in this.registry?(this.emit("check_in",this.registry[t]),this.registry[t].done=!0,delete this.registry[t],!0):!1}function s(){var t=Date.now();for(var e in this.registry)t>this.registry[e].timeout&&(this.registry[e].error_callback.apply(this,this.registry[e].args),this.emit("timeout",this.registry[e]),delete this.registry[e]);this.run&&setTimeout(function(){this.checkEnsures()}.bind(this),1e3*this.freq)}function a(t){return void 0!==t&&(this.freq=t),this.run?!1:(this.run=!0,setTimeout(function(){this.checkEnsures()}.bind(this),1e3*this.freq),!0)}function u(){return this.run?(this.run=!1,!0):!0}var c=t("events").EventEmitter;r.super_=c,r.prototype=Object.create(c.prototype,{constructor:{value:r,enumerable:!1}}),r.prototype.insure=i,r.prototype.check_in=o,r.prototype.checkEnsures=s,r.prototype.start=a,r.prototype.stop=u,n.Paddle=r},{events:61}],101:[function(e,n,r){!function(e,i){"object"==typeof r?i(r,n):"function"==typeof t&&t.amd&&t(["exports","module"],i)}(this,function(t,e){function n(){}n.prototype.name="ANONYMOUS",n.prototype.clientFirst=!0,n.prototype.response=function(t){return t.trace||""},n.prototype.challenge=function(){},t=e.exports=n})},{}],102:[function(e,n,r){!function(i,o){"object"==typeof r?o(r,n,e("./lib/mechanism")):"function"==typeof t&&t.amd&&t(["exports","module","./lib/mechanism"],o)}(this,function(t,e,n){t=e.exports=n,t.Mechanism=n})},{"./lib/mechanism":101}],103:[function(e,n,r){!function(i,o){"object"==typeof r?o(r,n,e("crypto")):"function"==typeof t&&t.amd&&t(["exports","module","crypto"],o)}(this,function(t,e,n){function r(t){t=t||{},this._genNonce=t.genNonce||o(32)}function i(t){for(var e={},n=t.split(/,(?=(?:[^"]|"[^"]*")*$)/),r=0,i=n.length;i>r;r++){var o=/(\w+)=["]?([^"]+)["]?$/.exec(n[r]);o&&(e[o[1]]=o[2])}return e}function o(t){var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=e.length;return function(){for(var r=[],i=0;t>i;++i)r.push(e[0|Math.random()*n]);return r.join("")}}function s(t,e){return n.createHash("md5").update(t).digest(e||"hex")}r.prototype.name="DIGEST-MD5",r.prototype.clientFirst=!1,r.prototype.response=function(t){var e=t.serviceType+"/"+t.host;t.serviceName&&t.host!==t.serviceName&&(e+="/"+serviceName);var n,r,i,o=t.realm||this._realm||"",a=this._genNonce(),u="00000001",c="auth",f="";return f+='username="'+t.username+'"',o&&(f+=',realm="'+o+'"'),f+=',nonce="'+this._nonce+'"',f+=',cnonce="'+a+'"',f+=",nc="+u,f+=",qop="+c,f+=',digest-uri="'+e+'"',n=t.authzid?s(s(t.username+":"+o+":"+t.password,"binary")+":"+this._nonce+":"+a+":"+t.authzid):s(s(t.username+":"+o+":"+t.password,"binary")+":"+this._nonce+":"+a),"auth"==c?r=s("AUTHENTICATE:"+e):("auth-int"==c||"auth-conf"==c)&&(r=s("AUTHENTICATE:"+e+":00000000000000000000000000000000")),i=s(n+":"+this._nonce+":"+u+":"+a+":"+c+":"+r),f+=",response="+i,"utf-8"==this._charset&&(f+=",charset=utf-8"),t.authzid&&(f+='authzid="'+t.authzid+'"'),f},r.prototype.challenge=function(t){var e=i(t);return this._realm=e.realm,this._nonce=e.nonce,this._qop=(e.qop||"auth").split(","),this._stale=e.stale,this._maxbuf=parseInt(e.maxbuf)||65536,this._charset=e.charset,this._algo=e.algorithm,this._cipher=e.cipher,this._cipher&&this._cipher.split(","),this},t=e.exports=r})},{crypto:66}],104:[function(e,n,r){!function(i,o){"object"==typeof r?o(r,n,e("./lib/mechanism")):"function"==typeof t&&t.amd&&t(["exports","module","./lib/mechanism"],o)}(this,function(t,e,n){t=e.exports=n,t.Mechanism=n})},{"./lib/mechanism":103}],105:[function(e,n,r){!function(e,i){"object"==typeof r?i(r,n):"function"==typeof t&&t.amd&&t(["exports","module"],i)}(this,function(t,e){function n(){}n.prototype.name="EXTERNAL",n.prototype.clientFirst=!0,n.prototype.response=function(t){return t.authzid||""},n.prototype.challenge=function(){},t=e.exports=n})},{}],106:[function(e,n,r){!function(i,o){"object"==typeof r?o(r,n,e("./lib/mechanism")):"function"==typeof t&&t.amd&&t(["exports","module","./lib/mechanism"],o)}(this,function(t,e,n){t=e.exports=n,t.Mechanism=n})},{"./lib/mechanism":105}],107:[function(e,n,r){!function(e,i){"object"==typeof r?i(r,n):"function"==typeof t&&t.amd&&t(["exports","module"],i)}(this,function(t,e){function n(){}n.prototype.name="PLAIN",n.prototype.clientFirst=!0,n.prototype.response=function(t){var e="";return e+=t.authzid||"",e+="\0",e+=t.username,e+="\0",e+=t.password},n.prototype.challenge=function(){return this},t=e.exports=n})},{}],108:[function(e,n,r){!function(i,o){"object"==typeof r?o(r,n,e("./lib/mechanism")):"function"==typeof t&&t.amd&&t(["exports","module","./lib/mechanism"],o)}(this,function(t,e,n){t=e.exports=n,t.Mechanism=n})},{"./lib/mechanism":107}],109:[function(e,n,r){!function(i,o){"object"==typeof r?o(r,n,e("crypto"),e("buffer")):"function"==typeof t&&t.amd&&t(["exports","module","crypto","buffer"],o)}(this,function(t,e,n,r){function i(t){t=t||{},this._genNonce=t.genNonce||l(32),this._stage=0}function o(t,e){return n.createHmac("sha1",t).update(e).digest("binary")}function s(t,e,n){for(var r=o(t,e+"\0\0\0"),i=r,s=0;n-1>s;s++)r=o(t,r),i=u(i,r);return i}function a(t){return n.createHash("sha1").update(t).digest("binary")}function u(t,e){t=new p(t,"binary"),e=new p(e,"binary");var n=Math.min(t.length,e.length);result=[];for(var r=0;n>r;r++)result.push(t[r]^e[r]);return result=new p(result,"binary"),result.toString("binary")}function c(t){for(var e=[],n="",r=0;r<t.length;r++)n=t[r],","===n?e.push("=2C"):"="===n?e.push("=3D"):e.push(n);return e.join("")}function f(t){for(var e={},n=t.split(/,(?=(?:[^"]|"[^"]*")*$)/),r=0,i=n.length;i>r;r++){var o=/(\w+)=["]?([^"]+)["]?$/.exec(n[r]);o&&(e[o[1]]=o[2])}return e}function l(t){var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=e.length;return function(){for(var r=[],i=0;t>i;++i)r.push(e[0|Math.random()*n]);return r.join("")}}var p=r.Buffer;i.prototype.name="SCRAM-SHA-1",i.prototype.clientFirst=!0,i.prototype.response=function(t){return h[this._stage](this,t)},i.prototype.challenge=function(t){var e=f(t);return this._salt=new p(e.s||"","base64").toString("binary"),this._iterationCount=parseInt(e.i,10),this._nonce=e.r,this._verifier=e.v,this._error=e.e,this._challenge=t,this};var h={};h[0]=function(t,e){t._cnonce=t._genNonce();var n="";e.authzid&&(n="a="+c(e.authzid)),t._gs2Header="n,"+n+",";var r="r="+t._cnonce,i="n="+c(e.username);t._clientFirstMessageBare=i+","+r;var o=t._gs2Header+t._clientFirstMessageBare;return t._stage=1,o},h[1]=function(t,e){var n=new p(t._gs2Header).toString("base64");t._clientFinalMessageWithoutProof="c="+n+",r="+t._nonce;var r,i,c;e.clientKey&&e.serverKey?(i=e.clientKey,c=e.serverKey):(r=e.saltedPassword||s(e.password,t._salt,t._iterationCount),i=o(r,"Client Key"),c=o(r,"Server Key"));var f=a(i),l=t._clientFirstMessageBare+","+t._challenge+","+t._clientFinalMessageWithoutProof,h=o(f,l),d=u(i,h),m=new p(d,"binary").toString("base64");t._serverSignature=o(c,l);var g=t._clientFinalMessageWithoutProof+",p="+m;return t._stage=2,t.cache={saltedPassword:r,clientKey:i,serverKey:c},g},h[2]=function(){return""},t=e.exports=i})},{buffer:64,crypto:66}],110:[function(e,n,r){!function(i,o){"object"==typeof r?o(r,n,e("./lib/mechanism")):"function"==typeof t&&t.amd&&t(["exports","module","./lib/mechanism"],o)}(this,function(t,e,n){t=e.exports=n,t.Mechanism=n})},{"./lib/mechanism":109}],111:[function(e,n,r){!function(e,i){"object"==typeof r?i(r,n):"function"==typeof t&&t.amd&&t(["exports","module"],i)}(this,function(t,e){function n(){this._mechs=[]}n.prototype.use=function(t,e){return e||(e=t,t=e.prototype.name),this._mechs.push({name:t,mech:e}),this},n.prototype.create=function(t){for(var e=0,n=this._mechs.length;n>e;e++)for(var r=0,i=t.length;i>r;r++){var o=this._mechs[e];if(o.name==t[r])return new o.mech}return null},t=e.exports=n})},{}],112:[function(e,n,r){!function(i,o){"object"==typeof r?o(r,n,e("./lib/factory")):"function"==typeof t&&t.amd&&t(["exports","module","./lib/factory"],o)}(this,function(t,e,n){t=e.exports=n,t.Factory=n})},{"./lib/factory":111}],113:[function(t,e,n){!function(){var t=this,r=t._,i={},o=Array.prototype,s=Object.prototype,a=Function.prototype,u=o.push,c=o.slice,f=o.concat,l=s.toString,p=s.hasOwnProperty,h=o.forEach,d=o.map,m=o.reduce,g=o.reduceRight,b=o.filter,v=o.every,y=o.some,x=o.indexOf,w=o.lastIndexOf,S=Array.isArray,E=Object.keys,_=a.bind,j=function(t){return t instanceof j?t:this instanceof j?(this._wrapped=t,void 0):new j(t)};"undefined"!=typeof n?("undefined"!=typeof e&&e.exports&&(n=e.exports=j),n._=j):t._=j,j.VERSION="1.5.2";var k=j.each=j.forEach=function(t,e,n){if(null!=t)if(h&&t.forEach===h)t.forEach(e,n);else if(t.length===+t.length){for(var r=0,o=t.length;o>r;r++)if(e.call(n,t[r],r,t)===i)return}else for(var s=j.keys(t),r=0,o=s.length;o>r;r++)if(e.call(n,t[s[r]],s[r],t)===i)return};j.map=j.collect=function(t,e,n){var r=[];return null==t?r:d&&t.map===d?t.map(e,n):(k(t,function(t,i,o){r.push(e.call(n,t,i,o))}),r)};var A="Reduce of empty array with no initial value";j.reduce=j.foldl=j.inject=function(t,e,n,r){var i=arguments.length>2;if(null==t&&(t=[]),m&&t.reduce===m)return r&&(e=j.bind(e,r)),i?t.reduce(e,n):t.reduce(e);if(k(t,function(t,o,s){i?n=e.call(r,n,t,o,s):(n=t,i=!0)}),!i)throw new TypeError(A);return n},j.reduceRight=j.foldr=function(t,e,n,r){var i=arguments.length>2;if(null==t&&(t=[]),g&&t.reduceRight===g)return r&&(e=j.bind(e,r)),i?t.reduceRight(e,n):t.reduceRight(e);var o=t.length;if(o!==+o){var s=j.keys(t);o=s.length}if(k(t,function(a,u,c){u=s?s[--o]:--o,i?n=e.call(r,n,t[u],u,c):(n=t[u],i=!0)}),!i)throw new TypeError(A);return n},j.find=j.detect=function(t,e,n){var r;return I(t,function(t,i,o){return e.call(n,t,i,o)?(r=t,!0):void 0}),r},j.filter=j.select=function(t,e,n){var r=[];return null==t?r:b&&t.filter===b?t.filter(e,n):(k(t,function(t,i,o){e.call(n,t,i,o)&&r.push(t)}),r)},j.reject=function(t,e,n){return j.filter(t,function(t,r,i){return!e.call(n,t,r,i)},n)},j.every=j.all=function(t,e,n){e||(e=j.identity);var r=!0;return null==t?r:v&&t.every===v?t.every(e,n):(k(t,function(t,o,s){return(r=r&&e.call(n,t,o,s))?void 0:i}),!!r)};var I=j.some=j.any=function(t,e,n){e||(e=j.identity);var r=!1;return null==t?r:y&&t.some===y?t.some(e,n):(k(t,function(t,o,s){return r||(r=e.call(n,t,o,s))?i:void 0}),!!r)};j.contains=j.include=function(t,e){return null==t?!1:x&&t.indexOf===x?-1!=t.indexOf(e):I(t,function(t){return t===e})},j.invoke=function(t,e){var n=c.call(arguments,2),r=j.isFunction(e);return j.map(t,function(t){return(r?e:t[e]).apply(t,n)})},j.pluck=function(t,e){return j.map(t,function(t){return t[e]})},j.where=function(t,e,n){return j.isEmpty(e)?n?void 0:[]:j[n?"find":"filter"](t,function(t){for(var n in e)if(e[n]!==t[n])return!1;return!0})},j.findWhere=function(t,e){return j.where(t,e,!0)},j.max=function(t,e,n){if(!e&&j.isArray(t)&&t[0]===+t[0]&&t.length<65535)return Math.max.apply(Math,t);if(!e&&j.isEmpty(t))return-1/0;var r={computed:-1/0,value:-1/0};return k(t,function(t,i,o){var s=e?e.call(n,t,i,o):t;s>r.computed&&(r={value:t,computed:s})}),r.value},j.min=function(t,e,n){if(!e&&j.isArray(t)&&t[0]===+t[0]&&t.length<65535)return Math.min.apply(Math,t);if(!e&&j.isEmpty(t))return 1/0;var r={computed:1/0,value:1/0};return k(t,function(t,i,o){var s=e?e.call(n,t,i,o):t;s<r.computed&&(r={value:t,computed:s})}),r.value},j.shuffle=function(t){var e,n=0,r=[];return k(t,function(t){e=j.random(n++),r[n-1]=r[e],r[e]=t}),r},j.sample=function(t,e,n){return arguments.length<2||n?t[j.random(t.length-1)]:j.shuffle(t).slice(0,Math.max(0,e))};var C=function(t){return j.isFunction(t)?t:function(e){return e[t]}};j.sortBy=function(t,e,n){var r=C(e);return j.pluck(j.map(t,function(t,e,i){return{value:t,index:e,criteria:r.call(n,t,e,i)}}).sort(function(t,e){var n=t.criteria,r=e.criteria;if(n!==r){if(n>r||void 0===n)return 1;if(r>n||void 0===r)return-1}return t.index-e.index}),"value")};var O=function(t){return function(e,n,r){var i={},o=null==n?j.identity:C(n);return k(e,function(n,s){var a=o.call(r,n,s,e);t(i,a,n)}),i}};j.groupBy=O(function(t,e,n){(j.has(t,e)?t[e]:t[e]=[]).push(n)}),j.indexBy=O(function(t,e,n){t[e]=n}),j.countBy=O(function(t,e){j.has(t,e)?t[e]++:t[e]=1}),j.sortedIndex=function(t,e,n,r){n=null==n?j.identity:C(n);for(var i=n.call(r,e),o=0,s=t.length;s>o;){var a=o+s>>>1;n.call(r,t[a])<i?o=a+1:s=a}return o},j.toArray=function(t){return t?j.isArray(t)?c.call(t):t.length===+t.length?j.map(t,j.identity):j.values(t):[]},j.size=function(t){return null==t?0:t.length===+t.length?t.length:j.keys(t).length},j.first=j.head=j.take=function(t,e,n){return null==t?void 0:null==e||n?t[0]:c.call(t,0,e)},j.initial=function(t,e,n){return c.call(t,0,t.length-(null==e||n?1:e))},j.last=function(t,e,n){return null==t?void 0:null==e||n?t[t.length-1]:c.call(t,Math.max(t.length-e,0))},j.rest=j.tail=j.drop=function(t,e,n){return c.call(t,null==e||n?1:e)},j.compact=function(t){return j.filter(t,j.identity)};var N=function(t,e,n){return e&&j.every(t,j.isArray)?f.apply(n,t):(k(t,function(t){j.isArray(t)||j.isArguments(t)?e?u.apply(n,t):N(t,e,n):n.push(t)}),n)};j.flatten=function(t,e){return N(t,e,[])},j.without=function(t){return j.difference(t,c.call(arguments,1))},j.uniq=j.unique=function(t,e,n,r){j.isFunction(e)&&(r=n,n=e,e=!1);var i=n?j.map(t,n,r):t,o=[],s=[];
return k(i,function(n,r){(e?r&&s[s.length-1]===n:j.contains(s,n))||(s.push(n),o.push(t[r]))}),o},j.union=function(){return j.uniq(j.flatten(arguments,!0))},j.intersection=function(t){var e=c.call(arguments,1);return j.filter(j.uniq(t),function(t){return j.every(e,function(e){return j.indexOf(e,t)>=0})})},j.difference=function(t){var e=f.apply(o,c.call(arguments,1));return j.filter(t,function(t){return!j.contains(e,t)})},j.zip=function(){for(var t=j.max(j.pluck(arguments,"length").concat(0)),e=new Array(t),n=0;t>n;n++)e[n]=j.pluck(arguments,""+n);return e},j.object=function(t,e){if(null==t)return{};for(var n={},r=0,i=t.length;i>r;r++)e?n[t[r]]=e[r]:n[t[r][0]]=t[r][1];return n},j.indexOf=function(t,e,n){if(null==t)return-1;var r=0,i=t.length;if(n){if("number"!=typeof n)return r=j.sortedIndex(t,e),t[r]===e?r:-1;r=0>n?Math.max(0,i+n):n}if(x&&t.indexOf===x)return t.indexOf(e,n);for(;i>r;r++)if(t[r]===e)return r;return-1},j.lastIndexOf=function(t,e,n){if(null==t)return-1;var r=null!=n;if(w&&t.lastIndexOf===w)return r?t.lastIndexOf(e,n):t.lastIndexOf(e);for(var i=r?n:t.length;i--;)if(t[i]===e)return i;return-1},j.range=function(t,e,n){arguments.length<=1&&(e=t||0,t=0),n=arguments[2]||1;for(var r=Math.max(Math.ceil((e-t)/n),0),i=0,o=new Array(r);r>i;)o[i++]=t,t+=n;return o};var T=function(){};j.bind=function(t,e){var n,r;if(_&&t.bind===_)return _.apply(t,c.call(arguments,1));if(!j.isFunction(t))throw new TypeError;return n=c.call(arguments,2),r=function(){if(!(this instanceof r))return t.apply(e,n.concat(c.call(arguments)));T.prototype=t.prototype;var i=new T;T.prototype=null;var o=t.apply(i,n.concat(c.call(arguments)));return Object(o)===o?o:i}},j.partial=function(t){var e=c.call(arguments,1);return function(){return t.apply(this,e.concat(c.call(arguments)))}},j.bindAll=function(t){var e=c.call(arguments,1);if(0===e.length)throw new Error("bindAll must be passed function names");return k(e,function(e){t[e]=j.bind(t[e],t)}),t},j.memoize=function(t,e){var n={};return e||(e=j.identity),function(){var r=e.apply(this,arguments);return j.has(n,r)?n[r]:n[r]=t.apply(this,arguments)}},j.delay=function(t,e){var n=c.call(arguments,2);return setTimeout(function(){return t.apply(null,n)},e)},j.defer=function(t){return j.delay.apply(j,[t,1].concat(c.call(arguments,1)))},j.throttle=function(t,e,n){var r,i,o,s=null,a=0;n||(n={});var u=function(){a=n.leading===!1?0:new Date,s=null,o=t.apply(r,i)};return function(){var c=new Date;a||n.leading!==!1||(a=c);var f=e-(c-a);return r=this,i=arguments,0>=f?(clearTimeout(s),s=null,a=c,o=t.apply(r,i)):s||n.trailing===!1||(s=setTimeout(u,f)),o}},j.debounce=function(t,e,n){var r,i,o,s,a;return function(){o=this,i=arguments,s=new Date;var u=function(){var c=new Date-s;e>c?r=setTimeout(u,e-c):(r=null,n||(a=t.apply(o,i)))},c=n&&!r;return r||(r=setTimeout(u,e)),c&&(a=t.apply(o,i)),a}},j.once=function(t){var e,n=!1;return function(){return n?e:(n=!0,e=t.apply(this,arguments),t=null,e)}},j.wrap=function(t,e){return function(){var n=[t];return u.apply(n,arguments),e.apply(this,n)}},j.compose=function(){var t=arguments;return function(){for(var e=arguments,n=t.length-1;n>=0;n--)e=[t[n].apply(this,e)];return e[0]}},j.after=function(t,e){return function(){return--t<1?e.apply(this,arguments):void 0}},j.keys=E||function(t){if(t!==Object(t))throw new TypeError("Invalid object");var e=[];for(var n in t)j.has(t,n)&&e.push(n);return e},j.values=function(t){for(var e=j.keys(t),n=e.length,r=new Array(n),i=0;n>i;i++)r[i]=t[e[i]];return r},j.pairs=function(t){for(var e=j.keys(t),n=e.length,r=new Array(n),i=0;n>i;i++)r[i]=[e[i],t[e[i]]];return r},j.invert=function(t){for(var e={},n=j.keys(t),r=0,i=n.length;i>r;r++)e[t[n[r]]]=n[r];return e},j.functions=j.methods=function(t){var e=[];for(var n in t)j.isFunction(t[n])&&e.push(n);return e.sort()},j.extend=function(t){return k(c.call(arguments,1),function(e){if(e)for(var n in e)t[n]=e[n]}),t},j.pick=function(t){var e={},n=f.apply(o,c.call(arguments,1));return k(n,function(n){n in t&&(e[n]=t[n])}),e},j.omit=function(t){var e={},n=f.apply(o,c.call(arguments,1));for(var r in t)j.contains(n,r)||(e[r]=t[r]);return e},j.defaults=function(t){return k(c.call(arguments,1),function(e){if(e)for(var n in e)void 0===t[n]&&(t[n]=e[n])}),t},j.clone=function(t){return j.isObject(t)?j.isArray(t)?t.slice():j.extend({},t):t},j.tap=function(t,e){return e(t),t};var L=function(t,e,n,r){if(t===e)return 0!==t||1/t==1/e;if(null==t||null==e)return t===e;t instanceof j&&(t=t._wrapped),e instanceof j&&(e=e._wrapped);var i=l.call(t);if(i!=l.call(e))return!1;switch(i){case"[object String]":return t==String(e);case"[object Number]":return t!=+t?e!=+e:0==t?1/t==1/e:t==+e;case"[object Date]":case"[object Boolean]":return+t==+e;case"[object RegExp]":return t.source==e.source&&t.global==e.global&&t.multiline==e.multiline&&t.ignoreCase==e.ignoreCase}if("object"!=typeof t||"object"!=typeof e)return!1;for(var o=n.length;o--;)if(n[o]==t)return r[o]==e;var s=t.constructor,a=e.constructor;if(s!==a&&!(j.isFunction(s)&&s instanceof s&&j.isFunction(a)&&a instanceof a))return!1;n.push(t),r.push(e);var u=0,c=!0;if("[object Array]"==i){if(u=t.length,c=u==e.length)for(;u--&&(c=L(t[u],e[u],n,r)););}else{for(var f in t)if(j.has(t,f)&&(u++,!(c=j.has(e,f)&&L(t[f],e[f],n,r))))break;if(c){for(f in e)if(j.has(e,f)&&!u--)break;c=!u}}return n.pop(),r.pop(),c};j.isEqual=function(t,e){return L(t,e,[],[])},j.isEmpty=function(t){if(null==t)return!0;if(j.isArray(t)||j.isString(t))return 0===t.length;for(var e in t)if(j.has(t,e))return!1;return!0},j.isElement=function(t){return!(!t||1!==t.nodeType)},j.isArray=S||function(t){return"[object Array]"==l.call(t)},j.isObject=function(t){return t===Object(t)},k(["Arguments","Function","String","Number","Date","RegExp"],function(t){j["is"+t]=function(e){return l.call(e)=="[object "+t+"]"}}),j.isArguments(arguments)||(j.isArguments=function(t){return!(!t||!j.has(t,"callee"))}),"function"!=typeof/./&&(j.isFunction=function(t){return"function"==typeof t}),j.isFinite=function(t){return isFinite(t)&&!isNaN(parseFloat(t))},j.isNaN=function(t){return j.isNumber(t)&&t!=+t},j.isBoolean=function(t){return t===!0||t===!1||"[object Boolean]"==l.call(t)},j.isNull=function(t){return null===t},j.isUndefined=function(t){return void 0===t},j.has=function(t,e){return p.call(t,e)},j.noConflict=function(){return t._=r,this},j.identity=function(t){return t},j.times=function(t,e,n){for(var r=Array(Math.max(0,t)),i=0;t>i;i++)r[i]=e.call(n,i);return r},j.random=function(t,e){return null==e&&(e=t,t=0),t+Math.floor(Math.random()*(e-t+1))};var M={escape:{"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;"}};M.unescape=j.invert(M.escape);var q={escape:new RegExp("["+j.keys(M.escape).join("")+"]","g"),unescape:new RegExp("("+j.keys(M.unescape).join("|")+")","g")};j.each(["escape","unescape"],function(t){j[t]=function(e){return null==e?"":(""+e).replace(q[t],function(e){return M[t][e]})}}),j.result=function(t,e){if(null==t)return void 0;var n=t[e];return j.isFunction(n)?n.call(t):n},j.mixin=function(t){k(j.functions(t),function(e){var n=j[e]=t[e];j.prototype[e]=function(){var t=[this._wrapped];return u.apply(t,arguments),D.call(this,n.apply(j,t))}})};var B=0;j.uniqueId=function(t){var e=++B+"";return t?t+e:e},j.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var R=/(.)^/,P={"'":"'","\\":"\\","\r":"r","\n":"n","	":"t","\u2028":"u2028","\u2029":"u2029"},U=/\\|'|\r|\n|\t|\u2028|\u2029/g;j.template=function(t,e,n){var r;n=j.defaults({},n,j.templateSettings);var i=new RegExp([(n.escape||R).source,(n.interpolate||R).source,(n.evaluate||R).source].join("|")+"|$","g"),o=0,s="__p+='";t.replace(i,function(e,n,r,i,a){return s+=t.slice(o,a).replace(U,function(t){return"\\"+P[t]}),n&&(s+="'+\n((__t=("+n+"))==null?'':_.escape(__t))+\n'"),r&&(s+="'+\n((__t=("+r+"))==null?'':__t)+\n'"),i&&(s+="';\n"+i+"\n__p+='"),o=a+e.length,e}),s+="';\n",n.variable||(s="with(obj||{}){\n"+s+"}\n"),s="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+s+"return __p;\n";try{r=new Function(n.variable||"obj","_",s)}catch(a){throw a.source=s,a}if(e)return r(e,j);var u=function(t){return r.call(this,t,j)};return u.source="function("+(n.variable||"obj")+"){\n"+s+"}",u},j.chain=function(t){return j(t).chain()};var D=function(t){return this._chain?j(t).chain():t};j.mixin(j),k(["pop","push","reverse","shift","sort","splice","unshift"],function(t){var e=o[t];j.prototype[t]=function(){var n=this._wrapped;return e.apply(n,arguments),"shift"!=t&&"splice"!=t||0!==n.length||delete n[0],D.call(this,n)}}),k(["concat","join","slice"],function(t){var e=o[t];j.prototype[t]=function(){return D.call(this,e.apply(this._wrapped,arguments))}}),j.extend(j.prototype,{chain:function(){return this._chain=!0,this},value:function(){return this._wrapped}})}.call(this)},{}],114:[function(t,e){function n(){this.callbacks={}}e.exports=n,n.prototype.on=function(t){var e=3===arguments.length,n=e?arguments[1]:void 0,r=e?arguments[2]:arguments[1];return r._groupName=n,(this.callbacks[t]=this.callbacks[t]||[]).push(r),this},n.prototype.once=function(t){function e(){n.off(t,e),o.apply(this,arguments)}var n=this,r=3===arguments.length,i=r?arguments[1]:void 0,o=r?arguments[2]:arguments[1];return this.on(t,i,e),this},n.prototype.releaseGroup=function(t){var e,n,r,i;for(e in this.callbacks)for(i=this.callbacks[e],n=0,r=i.length;r>n;n++)i[n]._groupName===t&&(i.splice(n,1),n--,r--);return this},n.prototype.off=function(t,e){var n,r=this.callbacks[t];return r?1===arguments.length?(delete this.callbacks[t],this):(n=r.indexOf(e),r.splice(n,1),this):this},n.prototype.emit=function(t){var e,n,r=[].slice.call(arguments,1),i=this.callbacks[t],o=this.getWildcardCallbacks(t);if(i)for(e=0,n=i.length;n>e&&i[e];++e)i[e].apply(this,r);if(o)for(e=0,n=o.length;n>e&&o[e];++e)o[e].apply(this,[t].concat(r));return this},n.prototype.getWildcardCallbacks=function(t){var e,n,r=[];for(e in this.callbacks)n=e.split("*"),("*"===e||2===n.length&&t.slice(0,n[1].length)===n[1])&&(r=r.concat(this.callbacks[e]));return r}},{}]},{},[1])(1)});(function(e){if("function"==typeof bootstrap)bootstrap("attachmediastream",e);else if("object"==typeof exports)module.exports=e();else if("function"==typeof define&&define.amd)define(e);else if("undefined"!=typeof ses){if(!ses.ok())return;ses.makeAttachMediaStream=e}else"undefined"!=typeof window?window.attachMediaStream=e():global.attachMediaStream=e()})(function(){var define,ses,bootstrap,module,exports;
return (function(e,t,n){function i(n,s){if(!t[n]){if(!e[n]){var o=typeof require=="function"&&require;if(!s&&o)return o(n,!0);if(r)return r(n,!0);throw new Error("Cannot find module '"+n+"'")}var u=t[n]={exports:{}};e[n][0].call(u.exports,function(t){var r=e[n][1][t];return i(r?r:t)},u,u.exports)}return t[n].exports}var r=typeof require=="function"&&require;for(var s=0;s<n.length;s++)i(n[s]);return i})({1:[function(require,module,exports){
module.exports = function (stream, el, options) {
    var URL = window.URL;
    var opts = {
        autoplay: true,
        mirror: false,
        muted: false
    };
    var element = el || document.createElement('video');
    var item;

    if (options) {
        for (item in options) {
            opts[item] = options[item];
        }
    }

    if (opts.autoplay) element.autoplay = 'autoplay';
    if (opts.muted) element.muted = true;
    if (opts.mirror) {
        ['', 'moz', 'webkit', 'o', 'ms'].forEach(function (prefix) {
            var styleName = prefix ? prefix + 'Transform' : 'transform';
            element.style[styleName] = 'scaleX(-1)';
        });
    }

    // this first one should work most everywhere now
    // but we have a few fallbacks just in case.
    if (URL && URL.createObjectURL) {
        element.src = URL.createObjectURL(stream);
    } else if (element.srcObject) {
        element.srcObject = stream;
    } else if (element.mozSrcObject) {
        element.mozSrcObject = stream;
    } else {
        return false;
    }

    return element;
};

},{}]},{},[1])(1)
});
;
